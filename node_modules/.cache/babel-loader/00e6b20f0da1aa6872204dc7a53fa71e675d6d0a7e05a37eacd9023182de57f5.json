{"ast":null,"code":"var _jsxFileName = \"D:\\\\All Downloaded files\\\\CypherschoolAssignment\\\\CypherStudio\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$(),\n  _s8 = $RefreshSig$(),\n  _s9 = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { getAuth, signInWithCustomToken, signInAnonymously } from 'firebase/auth';\nimport { initializeApp } from 'firebase/app';\nimport { getFirestore, doc, setDoc, getDoc, collection, getDocs, deleteDoc, query, where } from 'firebase/firestore';\n\n// --- CodeMirror 6 Imports for IDE Features (New/Replacement) ---\nimport { basicSetup, EditorView } from 'codemirror';\nimport { Compartment } from '@codemirror/state';\nimport { javascript } from '@codemirror/lang-javascript';\n// import { html, closeTags } from '@codemirror/lang-html';\nimport { html, autoCloseTags } from '@codemirror/lang-html';\nimport { css } from '@codemirror/lang-css';\nimport { oneDark } from '@codemirror/theme-one-dark';\n// Custom language/feature packages would be needed for a full IDE,\n// but we'll use a generic extension for other languages and focus on core features.\n//import { autocompletion, closeBrackets, closeTags } from '@codemirror/autocomplete';\nimport { closeBrackets } from '@codemirror/autocomplete';\nimport { defaultKeymap } from '@codemirror/commands';\nimport { keymap } from '@codemirror/view';\n// --- END CodeMirror Imports ---\n\n// --- Environment Variable Setup ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst appId = process.env.REACT_APP_APP_ID || 'default-app-id';\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID\n};\nconst initialAuthToken = process.env.REACT_APP_INITIAL_AUTH_TOKEN || null;\n\n// --- Firebase Initialization ---\nlet firebaseApp, db, auth;\n\n// Validate Firebase config\nconst isValidConfig = firebaseConfig && firebaseConfig.apiKey && firebaseConfig.authDomain && firebaseConfig.projectId;\nif (isValidConfig) {\n  try {\n    firebaseApp = initializeApp(firebaseConfig);\n    db = getFirestore(firebaseApp);\n    auth = getAuth(firebaseApp);\n    console.log(\"Firebase initialized successfully\");\n  } catch (error) {\n    console.warn(\"Firebase initialization failed, falling back to local mode:\", error);\n    // Clear Firebase instances to ensure we don't partially use them\n    firebaseApp = null;\n    db = null;\n    auth = null;\n  }\n} else {\n  console.warn(\"Invalid Firebase config, running in local-only mode\");\n}\n\n// --- Multi-Language Support Configuration ---\nconst LANGUAGE_CONFIGS = {\n  'React.js': {\n    icon: '‚öõÔ∏è',\n    label: 'React.js',\n    editable: true,\n    codemirrorLang: javascript({\n      jsx: true\n    }),\n    files: {\n      // Note: index.js imports App and handles React rendering logic\n      '/src/index.js': {\n        code: `import React from 'react';\\nimport App from './App';\\n\\n// React entry point (Simulated).`,\n        hidden: false,\n        entry: true\n      },\n      '/src/App.js': {\n        code: `import React, { useState } from 'react';\\n\\n// Main App Component\\nconst App = () => {\\n¬† const [count, setCount] = useState(0);\\n\\n¬† const increment = () => {\\n¬† ¬† setCount(c => c + 1);\\n¬† };\\n\\n¬† return (\\n¬† ¬† <div className=\"flex flex-col items-center p-4 min-h-full\">\\n¬† ¬† ¬† <h1 className=\"text-3xl font-bold mb-4 text-green-500\">CipherStudio Live React App</h1>\\n¬† ¬† ¬† <p className=\"text-xl mb-6\">Count: {count}</p>\\n¬† ¬† ¬† <button onClick={increment} className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md\">\\n¬† ¬† ¬† ¬† Increment\\n¬† ¬† ¬† </button>\\n¬† ¬† </div>\\n¬† );\\n};\\n\\nexport default App;`,\n        hidden: false\n      },\n      '/src/styles.css': {\n        code: `/* Global styles for React app */\\nbody { font-family: sans-serif; }`,\n        hidden: false\n      },\n      '/public/index.html': {\n        code: '<!DOCTYPE html>...',\n        hidden: true\n      },\n      '/package.json': {\n        code: '{\"dependencies\": {\"react\": \"18.2.0\"}}',\n        hidden: true\n      }\n    },\n    description: 'React environment. **Live rendering is now a static output simulation.**'\n  },\n  'JavaScript': {\n    icon: 'JS',\n    label: 'JavaScript',\n    editable: true,\n    codemirrorLang: javascript(),\n    files: {\n      '/index.js': {\n        code: 'function sum(a, b) {\\n¬† return a + b;\\n}\\n\\nconsole.log(sum(5, 7));',\n        hidden: false,\n        entry: true\n      }\n    },\n    description: 'Pure JS environment. **Execution is simulated by AI.**'\n  },\n  'HTML': {\n    icon: 'HTML',\n    label: 'HTML',\n    editable: true,\n    codemirrorLang: html(),\n    files: {\n      '/index.html': {\n        code: '<!DOCTYPE html>\\n<html>\\n<body>\\n¬† <h1 class=\"text-2xl text-blue-500\">Pure HTML Project</h1>\\n¬† <p>This is editable.</p>\\n</body>\\n</html>',\n        hidden: false,\n        entry: true\n      }\n    },\n    description: 'HTML environment. **Live HTML rendering enabled.**'\n  },\n  'Python': {\n    icon: 'üêç',\n    label: 'Python',\n    editable: true,\n    // Using generic extension for languages not natively imported\n    codemirrorLang: javascript(),\n    files: {\n      '/main.py': {\n        code: `def greet(name):\\n¬† ¬† print(f\"Hello, {name}!\")\\n\\n# Execution is simulated by AI.\\ngreet(\"Python Dev\")`,\n        hidden: false,\n        entry: true\n      }\n    },\n    description: '**Editable Code/Files.** Execution is simulated by AI.'\n  },\n  'Java': {\n    icon: '‚òï',\n    label: 'Java',\n    editable: true,\n    codemirrorLang: javascript(),\n    files: {\n      '/Main.java': {\n        code: `class Main {\\n¬† public static void main(String[] args) {\\n¬† ¬† System.out.println(\"Hello Java World!\");\\n¬† ¬† System.out.println(\"Line 2\");\\n¬† }\\n}`,\n        hidden: false,\n        entry: true\n      }\n    },\n    description: '**Editable Code/Files.** Execution is simulated by AI.'\n  },\n  'C++': {\n    icon: 'C++',\n    label: 'C++',\n    editable: true,\n    codemirrorLang: javascript(),\n    files: {\n      '/main.cpp': {\n        code: '#include <iostream>\\n\\nint main() {\\n¬† std::cout << \"Hello C++\\\\n\";\\n¬† std::cout << \"New line test\" << std::endl;\\n¬† return 0;\\n}',\n        hidden: false,\n        entry: true\n      }\n    },\n    description: '**Editable Code/Files.** Execution is simulated by AI.'\n  },\n  'C#': {\n    icon: 'C#',\n    label: 'C#',\n    editable: true,\n    codemirrorLang: javascript(),\n    files: {\n      '/Program.cs': {\n        code: 'using System;\\n\\nConsole.WriteLine(\"Hello C#\");',\n        hidden: false,\n        entry: true\n      }\n    },\n    description: '**Editable Code/Files.** Execution is simulated by AI.'\n  },\n  'Go': {\n    icon: 'Go',\n    label: 'Go',\n    editable: true,\n    codemirrorLang: javascript(),\n    files: {\n      '/main.go': {\n        code: 'package main\\n\\nimport \"fmt\"\\n\\nfunc main() {\\n\\tfmt.Println(\"Hello Go\")\\n}',\n        hidden: false,\n        entry: true\n      }\n    },\n    description: '**Editable Code/Files.** Execution is simulated by AI.'\n  },\n  'Rust': {\n    icon: 'Rs',\n    label: 'Rust',\n    editable: true,\n    codemirrorLang: javascript(),\n    files: {\n      '/main.rs': {\n        code: 'fn main() {\\n¬† ¬† println!(\"Hello Rust!\");\\n}',\n        hidden: false,\n        entry: true\n      }\n    },\n    description: '**Editable Code/Files.** Execution is simulated by AI.'\n  }\n};\n\n// --- Helper Functions ---\nconst getLangInitialFiles = language => {\n  var _LANGUAGE_CONFIGS$lan;\n  return ((_LANGUAGE_CONFIGS$lan = LANGUAGE_CONFIGS[language]) === null || _LANGUAGE_CONFIGS$lan === void 0 ? void 0 : _LANGUAGE_CONFIGS$lan.files) || LANGUAGE_CONFIGS['React.js'].files;\n};\nconst getLanguageKeys = () => Object.keys(LANGUAGE_CONFIGS).sort();\nconst supportedConversionLangs = getLanguageKeys().filter(lang => lang !== 'React.js');\n\n/**\r\n¬†* Hook to manage project files, persistence, and state.\r\n¬†*/\nconst useProjectManager = (dbInstance, authInstance) => {\n  _s();\n  const [selectedLanguage, setSelectedLanguage] = useState('React.js');\n  const [currentFiles, setCurrentFiles] = useState(getLangInitialFiles('React.js'));\n  const [selectedPath, setSelectedPath] = useState('/src/App.js');\n  const [currentProjectId, setCurrentProjectId] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n  const [isAutosaveEnabled, setIsAutosaveEnabled] = useState(true);\n\n  // 1. Authentication and User ID setup\n  useEffect(() => {\n    const authenticate = async () => {\n      if (!authInstance) {\n        // If no auth instance, use local-only mode with a generated ID\n        setUserId(crypto.randomUUID());\n        setIsAuthReady(true);\n        return;\n      }\n      try {\n        var _authInstance$current;\n        if (initialAuthToken) {\n          await signInWithCustomToken(authInstance, initialAuthToken);\n        } else {\n          // Try anonymous auth, fallback to local mode if it fails\n          try {\n            await signInAnonymously(authInstance);\n          } catch (anonError) {\n            console.warn(\"Anonymous auth disabled, using local mode:\", anonError);\n            setUserId(crypto.randomUUID());\n            setIsAuthReady(true);\n            return;\n          }\n        }\n        setUserId(((_authInstance$current = authInstance.currentUser) === null || _authInstance$current === void 0 ? void 0 : _authInstance$current.uid) || crypto.randomUUID());\n        setIsAuthReady(true);\n      } catch (error) {\n        console.warn(\"Authentication failed, using local mode:\", error);\n        setUserId(crypto.randomUUID());\n        setIsAuthReady(true);\n      }\n    };\n    authenticate();\n  }, [authInstance]);\n\n  // Firestore path helper\n  const getProjectPath = id => doc(dbInstance, 'artifacts', appId, 'users', userId, 'projects', id);\n\n  // 2. File content update logic\n  const updateFileContent = useCallback((path, newCode) => {\n    setCurrentFiles(prevFiles => ({\n      ...prevFiles,\n      [path]: {\n        ...prevFiles[path],\n        code: newCode\n      }\n    }));\n  }, []);\n\n  // 3. Language Switch Logic\n  const switchLanguage = useCallback(lang => {\n    setSelectedLanguage(lang);\n    setCurrentFiles(getLangInitialFiles(lang));\n    const newFiles = getLangInitialFiles(lang);\n    const newPath = Object.keys(newFiles).find(p => newFiles[p].entry) || Object.keys(newFiles).sort()[0];\n    setSelectedPath(newPath);\n    setCurrentProjectId(crypto.randomUUID());\n    setMessage(`Switched to ${lang}. Start a new project or save your work.`);\n  }, []);\n\n  // 4. Persistence Functions (Save/Load/New)\n  const saveProject = useCallback(async name => {\n    if (!dbInstance || !userId || !currentProjectId) return;\n    setLoading(true);\n    try {\n      const projectDocRef = getProjectPath(currentProjectId);\n      const projectData = {\n        name: name || `Project ${currentProjectId}`,\n        language: selectedLanguage,\n        files: currentFiles,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        userId: userId\n      };\n      await setDoc(projectDocRef, projectData, {\n        merge: true\n      });\n      setMessage(`Project '${projectData.name}' saved successfully!`);\n    } catch (error) {\n      console.error(\"Error saving project:\", error);\n      setMessage('Error saving project. Check console for details.');\n    } finally {\n      setLoading(false);\n      setTimeout(() => setMessage(''), 3000);\n    }\n  }, [dbInstance, userId, currentProjectId, currentFiles, selectedLanguage, getProjectPath]);\n  const loadProject = useCallback(async projectId => {\n    if (!dbInstance || !userId) return;\n    setLoading(true);\n    setMessage(`Loading project ${projectId}...`);\n    try {\n      const projectDocRef = getProjectPath(projectId);\n      const docSnap = await getDoc(projectDocRef);\n      if (docSnap.exists()) {\n        const data = docSnap.data();\n        const loadedLanguage = data.language || 'React.js';\n        setSelectedLanguage(loadedLanguage);\n        setCurrentFiles(data.files || getLangInitialFiles(loadedLanguage));\n        setCurrentProjectId(projectId);\n        const newPath = Object.keys(data.files).find(p => data.files[p].entry) || Object.keys(data.files).sort()[0] || '/src/App.js';\n        setSelectedPath(newPath);\n        setMessage(`Project '${data.name}' loaded. Language: ${loadedLanguage}`);\n      } else {\n        setMessage(`Project ID ${projectId} not found.`);\n      }\n    } catch (error) {\n      console.error(\"Error loading project:\", error);\n      setMessage('Error loading project. Check console for details.');\n    } finally {\n      setLoading(false);\n      setTimeout(() => setMessage(''), 3000);\n    }\n  }, [dbInstance, userId, getProjectPath]);\n  const newProject = useCallback(() => {\n    setCurrentFiles(getLangInitialFiles(selectedLanguage));\n    setSelectedPath(Object.keys(getLangInitialFiles(selectedLanguage)).find(p => getLangInitialFiles(selectedLanguage)[p].entry) || '/src/App.js');\n    setCurrentProjectId(crypto.randomUUID());\n    setMessage(`New ${selectedLanguage} project created. Use \"Save\" to persist.`);\n  }, [selectedLanguage]);\n  const deleteProject = useCallback(async projectId => {\n    if (!dbInstance || !userId) return;\n    setLoading(true);\n    try {\n      await deleteDoc(getProjectPath(projectId));\n      setMessage(`Project ${projectId} deleted.`);\n      if (currentProjectId === projectId) {\n        newProject();\n      }\n    } catch (error) {\n      console.error(\"Error deleting project:\", error);\n      setMessage('Error deleting project.');\n    } finally {\n      setLoading(false);\n      setTimeout(() => setMessage(''), 3000);\n    }\n  }, [dbInstance, userId, currentProjectId, newProject, getProjectPath]);\n\n  // Initial load/setup (auto-create a new project ID on startup)\n  useEffect(() => {\n    if (isAuthReady && !currentProjectId) {\n      newProject();\n    }\n  }, [isAuthReady, currentProjectId, newProject]);\n\n  // NEW: Autosave Implementation\n  useEffect(() => {\n    if (!isAuthReady || !currentProjectId || !isAutosaveEnabled) return;\n    const intervalId = setInterval(() => {\n      // Autosave runs silently, without setting loading or displaying messages\n      const autosave = async () => {\n        try {\n          const projectDocRef = getProjectPath(currentProjectId);\n          const projectData = {\n            language: selectedLanguage,\n            files: currentFiles,\n            updatedAt: new Date().toISOString()\n          };\n          await setDoc(projectDocRef, projectData, {\n            merge: true\n          });\n        } catch (error) {\n          console.error(\"Autosave failed:\", error);\n        }\n      };\n      autosave();\n    }, 10000); // Autosave every 10 seconds\n\n    return () => clearInterval(intervalId);\n  }, [isAutosaveEnabled, isAuthReady, currentProjectId, currentFiles, selectedLanguage, getProjectPath]);\n  return {\n    currentFiles,\n    setCurrentFiles,\n    selectedPath,\n    setSelectedPath,\n    currentProjectId,\n    userId,\n    isAuthReady,\n    loading,\n    message,\n    saveProject,\n    loadProject,\n    newProject,\n    deleteProject,\n    updateFileContent,\n    selectedLanguage,\n    switchLanguage,\n    isAutosaveEnabled,\n    setIsAutosaveEnabled\n  };\n};\n\n// --- CONVERSION MODAL COMPONENT (Unchanged) ---\n\n/**\r\n¬†* Custom Modal for Language Conversion Prompt\r\n¬†*/\n_s(useProjectManager, \"erP9EdyLQRwbfpzY+dWtc6riEnQ=\");\nconst ConvertCodeModal = ({\n  isOpen,\n  onClose,\n  onConvert,\n  currentLanguage,\n  theme\n}) => {\n  _s2();\n  const [targetLanguage, setTargetLanguage] = useState(supportedConversionLangs[0]); // Default to first available\n  const isDark = theme === 'dark';\n  const modalBg = isDark ? 'bg-gray-800' : 'bg-white';\n  const textColor = isDark ? 'text-white' : 'text-gray-900';\n  const selectBg = isDark ? 'bg-gray-700 text-white border-gray-600' : 'bg-white text-gray-900 border-gray-300';\n  const handleConvert = () => {\n    if (targetLanguage && targetLanguage !== currentLanguage) {\n      onConvert(targetLanguage);\n      onClose();\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4\",\n    children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${modalBg} rounded-xl shadow-2xl w-full max-w-sm p-6 border ${isDark ? 'border-gray-700' : 'border-gray-300'}`,\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: `text-2xl font-bold mb-4 ${textColor}`,\n        children: \"\\u2728 Convert Language\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n        className: `mb-4 ${isDark ? 'text-gray-300' : 'text-gray-700'}`,\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Convert code from **\", currentLanguage, \"** to: \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"select\", {\n        value: targetLanguage,\n        onChange: e => setTargetLanguage(e.target.value),\n        className: `w-full p-3 rounded-lg border focus:ring-2 focus:ring-purple-500 focus:outline-none ${selectBg}`,\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", supportedConversionLangs.filter(lang => lang !== currentLanguage).map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: lang,\n          children: lang\n        }, lang, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 29\n        }, this)), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 flex justify-end space-x-3\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: `py-2 px-4 rounded-lg font-semibold ${isDark ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-200 hover:bg-gray-300 text-gray-800'}`,\n          children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Cancel \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleConvert,\n          className: \"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200\",\n          disabled: !targetLanguage || targetLanguage === currentLanguage,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Convert to \", targetLanguage, \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 397,\n    columnNumber: 9\n  }, this);\n};\n\n// --- GENERATE CODE MODAL COMPONENT (Unchanged) ---\n\n/**\r\n¬†* Custom Modal for Code Generation Prompt\r\n¬†*/\n_s2(ConvertCodeModal, \"/SvdoO2qzhMDNTvHOqntx+M46lA=\");\n_c = ConvertCodeModal;\nconst GenerateCodeModal = ({\n  isOpen,\n  onClose,\n  onGenerate,\n  theme\n}) => {\n  _s3();\n  const [prompt, setPrompt] = useState('');\n  const isDark = theme === 'dark';\n  const modalBg = isDark ? 'bg-gray-800' : 'bg-white';\n  const inputBg = isDark ? 'bg-gray-700 text-white' : 'bg-gray-100 text-gray-900';\n  const textColor = isDark ? 'text-white' : 'text-gray-900';\n  const handleGenerate = () => {\n    if (prompt.trim()) {\n      onGenerate(prompt);\n      setPrompt('');\n      onClose();\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4\",\n    children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${modalBg} rounded-xl shadow-2xl w-full max-w-lg p-6 border ${isDark ? 'border-gray-700' : 'border-gray-300'}`,\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: `text-2xl font-bold mb-4 ${textColor}`,\n        children: \"\\u2728 Generate Boilerplate Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n        className: `mb-4 ${isDark ? 'text-gray-300' : 'text-gray-700'}`,\n        children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Describe the component, function, or file structure you want to generate. \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: \"4\",\n        value: prompt,\n        onChange: e => setPrompt(e.target.value),\n        placeholder: \"E.g., 'A responsive React component with Tailwind CSS that displays a user profile card and handles dark mode state.'\",\n        className: `w-full p-3 rounded-lg resize-none focus:ring-2 focus:ring-green-500 focus:outline-none ${inputBg}`,\n        autoFocus: true,\n        onKeyDown: e => {\n          if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            handleGenerate();\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 flex justify-end space-x-3\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: `py-2 px-4 rounded-lg font-semibold ${isDark ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-200 hover:bg-gray-300 text-gray-800'}`,\n          children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Cancel \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleGenerate,\n          className: \"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200\",\n          disabled: !prompt.trim(),\n          children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Generate \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 460,\n    columnNumber: 9\n  }, this);\n};\n\n// --- LANGUAGE SIDEBAR COMPONENT (Unchanged) ---\n\n/**\r\n¬†* Language Sidebar Component\r\n¬†*/\n_s3(GenerateCodeModal, \"S1lK4b8P240vr4GGWfaaSHACfl0=\");\n_c2 = GenerateCodeModal;\nconst LanguageSidebar = ({\n  selectedLanguage,\n  switchLanguage,\n  theme\n}) => {\n  const isDark = theme === 'dark';\n  const bgColor = isDark ? 'bg-gray-900' : 'bg-gray-100';\n  const borderColor = isDark ? 'border-gray-700' : 'border-gray-300';\n  const itemBg = isDark ? 'bg-gray-800' : 'bg-white';\n  const itemHover = isDark ? 'hover:bg-gray-700' : 'hover:bg-gray-200';\n  const itemText = isDark ? 'text-gray-400' : 'text-gray-600';\n  const selectedBg = isDark ? 'bg-green-700' : 'bg-green-500';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `w-20 ${bgColor} border-r ${borderColor} flex-shrink-0 overflow-y-auto p-1`,\n    children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", getLanguageKeys().map(langKey => {\n      const config = LANGUAGE_CONFIGS[langKey];\n      const isSelected = langKey === selectedLanguage;\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => switchLanguage(langKey),\n        className: `w-full p-2 my-1 rounded-lg text-xs transition-colors duration-200 block text-center ${itemText} ${itemBg} ${itemHover} ${isSelected ? `${selectedBg} !text-white shadow-lg` : ''}`,\n        title: config.label,\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xl mb-1\",\n          children: config.icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 25\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"truncate block\",\n          children: config.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 25\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, langKey, true, {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 21\n      }, this);\n    }), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 517,\n    columnNumber: 9\n  }, this);\n};\n\n// --- FILE MANAGEMENT COMPONENT (Unchanged) ---\n/**\r\n¬†* Component to handle file management actions (add, delete, rename)\r\n¬†*/\n_c3 = LanguageSidebar;\nconst FileManagement = ({\n  files,\n  selectedPath,\n  setSelectedPath,\n  updateFiles,\n  currentProjectId,\n  userId,\n  selectedLanguage,\n  theme\n}) => {\n  _s4();\n  var _LANGUAGE_CONFIGS$sel, _LANGUAGE_CONFIGS$sel2;\n  const [newFileName, setNewFileName] = useState('');\n  const [renamePath, setRenamePath] = useState(null);\n  const isDark = theme === 'dark';\n  const fileText = isDark ? 'text-gray-300' : 'text-gray-700';\n  const fileHoverBg = isDark ? 'hover:bg-gray-700' : 'hover:bg-gray-300';\n  const selectedBg = isDark ? 'bg-green-700/50' : 'bg-green-200';\n  const sidebarBg = isDark ? 'bg-gray-900' : 'bg-gray-100';\n  const fileActionsEnabled = (_LANGUAGE_CONFIGS$sel = LANGUAGE_CONFIGS[selectedLanguage]) === null || _LANGUAGE_CONFIGS$sel === void 0 ? void 0 : _LANGUAGE_CONFIGS$sel.editable;\n\n  // Filter file paths to only show non-hidden ones for the explorer\n  const visiblePaths = useMemo(() => {\n    return Object.keys(files).filter(path => !files[path].hidden).sort();\n  }, [files]);\n\n  // Use window.prompt replacement instead of alert()\n  const alert = message => {\n    console.warn('CipherStudio Alert:', message);\n  };\n  const handleCreate = () => {\n    if (!fileActionsEnabled) {\n      alert('File creation is only supported in editable environments (all languages are now editable, but an internal issue prevents file creation for this language).');\n      return;\n    }\n    if (!newFileName || files[`/${newFileName}`]) return;\n    const path = newFileName.startsWith('/') ? newFileName : `/${newFileName}`;\n    const isFolder = path.endsWith('/');\n    let defaultContent = null;\n    if (!isFolder) {\n      const ext = path.split('.').pop();\n      // Assign some basic default content based on extension\n      if (ext === 'css') {\n        defaultContent = `/* ${path} */\\n`;\n      } else if (ext === 'js' || ext === 'jsx' || ext === 'ts' || ext === 'tsx') {\n        defaultContent = `// ${path} \\n\\nexport default function Component() { return <div>Hello, ${path}</div>; }`;\n      } else if (ext === 'html') {\n        defaultContent = `\\n<!DOCTYPE html>\\n<html>\\n<body>\\n<h1>Hello HTML</h1>\\n</body>\\n</html>`;\n      } else if (ext === 'py') {\n        defaultContent = `# ${path}\\n\\nprint(\"Hello from new Python file\")\\n`;\n      } else if (ext === 'cpp') {\n        defaultContent = `// ${path}\\n#include <iostream>\\n\\nint main() {\\n¬† std::cout << \"New C++ File\" << std::endl;\\n¬† return 0;\\n}`;\n      } else {\n        defaultContent = `// ${path}\\n\\n`;\n      }\n    }\n    updateFiles(prevFiles => ({\n      ...prevFiles,\n      [path]: {\n        code: defaultContent,\n        hidden: isFolder,\n        folder: isFolder\n      }\n    }));\n    setNewFileName('');\n    if (!isFolder) setSelectedPath(path);\n  };\n  const confirmDelete = (path, callback) => {\n    // Use a standard prompt since we can't rely on a custom modal here easily\n    if (window.prompt(`Type \"DELETE\" to confirm deletion of ${path}:`) === 'DELETE') {\n      callback();\n    }\n  };\n  const handleDelete = path => {\n    if (!fileActionsEnabled) {\n      alert('File deletion is only supported in editable environments.');\n      return;\n    }\n    confirmDelete(path, () => {\n      updateFiles(prevFiles => {\n        const newFiles = {\n          ...prevFiles\n        };\n        delete newFiles[path];\n        if (files[path] && files[path].folder) {\n          Object.keys(newFiles).forEach(p => {\n            if (p.startsWith(path)) {\n              delete newFiles[p];\n            }\n          });\n        }\n        if (selectedPath === path) {\n          const remainingPaths = Object.keys(newFiles).filter(p => newFiles[p].code !== null);\n          // Fallback to a sensible default if no file is left\n          setSelectedPath(remainingPaths.length > 0 ? remainingPaths[0] : Object.keys(getLangInitialFiles(selectedLanguage))[0] || '/src/App.js');\n        }\n        return newFiles;\n      });\n    });\n  };\n  const handleRename = oldPath => {\n    if (!fileActionsEnabled) {\n      alert('File renaming is only supported in editable environments.');\n      return;\n    }\n    if (!renamePath || oldPath === renamePath) {\n      setRenamePath(null);\n      return;\n    }\n    const newPath = renamePath.startsWith('/') ? renamePath : `/${renamePath}`;\n    if (files[newPath]) {\n      alert('File or folder already exists.');\n      return;\n    }\n    if (files[oldPath].code === null && !newPath.endsWith('/')) {\n      alert('Cannot rename a folder to a file path. Please add a trailing slash for folders.');\n      return;\n    }\n    updateFiles(prevFiles => {\n      const newFiles = {};\n      Object.keys(prevFiles).forEach(path => {\n        if (path === oldPath) {\n          newFiles[newPath] = prevFiles[path];\n        } else if (path.startsWith(oldPath) && files[oldPath].folder) {\n          const relativePath = path.substring(oldPath.length);\n          newFiles[newPath + relativePath] = prevFiles[path];\n        } else {\n          newFiles[path] = prevFiles[path];\n        }\n      });\n      if (selectedPath === oldPath) setSelectedPath(newPath);\n      setRenamePath(null);\n      return newFiles;\n    });\n  };\n  const FileTree = ({\n    paths\n  }) => {\n    const tree = {};\n    paths.forEach(path => {\n      const parts = path.substring(1).split('/').filter(p => p.length > 0);\n      let current = tree;\n      const fullPathSegments = [];\n      parts.forEach((part, i) => {\n        fullPathSegments.push(part);\n        const currentPath = '/' + fullPathSegments.join('/');\n        if (!current[part]) {\n          const isFile = i === parts.length - 1 && files[path] && files[path].code !== null && !files[path].folder;\n          current[part] = {\n            children: {},\n            path: currentPath,\n            isFile: isFile\n          };\n        }\n        current = current[part].children;\n      });\n    });\n    const renderTree = node => /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"pl-4\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", Object.keys(node).sort().map(name => {\n        const item = node[name];\n        const path = item.path;\n        const isSelected = path === selectedPath;\n        const isFolder = Object.keys(item.children).length > 0 || files[path] && files[path].folder;\n\n        // Simplified icon logic for non-web languages\n        let icon = isFolder ? 'üìÅ' : 'üìÑ';\n        if (path.endsWith('.js') || path.endsWith('.jsx') || path.endsWith('.ts') || path.endsWith('.tsx')) icon = '‚öõÔ∏è';else if (path.endsWith('.css')) icon = '#';else if (path.endsWith('.py')) icon = 'üêç';else if (path.endsWith('.java')) icon = '‚òï';else if (path.endsWith('.cpp')) icon = 'C++';else if (path.endsWith('.cs')) icon = 'C#';\n        const isRenderableFile = item.isFile || files[path] && files[path].code !== null && !files[path].folder;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: `${fileText} group`,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex items-center space-x-2 p-1 rounded transition duration-150 cursor-pointer ${isSelected ? selectedBg : fileHoverBg}`,\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs mr-2\",\n              children: icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 727,\n              columnNumber: 33\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", renamePath === path ? /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: renamePath,\n              onChange: e => setRenamePath(e.target.value),\n              onBlur: () => handleRename(path),\n              onKeyDown: e => {\n                if (e.key === 'Enter') handleRename(path);\n                if (e.key === 'Escape') setRenamePath(null);\n              },\n              className: `${isDark ? 'bg-gray-800 text-white' : 'bg-white text-black'} flex-grow px-1`,\n              autoFocus: true,\n              disabled: !fileActionsEnabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"flex-grow truncate\",\n              onClick: () => isRenderableFile && setSelectedPath(path),\n              onDoubleClick: () => fileActionsEnabled && setRenamePath(path),\n              children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", name, \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 743,\n              columnNumber: 37\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `space-x-1 transition-opacity ${fileActionsEnabled ? 'opacity-0 group-hover:opacity-100' : 'opacity-20'}`,\n              children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDelete(path),\n                className: \"text-red-400 hover:text-red-500 text-xs p-1\",\n                title: \"Delete\",\n                disabled: !fileActionsEnabled,\n                children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xD7 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 37\n              }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 753,\n              columnNumber: 33\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 726,\n            columnNumber: 29\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", isFolder && Object.keys(item.children).length > 0 && renderTree(item.children), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, path, true, {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 25\n        }, this);\n      }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 703,\n      columnNumber: 13\n    }, this);\n    return renderTree(tree);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `p-3 text-sm flex flex-col h-full overflow-y-auto ${sidebarBg}`,\n    children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: `text-lg font-semibold mb-3 ${isDark ? 'text-white' : 'text-gray-900'} border-b ${isDark ? 'border-gray-700' : 'border-gray-300'} pb-2`,\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Files - (\", selectedLanguage, \") \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 778,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `text-xs mb-2 ${fileActionsEnabled ? 'text-green-400' : 'text-red-400'}`,\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", (_LANGUAGE_CONFIGS$sel2 = LANGUAGE_CONFIGS[selectedLanguage]) === null || _LANGUAGE_CONFIGS$sel2 === void 0 ? void 0 : _LANGUAGE_CONFIGS$sel2.description, \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 781,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `mb-4 flex space-x-1`,\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"new-file.js or folder/\",\n        value: newFileName,\n        onChange: e => setNewFileName(e.target.value),\n        onKeyDown: e => e.key === 'Enter' && handleCreate(),\n        className: `flex-grow p-2 rounded focus:ring-2 focus:ring-green-500 focus:outline-none ${isDark ? 'bg-gray-800 text-white placeholder-gray-500' : 'bg-white text-gray-900 placeholder-gray-400'}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 787,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCreate,\n        className: \"bg-green-600 hover:bg-green-700 text-white p-2 rounded\",\n        title: \"Create File/Folder\",\n        children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 + \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 795,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 786,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow overflow-y-auto\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(FileTree, {\n        paths: visiblePaths\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 806,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 805,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `mt-4 pt-2 border-t ${isDark ? 'border-gray-700' : 'border-gray-300'} text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'} truncate`,\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 User ID: \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-mono\",\n        children: userId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 811,\n        columnNumber: 26\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"block\",\n        children: [\"Project ID: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-mono\",\n          children: (currentProjectId === null || currentProjectId === void 0 ? void 0 : currentProjectId.substring(0, 8)) + '...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 812,\n          columnNumber: 53\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 812,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 810,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 777,\n    columnNumber: 9\n  }, this);\n};\n\n// --- TOOLBAR COMPONENT (Unchanged) ---\n/**\r\n¬†* Toolbar component for project management (New, Save, Load) and AI Tools.\r\n¬†*/\n_s4(FileManagement, \"BzvbceoCtXqGkMxdIRhe2bUDufY=\");\n_c4 = FileManagement;\nconst Toolbar = ({\n  currentProjectId,\n  saveProject,\n  newProject,\n  loadProject,\n  loading,\n  message,\n  deleteProject,\n  explainCode,\n  reviewCode,\n  showGenerateModal,\n  showConvertModal,\n  theme,\n  toggleTheme,\n  isAutosaveEnabled,\n  toggleAutosave\n}) => {\n  _s5();\n  const [loadInput, setLoadInput] = useState('');\n  const [projectName, setProjectName] = useState(`Project ${(currentProjectId === null || currentProjectId === void 0 ? void 0 : currentProjectId.substring(0, 8)) || ''}`);\n  const isDark = theme === 'dark';\n  const toolbarBg = isDark ? 'bg-gray-900' : 'bg-gray-200';\n  const toolbarBorder = isDark ? 'border-gray-700' : 'border-gray-300';\n  const textColor = isDark ? 'text-white' : 'text-gray-900';\n  const inputBg = isDark ? 'bg-gray-800 text-white' : 'bg-white text-gray-900';\n  useEffect(() => {\n    setProjectName(`Project ${(currentProjectId === null || currentProjectId === void 0 ? void 0 : currentProjectId.substring(0, 8)) || ''}`);\n  }, [currentProjectId]);\n  const handleSave = () => {\n    if (projectName) {\n      saveProject(projectName);\n    } else {\n      console.warn('CipherStudio Alert: Please enter a project name.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `p-3 ${toolbarBg} border-b ${toolbarBorder} flex items-center justify-between ${textColor} shadow-lg flex-wrap gap-2`,\n    children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-4\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-bold text-green-500\",\n        children: \"CipherStudio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 847,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: projectName,\n        onChange: e => setProjectName(e.target.value),\n        className: `${inputBg} p-1 rounded text-sm w-48 focus:ring-green-500 focus:ring-1`,\n        placeholder: \"Project Name\",\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 849,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 846,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-4 flex-grow justify-end min-w-[500px]\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-yellow-500 min-w-[150px] text-right\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", loading ? 'Processing...' : message, \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 861,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleTheme,\n        className: `p-2 rounded transition duration-200 ${isDark ? 'bg-gray-800 hover:bg-gray-700' : 'bg-white hover:bg-gray-300'} ${isDark ? 'text-yellow-400' : 'text-gray-800'}`,\n        title: isDark ? \"Switch to Light Mode\" : \"Switch to Dark Mode\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", isDark ? '‚òÄÔ∏è' : 'üåô', \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 866,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleAutosave,\n        className: `py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1 font-semibold ${isAutosaveEnabled ? 'bg-indigo-600 hover:bg-indigo-700 text-white' : 'bg-gray-500 hover:bg-gray-600 text-white'}`,\n        title: isAutosaveEnabled ? \"Autosave is ON (every 10s)\" : \"Autosave is OFF\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg\",\n          children: \"\\uD83D\\uDCBE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 880,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Autosave \", isAutosaveEnabled ? 'ON' : 'OFF']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 881,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 875,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: explainCode,\n        className: \"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\",\n        disabled: loading,\n        title: \"Get a plain-language explanation of the current file's code.\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg\",\n          children: \"\\u2728\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 891,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Explain Code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 892,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 885,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: reviewCode,\n        className: \"bg-orange-600 hover:bg-orange-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\",\n        disabled: loading,\n        title: \"Review the code and suggest refactoring or improvements.\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg\",\n          children: \"\\u2728\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 900,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Review & Refactor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 901,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 894,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: showGenerateModal,\n        className: \"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\",\n        disabled: loading,\n        title: \"Generate boilerplate code from a natural language description.\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg\",\n          children: \"\\u2728\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 909,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Generate Code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 910,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 903,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: showConvertModal,\n        className: \"bg-pink-600 hover:bg-pink-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\",\n        disabled: loading,\n        title: \"Convert code from the current language to another programming language.\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg\",\n          children: \"\\u2728\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 918,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Convert Language\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 919,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 912,\n        columnNumber: 18\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: newProject,\n        className: \"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\",\n        disabled: loading,\n        children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 New Project \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 923,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSave,\n        className: \"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\",\n        disabled: loading,\n        children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Save \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 930,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 859,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-2 mt-2 md:mt-0\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: loadInput,\n        onChange: e => setLoadInput(e.target.value),\n        className: `${inputBg} p-1 rounded text-sm w-32 focus:ring-green-500 focus:ring-1`,\n        placeholder: \"Project ID to load\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 941,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => loadProject(loadInput),\n        className: \"bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\",\n        disabled: loading || !loadInput,\n        children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Load \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 948,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => deleteProject(loadInput),\n        className: \"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\",\n        disabled: loading || !loadInput,\n        children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Delete \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 955,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 940,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 845,\n    columnNumber: 9\n  }, this);\n};\n\n// --- CIPHER EDITOR (MODIFIED TO USE CODEMIRROR) ---\n/**\r\n¬†* Code Editor wrapper using CodeMirror 6 for real IDE features.\r\n¬†*/\n\n// Compartment for dynamic language switching\n_s5(Toolbar, \"q8SUL7fj7/1DfpZbNkWuVb7VeuQ=\");\n_c5 = Toolbar;\nconst languageCompartment = new Compartment();\n// Compartment for dynamic theme switching\nconst themeCompartment = new Compartment();\nconst getLanguageExtension = selectedLanguage => {\n  var _LANGUAGE_CONFIGS$sel3;\n  return ((_LANGUAGE_CONFIGS$sel3 = LANGUAGE_CONFIGS[selectedLanguage]) === null || _LANGUAGE_CONFIGS$sel3 === void 0 ? void 0 : _LANGUAGE_CONFIGS$sel3.codemirrorLang) || javascript();\n};\nconst CipherEditor = ({\n  selectedPath,\n  fileContent,\n  updateFileContent,\n  selectedLanguage,\n  theme\n}) => {\n  _s6();\n  var _LANGUAGE_CONFIGS$sel4;\n  const editorRef = useRef(null);\n  const viewRef = useRef(null);\n  const isDark = theme === 'dark';\n\n  // Setup: Initialize CodeMirror when the component mounts\n  useEffect(() => {\n    if (editorRef.current && !viewRef.current) {\n      const startState = EditorState.create({\n        doc: fileContent,\n        extensions: [\n        // Core setup\n        basicSetup,\n        // Language and Theme Compartments\n        languageCompartment.of(getLanguageExtension(selectedLanguage)), themeCompartment.of(isDark ? oneDark : []),\n        // Auto-closing tags and braces (Key requested features)\n        closeBrackets(), closeTags(),\n        // Custom keymap for better editor experience (e.g., Tab for indentation)\n        keymap.of(defaultKeymap),\n        // Change listener for persistence\n        EditorView.updateListener.of(update => {\n          if (update.docChanged) {\n            updateFileContent(selectedPath, update.state.doc.toString());\n          }\n        })]\n      });\n      viewRef.current = new EditorView({\n        state: startState,\n        parent: editorRef.current\n      });\n    }\n    return () => {\n      if (viewRef.current) {\n        viewRef.current.destroy();\n        viewRef.current = null;\n      }\n    };\n  }, []); // Empty dependency array means this runs only on mount/unmount\n\n  // Update: Change document content when selectedPath or fileContent changes\n  useEffect(() => {\n    if (viewRef.current) {\n      const currentDoc = viewRef.current.state.doc.toString();\n      if (currentDoc !== fileContent) {\n        viewRef.current.dispatch({\n          changes: {\n            from: 0,\n            to: currentDoc.length,\n            insert: fileContent || ''\n          }\n        });\n      }\n    }\n    // Also update the language extension when the selectedLanguage changes\n    if (viewRef.current) {\n      viewRef.current.dispatch({\n        effects: languageCompartment.reconfigure(getLanguageExtension(selectedLanguage))\n      });\n    }\n  }, [fileContent, selectedPath, selectedLanguage]);\n\n  // Update: Change theme when the theme prop changes\n  useEffect(() => {\n    if (viewRef.current) {\n      viewRef.current.dispatch({\n        effects: themeCompartment.reconfigure(isDark ? oneDark : [])\n      });\n    }\n  }, [isDark]);\n  const tabBg = isDark ? 'bg-gray-900' : 'bg-gray-200';\n  const tabItemBg = isDark ? 'bg-gray-700' : 'bg-gray-300';\n  const tabBorder = isDark ? 'border-gray-700' : 'border-gray-300';\n  const editorBg = isDark ? 'bg-gray-800' : 'bg-white';\n  const icon = ((_LANGUAGE_CONFIGS$sel4 = LANGUAGE_CONFIGS[selectedLanguage]) === null || _LANGUAGE_CONFIGS$sel4 === void 0 ? void 0 : _LANGUAGE_CONFIGS$sel4.icon) || 'üìÑ';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex flex-col h-full ${editorBg} text-sm relative`,\n    children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `p-2 ${tabBg} border-b ${tabBorder} text-xs flex items-center`,\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `${tabItemBg} px-3 py-1 rounded-t border-b-2 border-green-500 flex items-center text-white`,\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm mr-2\",\n          children: icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1066,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", selectedPath, \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1065,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1064,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: editorRef,\n      className: \"flex-1 overflow-hidden h-full\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1072,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"style\", {\n      global: \"true\",\n      children: `\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† .cm-editor {\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† height: 100%;\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† font-size: 0.875rem; /* text-sm */\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† line-height: 1.5; /* leading-relaxed */\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† background-color: ${isDark ? '#1f2937' : '#ffffff'}; /* gray-800 or white */\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† .cm-scroller {\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\n¬† ¬† ¬† ¬† ¬† ¬† `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1077,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1062,\n    columnNumber: 9\n  }, this);\n};\n// --- END CIPHER EDITOR ---\n\n// --- REACT LIVE RENDERING SIMULATION (Unchanged) ---\n\n/**\r\n¬†* Renders a static version of the starter React component.¬†\r\n¬†* THIS IS THE FIX. We stop trying to compile JSX dynamically and just show the static starter app.\r\n¬†*/\n_s6(CipherEditor, \"rt7YT6YMyEVtgyf+XSRCddKYgEk=\");\n_c6 = CipherEditor;\nconst StaticReactPreview = /*#__PURE__*/_s7(/*#__PURE__*/React.memo(_c7 = _s7(({\n  theme\n}) => {\n  _s7();\n  const previewBg = theme === 'dark' ? 'bg-gray-900' : 'bg-white';\n  const previewText = theme === 'dark' ? 'text-white' : 'text-gray-900';\n\n  // Since we cannot compile the user's JSX, we render a static pre-compiled component instead.\n  // The user's code changes will NOT affect this live, but it removes the critical JSX error.\n  const [count, setCount] = useState(0);\n  const increment = () => {\n    setCount(c => c + 1);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex flex-col items-center justify-center p-4 min-h-full w-full ${previewBg} ${previewText}`,\n    children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold mb-4 text-green-500\",\n      children: \"CipherStudio Static React Preview\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1114,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xl mb-6\",\n      children: [\"Count: \", count]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1115,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: increment,\n      className: \"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md\",\n      children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Increment \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1116,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-8 text-sm text-gray-500\",\n      children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 **Note:** Live updates are disabled to prevent compilation errors. \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1119,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1113,\n    columnNumber: 9\n  }, this);\n}, \"oDgYfYHkD9Wkv4hrAPCkI/ev3YU=\")), \"oDgYfYHkD9Wkv4hrAPCkI/ev3YU=\");\n_c8 = StaticReactPreview;\nStaticReactPreview.displayName = 'StaticReactPreview';\n\n// --- PREVIEW PANEL (MODIFIED FOR BETTER AI SIMULATION AND HTML DARK MODE) ---\n\n/**\r\n¬†* Preview Panel (Handles HTML rendering and Code Dumping)\r\n¬†*/\nconst CipherPreview = ({\n  files,\n  selectedLanguage,\n  theme,\n  callGeminiApi\n}) => {\n  _s8();\n  var _files$SrcAppJs, _files$IndexHtml;\n  const isReact = selectedLanguage === 'React.js';\n  const isHTML = selectedLanguage === 'HTML';\n  const isSimulated = !isReact && !isHTML; // Non-web languages require simulation\n\n  const isDark = theme === 'dark';\n  const panelBg = isDark ? 'bg-gray-800' : 'bg-white';\n  const codeBg = isDark ? 'bg-gray-700' : 'bg-gray-100';\n  const codeText = isDark ? 'text-gray-100' : 'text-gray-800';\n\n  // 1. Get relevant file content\n  const appJsCode = ((_files$SrcAppJs = files['/src/App.js']) === null || _files$SrcAppJs === void 0 ? void 0 : _files$SrcAppJs.code) || '';\n  const mainHtmlContent = ((_files$IndexHtml = files['/index.html']) === null || _files$IndexHtml === void 0 ? void 0 : _files$IndexHtml.code) || '';\n\n  // 2. Get content for code dump (main entry point)\n  const codeDumpContent = useMemo(() => {\n    var _files$entryPath;\n    const entryPath = Object.keys(files).find(p => files[p].entry) || Object.keys(files).sort()[0];\n    return ((_files$entryPath = files[entryPath]) === null || _files$entryPath === void 0 ? void 0 : _files$entryPath.code) || '// Preview content not available.';\n  }, [files]);\n\n  // --- LLM-based Terminal Output Simulation State/Logic (Enhanced) ---\n  const [simulatedOutput, setSimulatedOutput] = useState(null);\n  const [simLoading, setSimLoading] = useState(false);\n  const [lastSimulatedCode, setLastSimulatedCode] = useState('');\n\n  // Debounced function to call the AI for execution simulation\n  const debouncedSimulate = useCallback((code, lang) => {\n    setSimLoading(true);\n    setSimulatedOutput('Thinking...');\n    const systemInstruction = `You are a professional terminal emulator for ${lang}. Given the user's code, execute it mentally and provide the console output. **Ensure newlines (\\\\n) and spaces are preserved, mimicking exact terminal output.** Respond with ONLY the expected terminal output text, with no introductory text, code blocks, explanations, or commentary. If the code is complex, multi-file, or requires user input, respond with \"Simulation too complex or interactive. Cannot determine output.\"`;\n    callGeminiApi(`Simulate the console output for the following ${lang} code:\\n\\n\\`\\`\\`${lang}\\n${code}\\n\\`\\`\\``, systemInstruction, 'Terminal Simulation').then(result => {\n      // result is the full text output from the API\n      setSimulatedOutput(result);\n      setSimLoading(false);\n      setLastSimulatedCode(code);\n    }).catch(e => {\n      setSimulatedOutput(`[Simulation Error] Failed to contact AI helper. Check console.`);\n      setSimLoading(false);\n    });\n  }, [callGeminiApi]);\n\n  // Effect to trigger simulation when code changes (using debounce)\n  useEffect(() => {\n    if (!isSimulated) return; // Skip for React/HTML\n\n    // Basic length check to avoid simulating empty code\n    if (codeDumpContent.trim().length < 5) {\n      setSimulatedOutput('');\n      setLastSimulatedCode('');\n      return;\n    }\n\n    // Reset output immediately on change for responsiveness\n    setSimulatedOutput('Typing...');\n    const handler = setTimeout(() => {\n      // Only simulate if the content has changed since the last *successful* simulation\n      if (codeDumpContent !== lastSimulatedCode) {\n        debouncedSimulate(codeDumpContent, selectedLanguage);\n      }\n    }, 1500);\n    return () => clearTimeout(handler);\n  }, [codeDumpContent, selectedLanguage, isSimulated, debouncedSimulate, lastSimulatedCode]);\n  // --- END: LLM-based Terminal Output Simulation ---\n\n  let PreviewContent;\n  let previewTitle;\n  let previewWarning;\n  if (isReact) {\n    // ** STATIC REACT PREVIEW (FIX) **\n    PreviewContent = /*#__PURE__*/_jsxDEV(StaticReactPreview, {\n      theme: theme\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1213,\n      columnNumber: 26\n    }, this);\n    previewTitle = 'Static React App Output';\n    previewWarning = 'Live updates are disabled.';\n  } else if (isHTML) {\n    // ** LIVE HTML PREVIEW (FIXED DARK MODE) **\n    const htmlWithTheme = `\n¬† ¬† ¬† ¬† ¬† ¬† <style>\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† body {\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† background-color: ${isDark ? '#1f2937' : '#ffffff'};\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† color: ${isDark ? '#e5e7eb' : '#1f2937'};\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\n¬† ¬† ¬† ¬† ¬† ¬† </style>\n¬† ¬† ¬† ¬† ¬† ¬† ${mainHtmlContent}\n¬† ¬† ¬† ¬† `;\n    PreviewContent = /*#__PURE__*/_jsxDEV(\"iframe\", {\n      className: \"w-full h-full border-0\",\n      srcDoc: htmlWithTheme,\n      title: \"HTML Live Preview\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1228,\n      columnNumber: 13\n    }, this);\n    previewTitle = 'Live HTML Output';\n    previewWarning = 'Rendering raw HTML content. (Themed)';\n  } else {\n    // ** TERMINAL OUTPUT SIMULATION (NEW) **\n    PreviewContent = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `absolute inset-0 ${codeBg} p-4 overflow-auto rounded-lg shadow-inner flex flex-col`,\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: `text-lg font-bold mb-2 ${isDark ? 'text-white' : 'text-gray-900'}`,\n        children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Terminal Output Simulation \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1240,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-yellow-500 mb-4 text-xs\",\n        children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 **NOTE:** Live execution is not available. Output is simulated by the Gemini AI helper. \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1243,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex-1 p-2 ${isDark ? 'bg-black text-green-400' : 'bg-gray-900 text-green-300'} rounded-lg font-mono text-sm overflow-auto whitespace-pre-wrap`,\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", simLoading && simulatedOutput === 'Thinking...' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center text-yellow-400\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-400 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1250,\n            columnNumber: 29\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Compiling and Running... \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1249,\n          columnNumber: 26\n        }, this) : simulatedOutput || `> Ready to simulate ${selectedLanguage} code. Start typing to see the output here.`, \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1247,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1239,\n      columnNumber: 13\n    }, this);\n    previewTitle = 'Compiler Output Simulation';\n    previewWarning = `Simulated by AI for ${selectedLanguage}`;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full\",\n    children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `p-2 ${isDark ? 'bg-gray-900 border-gray-700' : 'bg-gray-200 border-gray-300'} border-b text-gray-400 text-xs flex justify-between`,\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n        children: previewTitle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1267,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: isReact || isHTML ? 'text-green-500' : 'text-yellow-500',\n        children: previewWarning\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1268,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1266,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex-1 ${panelBg} p-0 overflow-auto text-gray-800 font-mono text-sm relative`,\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", PreviewContent, \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1271,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1265,\n    columnNumber: 9\n  }, this);\n};\n\n// --- AI OUTPUT PANEL (Unchanged) ---\n/**\r\n¬†* Dedicated panel to display Gemini LLM responses.\r\n¬†*/\n_s8(CipherPreview, \"8O8SBlJrU+vUeLRYTf2NK5hcTh0=\");\n_c9 = CipherPreview;\nconst AiOutputPanel = ({\n  aiOutput,\n  aiLoading,\n  aiToolMessage,\n  theme\n}) => {\n  const isDark = theme === 'dark';\n  const panelBg = isDark ? 'bg-gray-700' : 'bg-gray-100';\n  const text = isDark ? 'text-gray-100' : 'text-gray-900';\n  const tabBg = isDark ? 'bg-gray-900' : 'bg-gray-200';\n  const tabBorder = isDark ? 'border-gray-700' : 'border-gray-300';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full\",\n    children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `p-2 ${tabBg} border-b ${tabBorder} text-gray-400 text-xs flex justify-between`,\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u2728 AI Assistant Console\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1294,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-purple-400\",\n        children: aiToolMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1295,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1293,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex-1 ${panelBg} p-4 overflow-auto relative`,\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", aiLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-full text-purple-500\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1301,\n          columnNumber: 25\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Generating AI Response... \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1300,\n        columnNumber: 21\n      }, this) : aiOutput ? /*#__PURE__*/_jsxDEV(\"pre\", {\n        className: `whitespace-pre-wrap font-mono text-sm leading-relaxed ${text}`,\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", aiOutput, \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1305,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-500 text-center p-10\",\n        children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Use the \\u2728 buttons in the toolbar to explain or review your code. \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1309,\n        columnNumber: 21\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1298,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1292,\n    columnNumber: 9\n  }, this);\n};\n\n// --- MAIN APP COMPONENT (MODIFIED FOR CODEMIRROR IMPORT) ---\n\n/**\r\n¬†* Main application component for CipherStudio IDE.\r\n¬†*/\n_c0 = AiOutputPanel;\nconst App = () => {\n  _s9();\n  var _currentFiles$selecte;\n  // Add missing imports needed for CodeMirror\n  const {\n    useRef\n  } = React;\n  //const { EditorState } = require('@codemirror/state'); // Simulating module require for simplicity\n\n  // Theme State\n  const [theme, setTheme] = useState('dark');\n  const toggleTheme = useCallback(() => {\n    setTheme(prev => prev === 'dark' ? 'light' : 'dark');\n  }, []);\n\n  // 1. Project Management Hook\n  const {\n    currentFiles,\n    setCurrentFiles,\n    selectedPath,\n    setSelectedPath,\n    currentProjectId,\n    userId,\n    isAuthReady,\n    loading,\n    message,\n    updateFileContent,\n    saveProject,\n    loadProject,\n    newProject,\n    deleteProject,\n    selectedLanguage,\n    switchLanguage,\n    isAutosaveEnabled,\n    setIsAutosaveEnabled\n  } = useProjectManager(db, auth);\n  const toggleAutosave = useCallback(() => {\n    setIsAutosaveEnabled(prev => !prev);\n  }, [setIsAutosaveEnabled]);\n\n  // 2. AI Tool State and Logic\n  const [aiOutput, setAiOutput] = useState(null);\n  const [aiLoading, setAiLoading] = useState(false);\n  const [aiToolMessage, setAiToolMessage] = useState('');\n  const [activeRightPanel, setActiveRightPanel] = useState('preview');\n  const [isGenerateModalOpen, setIsGenerateModalOpen] = useState(false);\n  const [isConvertModalOpen, setIsConvertModalOpen] = useState(false);\n\n  // Get the content of the currently selected file for the editor\n  const activeFileContent = ((_currentFiles$selecte = currentFiles[selectedPath]) === null || _currentFiles$selecte === void 0 ? void 0 : _currentFiles$selecte.code) || '// File not found or is a folder.';\n\n  // Get the content of the \"main\" file for the simulated preview\n  const previewFiles = useMemo(() => {\n    // Pass the entire file map for React/HTML to look up necessary files\n    return currentFiles;\n  }, [currentFiles]);\n  const callGeminiApi = useCallback(async (prompt, systemInstruction, toolName) => {\n    // Only set main AI tool panel state if it's an explicit call (not terminal simulation)\n    if (toolName !== 'Terminal Simulation') {\n      setAiLoading(true);\n    }\n    const apiKey = \"AIzaSyCo6axk1QFoINp9-CyrlGDVIIKbFfjsxZk\";\n    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;\n    const payload = {\n      contents: [{\n        parts: [{\n          text: prompt\n        }]\n      }],\n      config: {\n        systemInstruction: systemInstruction\n      }\n    };\n    let attempts = 0;\n    const maxAttempts = 3;\n    let lastError = null;\n    while (attempts < maxAttempts) {\n      try {\n        var _result$candidates, _result$candidates$, _result$candidates$$c, _result$candidates$$c2, _result$candidates$$c3;\n        const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(payload)\n        });\n        if (!response.ok) {\n          throw new Error(`API returned status ${response.status}`);\n        }\n        const result = await response.json();\n        const text = ((_result$candidates = result.candidates) === null || _result$candidates === void 0 ? void 0 : (_result$candidates$ = _result$candidates[0]) === null || _result$candidates$ === void 0 ? void 0 : (_result$candidates$$c = _result$candidates$.content) === null || _result$candidates$$c === void 0 ? void 0 : (_result$candidates$$c2 = _result$candidates$$c.parts) === null || _result$candidates$$c2 === void 0 ? void 0 : (_result$candidates$$c3 = _result$candidates$$c2[0]) === null || _result$candidates$$c3 === void 0 ? void 0 : _result$candidates$$c3.text) || \"Could not generate content.\";\n\n        // Only reset the main AI tool panel state if it was an explicit tool call\n        if (toolName !== 'Terminal Simulation') {\n          setAiLoading(false);\n          setAiOutput(text);\n          setActiveRightPanel('ai_tools'); // Switch to the AI panel\n          setAiToolMessage(`Output for ${toolName} on ${selectedPath}`);\n        }\n        return text;\n      } catch (error) {\n        lastError = error;\n        attempts++;\n        const delay = Math.pow(2, attempts) * 1000;\n        console.warn(`Attempt ${attempts} failed. Retrying in ${delay / 1000}s...`, error);\n        if (attempts < maxAttempts) {\n          await new Promise(resolve => setTimeout(resolve, delay));\n        }\n      }\n    }\n    const finalError = `Failed to get a response after ${maxAttempts} attempts. Error: ${lastError.message || 'Unknown error'}`;\n    if (toolName !== 'Terminal Simulation') {\n      setAiLoading(false);\n      setAiOutput(finalError);\n      setAiToolMessage(`Failed to run ${toolName}`);\n    }\n    throw new Error(finalError);\n  }, [selectedPath]);\n  const explainCode = useCallback(async () => {\n    const systemInstruction = `You are a helpful programming tutor. Your task is to analyze the provided code snippet written in ${selectedLanguage} and explain its purpose, key components, and function flow in clear, easy-to-understand language. Focus on the context (${selectedLanguage}/${selectedPath}) and be concise.`;\n    const prompt = `Explain the following code from file ${selectedPath}:\\n\\n\\`\\`\\`${selectedLanguage}\\n${activeFileContent}\\n\\`\\`\\``;\n    await callGeminiApi(prompt, systemInstruction, 'Code Explanation');\n  }, [activeFileContent, selectedPath, selectedLanguage, callGeminiApi]);\n  const reviewCode = useCallback(async () => {\n    const systemInstruction = `You are an expert code reviewer specializing in modern ${selectedLanguage} and software best practices. Analyze the provided code for potential improvements, bugs, or refactoring suggestions. Your response should be structured with markdown bullet points and code examples where applicable. If no issues are found, state \"Code looks great! Ready for commit.\"`;\n    const prompt = `Review the following code from file ${selectedPath} in ${selectedLanguage} and suggest improvements:\\n\\n\\`\\`\\`${selectedLanguage}\\n${activeFileContent}\\n\\`\\`\\``;\n    await callGeminiApi(prompt, systemInstruction, 'Code Review');\n  }, [activeFileContent, selectedPath, selectedLanguage, callGeminiApi]);\n  const generateCode = useCallback(async description => {\n    const systemInstruction = `You are a top-tier software engineer specializing in ${selectedLanguage}. Generate a complete, self-contained code snippet based on the user's description. Enclose the code in a single markdown code block (e.g., \\`\\`\\`${selectedLanguage}...\\`\\`\\`). Do not include any text outside the markdown code block.`;\n    const prompt = `Generate code for the following in ${selectedLanguage}, suitable for file ${selectedPath}: ${description}`;\n    await callGeminiApi(prompt, systemInstruction, 'Code Generation');\n  }, [selectedPath, selectedLanguage, callGeminiApi]);\n  const convertCode = useCallback(async targetLang => {\n    const systemInstruction = `You are an expert code translator. Your task is to accurately convert the provided code from ${selectedLanguage} to ${targetLang}. The output must contain ONLY the converted code snippet, enclosed in a single markdown code block (e.g., \\`\\`\\`${targetLang}...\\`\\`\\`). Do not include any explanatory text or commentary outside the markdown block.`;\n    const prompt = `Convert the following code from ${selectedLanguage} to ${targetLang}:\\n\\n\\`\\`\\`${selectedLanguage}\\n${activeFileContent}\\n\\`\\`\\``;\n    await callGeminiApi(prompt, systemInstruction, `Code Conversion to ${targetLang}`);\n  }, [activeFileContent, selectedLanguage, callGeminiApi]);\n\n  // Effect to reset AI panel when file changes\n  useEffect(() => {\n    if (activeRightPanel === 'ai_tools' && !aiLoading) {\n      setAiOutput(null);\n      setAiToolMessage('');\n    }\n  }, [selectedPath, activeRightPanel, aiLoading]);\n\n  // Handle initial loading state\n  if (!isAuthReady) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-screen w-full bg-gray-900 text-white\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Initializing CipherStudio and connecting to Persistence...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1485,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1484,\n      columnNumber: 13\n    }, this);\n  }\n  const mainBg = theme === 'dark' ? 'bg-gray-800' : 'bg-gray-200';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex flex-col h-screen w-full font-sans ${mainBg} ${theme}`,\n    children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(GenerateCodeModal, {\n      isOpen: isGenerateModalOpen,\n      onClose: () => setIsGenerateModalOpen(false),\n      onGenerate: generateCode,\n      theme: theme\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1495,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(ConvertCodeModal, {\n      isOpen: isConvertModalOpen,\n      onClose: () => setIsConvertModalOpen(false),\n      onConvert: convertCode,\n      currentLanguage: selectedLanguage,\n      theme: theme\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1501,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(Toolbar, {\n      currentProjectId: currentProjectId,\n      saveProject: saveProject,\n      loadProject: loadProject,\n      newProject: newProject,\n      deleteProject: deleteProject,\n      loading: loading || aiLoading,\n      message: message,\n      explainCode: explainCode,\n      reviewCode: reviewCode,\n      showGenerateModal: () => setIsGenerateModalOpen(true),\n      showConvertModal: () => setIsConvertModalOpen(true),\n      theme: theme,\n      toggleTheme: toggleTheme,\n      isAutosaveEnabled: isAutosaveEnabled,\n      toggleAutosave: toggleAutosave\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1510,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-1 overflow-hidden\",\n      children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(LanguageSidebar, {\n        selectedLanguage: selectedLanguage,\n        switchLanguage: switchLanguage,\n        theme: theme\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1530,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-64 flex-shrink-0 overflow-y-auto\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(FileManagement, {\n          files: currentFiles,\n          selectedPath: selectedPath,\n          setSelectedPath: setSelectedPath,\n          updateFiles: setCurrentFiles,\n          currentProjectId: currentProjectId,\n          userId: userId,\n          selectedLanguage: selectedLanguage,\n          theme: theme\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1538,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1537,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-hidden flex\",\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 h-full border-r border-gray-700\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(CipherEditor, {\n            selectedPath: selectedPath,\n            fileContent: activeFileContent,\n            updateFileContent: updateFileContent,\n            selectedLanguage: selectedLanguage,\n            theme: theme\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1554,\n            columnNumber: 25\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1553,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 h-full flex flex-col\",\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex ${theme === 'dark' ? 'bg-gray-900 border-gray-700' : 'bg-gray-200 border-gray-300'} border-b`,\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveRightPanel('preview'),\n              className: `px-4 py-2 text-sm font-medium transition-colors duration-200 ${activeRightPanel === 'preview' ? `${theme === 'dark' ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-900'} border-b-2 border-green-500` : `${theme === 'dark' ? 'text-gray-400 hover:bg-gray-800' : 'text-gray-600 hover:bg-gray-300'}`}`,\n              children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Preview \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1567,\n              columnNumber: 29\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveRightPanel('ai_tools'),\n              className: `px-4 py-2 text-sm font-medium transition-colors duration-200 flex items-center ${activeRightPanel === 'ai_tools' ? `${theme === 'dark' ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-900'} border-b-2 border-purple-500` : `${theme === 'dark' ? 'text-gray-400 hover:bg-gray-800' : 'text-gray-600 hover:bg-gray-300'}`}`,\n              children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\u2728 AI Tools \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1577,\n              columnNumber: 29\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1566,\n            columnNumber: 25\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", activeRightPanel === 'preview' ? /*#__PURE__*/_jsxDEV(CipherPreview, {\n              files: previewFiles,\n              selectedLanguage: selectedLanguage,\n              theme: theme,\n              callGeminiApi: callGeminiApi\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1592,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(AiOutputPanel, {\n              aiOutput: aiOutput,\n              aiLoading: aiLoading,\n              aiToolMessage: aiToolMessage,\n              theme: theme\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1599,\n              columnNumber: 33\n            }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1590,\n            columnNumber: 25\n          }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1564,\n          columnNumber: 21\n        }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1551,\n        columnNumber: 17\n      }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1528,\n      columnNumber: 13\n    }, this), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1493,\n    columnNumber: 9\n  }, this);\n};\n_s9(App, \"QpHp1MXmwebyO8yL+5uA+hrbA+k=\", false, function () {\n  return [useProjectManager];\n});\n_c1 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1;\n$RefreshReg$(_c, \"ConvertCodeModal\");\n$RefreshReg$(_c2, \"GenerateCodeModal\");\n$RefreshReg$(_c3, \"LanguageSidebar\");\n$RefreshReg$(_c4, \"FileManagement\");\n$RefreshReg$(_c5, \"Toolbar\");\n$RefreshReg$(_c6, \"CipherEditor\");\n$RefreshReg$(_c7, \"StaticReactPreview$React.memo\");\n$RefreshReg$(_c8, \"StaticReactPreview\");\n$RefreshReg$(_c9, \"CipherPreview\");\n$RefreshReg$(_c0, \"AiOutputPanel\");\n$RefreshReg$(_c1, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","getAuth","signInWithCustomToken","signInAnonymously","initializeApp","getFirestore","doc","setDoc","getDoc","collection","getDocs","deleteDoc","query","where","basicSetup","EditorView","Compartment","javascript","html","autoCloseTags","css","oneDark","closeBrackets","defaultKeymap","keymap","jsxDEV","_jsxDEV","appId","process","env","REACT_APP_APP_ID","firebaseConfig","apiKey","REACT_APP_FIREBASE_API_KEY","authDomain","REACT_APP_FIREBASE_AUTH_DOMAIN","projectId","REACT_APP_FIREBASE_PROJECT_ID","storageBucket","REACT_APP_FIREBASE_STORAGE_BUCKET","messagingSenderId","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","REACT_APP_FIREBASE_APP_ID","measurementId","REACT_APP_FIREBASE_MEASUREMENT_ID","initialAuthToken","REACT_APP_INITIAL_AUTH_TOKEN","firebaseApp","db","auth","isValidConfig","console","log","error","warn","LANGUAGE_CONFIGS","icon","label","editable","codemirrorLang","jsx","files","code","hidden","entry","description","getLangInitialFiles","language","_LANGUAGE_CONFIGS$lan","getLanguageKeys","Object","keys","sort","supportedConversionLangs","filter","lang","useProjectManager","dbInstance","authInstance","_s","selectedLanguage","setSelectedLanguage","currentFiles","setCurrentFiles","selectedPath","setSelectedPath","currentProjectId","setCurrentProjectId","userId","setUserId","isAuthReady","setIsAuthReady","loading","setLoading","message","setMessage","isAutosaveEnabled","setIsAutosaveEnabled","authenticate","crypto","randomUUID","_authInstance$current","anonError","currentUser","uid","getProjectPath","id","updateFileContent","path","newCode","prevFiles","switchLanguage","newFiles","newPath","find","p","saveProject","name","projectDocRef","projectData","createdAt","Date","toISOString","updatedAt","merge","setTimeout","loadProject","docSnap","exists","data","loadedLanguage","newProject","deleteProject","intervalId","setInterval","autosave","clearInterval","ConvertCodeModal","isOpen","onClose","onConvert","currentLanguage","theme","_s2","targetLanguage","setTargetLanguage","isDark","modalBg","textColor","selectBg","handleConvert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","map","onClick","disabled","_c","GenerateCodeModal","onGenerate","_s3","prompt","setPrompt","inputBg","handleGenerate","trim","rows","placeholder","autoFocus","onKeyDown","key","shiftKey","preventDefault","_c2","LanguageSidebar","bgColor","borderColor","itemBg","itemHover","itemText","selectedBg","langKey","config","isSelected","title","_c3","FileManagement","updateFiles","_s4","_LANGUAGE_CONFIGS$sel","_LANGUAGE_CONFIGS$sel2","newFileName","setNewFileName","renamePath","setRenamePath","fileText","fileHoverBg","sidebarBg","fileActionsEnabled","visiblePaths","alert","handleCreate","startsWith","isFolder","endsWith","defaultContent","ext","split","pop","folder","confirmDelete","callback","window","handleDelete","forEach","remainingPaths","length","handleRename","oldPath","relativePath","substring","FileTree","paths","tree","parts","current","fullPathSegments","part","i","push","currentPath","join","isFile","renderTree","node","item","isRenderableFile","type","onBlur","onDoubleClick","_c4","Toolbar","explainCode","reviewCode","showGenerateModal","showConvertModal","toggleTheme","toggleAutosave","_s5","loadInput","setLoadInput","projectName","setProjectName","toolbarBg","toolbarBorder","handleSave","_c5","languageCompartment","themeCompartment","getLanguageExtension","_LANGUAGE_CONFIGS$sel3","CipherEditor","fileContent","_s6","_LANGUAGE_CONFIGS$sel4","editorRef","useRef","viewRef","startState","EditorState","create","extensions","of","closeTags","updateListener","update","docChanged","state","toString","parent","destroy","currentDoc","dispatch","changes","from","to","insert","effects","reconfigure","tabBg","tabItemBg","tabBorder","editorBg","ref","global","_c6","StaticReactPreview","_s7","memo","_c7","previewBg","previewText","count","setCount","increment","c","_c8","displayName","CipherPreview","callGeminiApi","_s8","_files$SrcAppJs","_files$IndexHtml","isReact","isHTML","isSimulated","panelBg","codeBg","codeText","appJsCode","mainHtmlContent","codeDumpContent","_files$entryPath","entryPath","simulatedOutput","setSimulatedOutput","simLoading","setSimLoading","lastSimulatedCode","setLastSimulatedCode","debouncedSimulate","systemInstruction","then","result","catch","handler","clearTimeout","PreviewContent","previewTitle","previewWarning","htmlWithTheme","srcDoc","_c9","AiOutputPanel","aiOutput","aiLoading","aiToolMessage","text","_c0","App","_s9","_currentFiles$selecte","setTheme","prev","setAiOutput","setAiLoading","setAiToolMessage","activeRightPanel","setActiveRightPanel","isGenerateModalOpen","setIsGenerateModalOpen","isConvertModalOpen","setIsConvertModalOpen","activeFileContent","previewFiles","toolName","apiUrl","payload","contents","attempts","maxAttempts","lastError","_result$candidates","_result$candidates$","_result$candidates$$c","_result$candidates$$c2","_result$candidates$$c3","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","json","candidates","content","delay","Math","pow","Promise","resolve","finalError","generateCode","convertCode","targetLang","mainBg","_c1","$RefreshReg$"],"sources":["D:/All Downloaded files/CypherschoolAssignment/CypherStudio/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { getAuth, signInWithCustomToken, signInAnonymously } from 'firebase/auth';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getFirestore, doc, setDoc, getDoc, collection, getDocs, deleteDoc, query, where } from 'firebase/firestore';\r\n\r\n// --- CodeMirror 6 Imports for IDE Features (New/Replacement) ---\r\nimport { basicSetup, EditorView } from 'codemirror';\r\nimport { Compartment } from '@codemirror/state';\r\nimport { javascript } from '@codemirror/lang-javascript';\r\n// import { html, closeTags } from '@codemirror/lang-html';\r\nimport { html, autoCloseTags } from '@codemirror/lang-html';\r\nimport { css } from '@codemirror/lang-css';\r\nimport { oneDark } from '@codemirror/theme-one-dark';\r\n// Custom language/feature packages would be needed for a full IDE,\r\n// but we'll use a generic extension for other languages and focus on core features.\r\n//import { autocompletion, closeBrackets, closeTags } from '@codemirror/autocomplete';\r\nimport { closeBrackets } from '@codemirror/autocomplete';\r\nimport { defaultKeymap } from '@codemirror/commands';\r\nimport { keymap } from '@codemirror/view';\r\n// --- END CodeMirror Imports ---\r\n\r\n\r\n// --- Environment Variable Setup ---\r\nconst appId = process.env.REACT_APP_APP_ID || 'default-app-id';\r\nconst firebaseConfig = {\r\n¬† apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n¬† authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n¬† projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n¬† storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n¬† messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n¬† appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n¬† measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID\r\n};\r\nconst initialAuthToken = process.env.REACT_APP_INITIAL_AUTH_TOKEN || null;\r\n\r\n// --- Firebase Initialization ---\r\nlet firebaseApp, db, auth;\r\n\r\n// Validate Firebase config\r\nconst isValidConfig = firebaseConfig &&¬†\r\n¬† firebaseConfig.apiKey &&¬†\r\n¬† firebaseConfig.authDomain &&¬†\r\n¬† firebaseConfig.projectId;\r\n\r\nif (isValidConfig) {\r\n¬† try {\r\n¬† ¬† firebaseApp = initializeApp(firebaseConfig);\r\n¬† ¬† db = getFirestore(firebaseApp);\r\n¬† ¬† auth = getAuth(firebaseApp);\r\n¬† ¬† console.log(\"Firebase initialized successfully\");\r\n¬† } catch (error) {\r\n¬† ¬† console.warn(\"Firebase initialization failed, falling back to local mode:\", error);\r\n¬† ¬† // Clear Firebase instances to ensure we don't partially use them\r\n¬† ¬† firebaseApp = null;\r\n¬† ¬† db = null;\r\n¬† ¬† auth = null;\r\n¬† }\r\n} else {\r\n¬† console.warn(\"Invalid Firebase config, running in local-only mode\");\r\n}\r\n\r\n// --- Multi-Language Support Configuration ---\r\nconst LANGUAGE_CONFIGS = {\r\n¬† ¬† 'React.js': {\r\n¬† ¬† ¬† ¬† icon: '‚öõÔ∏è',\r\n¬† ¬† ¬† ¬† label: 'React.js',\r\n¬† ¬† ¬† ¬† editable: true,\r\n¬† ¬† ¬† ¬† codemirrorLang: javascript({ jsx: true }),\r\n¬† ¬† ¬† ¬† files: {\r\n¬† ¬† ¬† ¬† ¬† ¬† // Note: index.js imports App and handles React rendering logic\r\n¬† ¬† ¬† ¬† ¬† ¬† '/src/index.js': { code: `import React from 'react';\\nimport App from './App';\\n\\n// React entry point (Simulated).`, hidden: false, entry: true },\r\n¬† ¬† ¬† ¬† ¬† ¬† '/src/App.js': {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† code: `import React, { useState } from 'react';\\n\\n// Main App Component\\nconst App = () => {\\n¬† const [count, setCount] = useState(0);\\n\\n¬† const increment = () => {\\n¬† ¬† setCount(c => c + 1);\\n¬† };\\n\\n¬† return (\\n¬† ¬† <div className=\"flex flex-col items-center p-4 min-h-full\">\\n¬† ¬† ¬† <h1 className=\"text-3xl font-bold mb-4 text-green-500\">CipherStudio Live React App</h1>\\n¬† ¬† ¬† <p className=\"text-xl mb-6\">Count: {count}</p>\\n¬† ¬† ¬† <button onClick={increment} className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md\">\\n¬† ¬† ¬† ¬† Increment\\n¬† ¬† ¬† </button>\\n¬† ¬† </div>\\n¬† );\\n};\\n\\nexport default App;`,\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† hidden: false,\r\n¬† ¬† ¬† ¬† ¬† ¬† },\r\n¬† ¬† ¬† ¬† ¬† ¬† '/src/styles.css': { code: `/* Global styles for React app */\\nbody { font-family: sans-serif; }`, hidden: false },\r\n¬† ¬† ¬† ¬† ¬† ¬† '/public/index.html': { code: '<!DOCTYPE html>...', hidden: true },\r\n¬† ¬† ¬† ¬† ¬† ¬† '/package.json': { code: '{\"dependencies\": {\"react\": \"18.2.0\"}}', hidden: true }\r\n¬† ¬† ¬† ¬† },\r\n¬† ¬† ¬† ¬† description: 'React environment. **Live rendering is now a static output simulation.**',\r\n¬† ¬† },\r\n¬† ¬† 'JavaScript': {¬†\r\n¬† ¬† ¬† ¬† icon: 'JS',¬†\r\n¬† ¬† ¬† ¬† label: 'JavaScript',¬†\r\n¬† ¬† ¬† ¬† editable: true,\r\n¬† ¬† ¬† ¬† codemirrorLang: javascript(),\r\n¬† ¬† ¬† ¬† files: { '/index.js': { code: 'function sum(a, b) {\\n¬† return a + b;\\n}\\n\\nconsole.log(sum(5, 7));', hidden: false, entry: true } },¬†\r\n¬† ¬† ¬† ¬† description: 'Pure JS environment. **Execution is simulated by AI.**'¬†\r\n¬† ¬† },\r\n¬† ¬† 'HTML': {¬†\r\n¬† ¬† ¬† ¬† icon: 'HTML',¬†\r\n¬† ¬† ¬† ¬† label: 'HTML',¬†\r\n¬† ¬† ¬† ¬† editable: true,\r\n¬† ¬† ¬† ¬† codemirrorLang: html(),\r\n¬† ¬† ¬† ¬† files: { '/index.html': { code: '<!DOCTYPE html>\\n<html>\\n<body>\\n¬† <h1 class=\"text-2xl text-blue-500\">Pure HTML Project</h1>\\n¬† <p>This is editable.</p>\\n</body>\\n</html>', hidden: false, entry: true } },¬†\r\n¬† ¬† ¬† ¬† description: 'HTML environment. **Live HTML rendering enabled.**'¬†\r\n¬† ¬† },\r\n¬† ¬† 'Python': {\r\n¬† ¬† ¬† ¬† icon: 'üêç',\r\n¬† ¬† ¬† ¬† label: 'Python',\r\n¬† ¬† ¬† ¬† editable: true,\r\n¬† ¬† ¬† ¬† // Using generic extension for languages not natively imported\r\n¬† ¬† ¬† ¬† codemirrorLang: javascript(), \r\n¬† ¬† ¬† ¬† files: {\r\n¬† ¬† ¬† ¬† ¬† ¬† '/main.py': { code: `def greet(name):\\n¬† ¬† print(f\"Hello, {name}!\")\\n\\n# Execution is simulated by AI.\\ngreet(\"Python Dev\")`, hidden: false, entry: true },\r\n¬† ¬† ¬† ¬† },\r\n¬† ¬† ¬† ¬† description: '**Editable Code/Files.** Execution is simulated by AI.',\r\n¬† ¬† },\r\n¬† ¬† 'Java': {\r\n¬† ¬† ¬† ¬† icon: '‚òï',\r\n¬† ¬† ¬† ¬† label: 'Java',\r\n¬† ¬† ¬† ¬† editable: true,\r\n¬† ¬† ¬† ¬† codemirrorLang: javascript(), \r\n¬† ¬† ¬† ¬† files: {\r\n¬† ¬† ¬† ¬† ¬† ¬† '/Main.java': { code: `class Main {\\n¬† public static void main(String[] args) {\\n¬† ¬† System.out.println(\"Hello Java World!\");\\n¬† ¬† System.out.println(\"Line 2\");\\n¬† }\\n}`, hidden: false, entry: true },\r\n¬† ¬† ¬† ¬† },\r\n¬† ¬† ¬† ¬† description: '**Editable Code/Files.** Execution is simulated by AI.',\r\n¬† ¬† },\r\n¬† ¬† 'C++': {¬†\r\n¬† ¬† ¬† ¬† icon: 'C++',¬†\r\n¬† ¬† ¬† ¬† label: 'C++',¬†\r\n¬† ¬† ¬† ¬† editable: true,\r\n¬† ¬† ¬† ¬† codemirrorLang: javascript(), \r\n¬† ¬† ¬† ¬† files: { '/main.cpp': { code: '#include <iostream>\\n\\nint main() {\\n¬† std::cout << \"Hello C++\\\\n\";\\n¬† std::cout << \"New line test\" << std::endl;\\n¬† return 0;\\n}', hidden: false, entry: true } },¬†\r\n¬† ¬† ¬† ¬† description: '**Editable Code/Files.** Execution is simulated by AI.',\r\n¬† ¬† },\r\n¬† ¬† 'C#': {¬†\r\n¬† ¬† ¬† ¬† icon: 'C#',¬†\r\n¬† ¬† ¬† ¬† label: 'C#',¬†\r\n¬† ¬† ¬† ¬† editable: true,\r\n¬† ¬† ¬† ¬† codemirrorLang: javascript(), \r\n¬† ¬† ¬† ¬† files: { '/Program.cs': { code: 'using System;\\n\\nConsole.WriteLine(\"Hello C#\");', hidden: false, entry: true } },¬†\r\n¬† ¬† ¬† ¬† description: '**Editable Code/Files.** Execution is simulated by AI.'¬†\r\n¬† ¬† },\r\n¬† ¬† 'Go': {¬†\r\n¬† ¬† ¬† ¬† icon: 'Go',¬†\r\n¬† ¬† ¬† ¬† label: 'Go',¬†\r\n¬† ¬† ¬† ¬† editable: true,\r\n¬† ¬† ¬† ¬† codemirrorLang: javascript(), \r\n¬† ¬† ¬† ¬† files: { '/main.go': { code: 'package main\\n\\nimport \"fmt\"\\n\\nfunc main() {\\n\\tfmt.Println(\"Hello Go\")\\n}', hidden: false, entry: true } },¬†\r\n¬† ¬† ¬† ¬† description: '**Editable Code/Files.** Execution is simulated by AI.'¬†\r\n¬† ¬† },\r\n¬† ¬† 'Rust': {¬†\r\n¬† ¬† ¬† ¬† icon: 'Rs',¬†\r\n¬† ¬† ¬† ¬† label: 'Rust',¬†\r\n¬† ¬† ¬† ¬† editable: true,\r\n¬† ¬† ¬† ¬† codemirrorLang: javascript(), \r\n¬† ¬† ¬† ¬† files: { '/main.rs': { code: 'fn main() {\\n¬† ¬† println!(\"Hello Rust!\");\\n}', hidden: false, entry: true } },¬†\r\n¬† ¬† ¬† ¬† description: '**Editable Code/Files.** Execution is simulated by AI.'¬†\r\n¬† ¬† },\r\n};\r\n\r\n// --- Helper Functions ---\r\nconst getLangInitialFiles = (language) => LANGUAGE_CONFIGS[language]?.files || LANGUAGE_CONFIGS['React.js'].files;\r\nconst getLanguageKeys = () => Object.keys(LANGUAGE_CONFIGS).sort();\r\nconst supportedConversionLangs = getLanguageKeys().filter(lang => lang !== 'React.js');\r\n\r\n\r\n/**\r\n¬†* Hook to manage project files, persistence, and state.\r\n¬†*/\r\nconst useProjectManager = (dbInstance, authInstance) => {¬†\r\n¬† const [selectedLanguage, setSelectedLanguage] = useState('React.js');\r\n¬† const [currentFiles, setCurrentFiles] = useState(getLangInitialFiles('React.js'));\r\n¬† const [selectedPath, setSelectedPath] = useState('/src/App.js');\r\n¬† const [currentProjectId, setCurrentProjectId] = useState(null);\r\n¬† const [userId, setUserId] = useState(null);\r\n¬† const [isAuthReady, setIsAuthReady] = useState(false);\r\n¬† const [loading, setLoading] = useState(false);\r\n¬† const [message, setMessage] = useState('');\r\n¬† const [isAutosaveEnabled, setIsAutosaveEnabled] = useState(true);\r\n\r\n¬† // 1. Authentication and User ID setup\r\n¬† useEffect(() => {\r\n¬† ¬† const authenticate = async () => {\r\n¬† ¬† ¬† if (!authInstance) {\r\n¬† ¬† ¬† ¬† // If no auth instance, use local-only mode with a generated ID\r\n¬† ¬† ¬† ¬† setUserId(crypto.randomUUID());\r\n¬† ¬† ¬† ¬† setIsAuthReady(true);\r\n¬† ¬† ¬† ¬† return;\r\n¬† ¬† ¬† }\r\n\r\n¬† ¬† ¬† try {\r\n¬† ¬† ¬† ¬† if (initialAuthToken) {\r\n¬† ¬† ¬† ¬† ¬† await signInWithCustomToken(authInstance, initialAuthToken);\r\n¬† ¬† ¬† ¬† } else {\r\n¬† ¬† ¬† ¬† ¬† // Try anonymous auth, fallback to local mode if it fails\r\n¬† ¬† ¬† ¬† ¬† try {\r\n¬† ¬† ¬† ¬† ¬† ¬† await signInAnonymously(authInstance);\r\n¬† ¬† ¬† ¬† ¬† } catch (anonError) {\r\n¬† ¬† ¬† ¬† ¬† ¬† console.warn(\"Anonymous auth disabled, using local mode:\", anonError);\r\n¬† ¬† ¬† ¬† ¬† ¬† setUserId(crypto.randomUUID());\r\n¬† ¬† ¬† ¬† ¬† ¬† setIsAuthReady(true);\r\n¬† ¬† ¬† ¬† ¬† ¬† return;\r\n¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† setUserId(authInstance.currentUser?.uid || crypto.randomUUID());\r\n¬† ¬† ¬† ¬† setIsAuthReady(true);\r\n¬† ¬† ¬† } catch (error) {\r\n¬† ¬† ¬† ¬† console.warn(\"Authentication failed, using local mode:\", error);\r\n¬† ¬† ¬† ¬† setUserId(crypto.randomUUID());\r\n¬† ¬† ¬† ¬† setIsAuthReady(true);\r\n¬† ¬† ¬† }\r\n¬† ¬† };\r\n¬† ¬† authenticate();\r\n¬† }, [authInstance]);\r\n\r\n¬† // Firestore path helper\r\n¬† const getProjectPath = (id) => doc(dbInstance, 'artifacts', appId, 'users', userId, 'projects', id);\r\n\r\n¬† // 2. File content update logic\r\n¬† const updateFileContent = useCallback((path, newCode) => {\r\n¬† ¬† setCurrentFiles(prevFiles => ({\r\n¬† ¬† ¬† ...prevFiles,\r\n¬† ¬† ¬† [path]: { ...prevFiles[path], code: newCode },\r\n¬† ¬† }));\r\n¬† }, []);\r\n\r\n¬† // 3. Language Switch Logic\r\n¬† const switchLanguage = useCallback((lang) => {\r\n¬† ¬† setSelectedLanguage(lang);\r\n¬† ¬† setCurrentFiles(getLangInitialFiles(lang));\r\n¬† ¬† const newFiles = getLangInitialFiles(lang);\r\n¬† ¬† const newPath = Object.keys(newFiles).find(p => newFiles[p].entry) || Object.keys(newFiles).sort()[0];\r\n¬† ¬† setSelectedPath(newPath);\r\n¬† ¬† setCurrentProjectId(crypto.randomUUID());\r\n¬† ¬† setMessage(`Switched to ${lang}. Start a new project or save your work.`);\r\n¬† }, []);\r\n\r\n\r\n¬† // 4. Persistence Functions (Save/Load/New)\r\n¬† const saveProject = useCallback(async (name) => {\r\n¬† ¬† if (!dbInstance || !userId || !currentProjectId) return;\r\n¬† ¬† setLoading(true);\r\n\r\n¬† ¬† try {\r\n¬† ¬† ¬† const projectDocRef = getProjectPath(currentProjectId);\r\n¬† ¬† ¬† const projectData = {\r\n¬† ¬† ¬† ¬† name: name || `Project ${currentProjectId}`,\r\n¬† ¬† ¬† ¬† language: selectedLanguage,\r\n¬† ¬† ¬† ¬† files: currentFiles,\r\n¬† ¬† ¬† ¬† createdAt: new Date().toISOString(),\r\n¬† ¬† ¬† ¬† updatedAt: new Date().toISOString(),\r\n¬† ¬† ¬† ¬† userId: userId,\r\n¬† ¬† ¬† };\r\n\r\n¬† ¬† ¬† await setDoc(projectDocRef, projectData, { merge: true });\r\n¬† ¬† ¬† setMessage(`Project '${projectData.name}' saved successfully!`);\r\n¬† ¬† } catch (error) {\r\n¬† ¬† ¬† console.error(\"Error saving project:\", error);\r\n¬† ¬† ¬† setMessage('Error saving project. Check console for details.');\r\n¬† ¬† } finally {\r\n¬† ¬† ¬† setLoading(false);\r\n¬† ¬† ¬† setTimeout(() => setMessage(''), 3000);\r\n¬† ¬† }\r\n¬† }, [dbInstance, userId, currentProjectId, currentFiles, selectedLanguage, getProjectPath]);\r\n\r\n¬† const loadProject = useCallback(async (projectId) => {\r\n¬† ¬† if (!dbInstance || !userId) return;\r\n¬† ¬† setLoading(true);\r\n¬† ¬† setMessage(`Loading project ${projectId}...`);\r\n\r\n¬† ¬† try {\r\n¬† ¬† ¬† const projectDocRef = getProjectPath(projectId);\r\n¬† ¬† ¬† const docSnap = await getDoc(projectDocRef);\r\n\r\n¬† ¬† ¬† if (docSnap.exists()) {\r\n¬† ¬† ¬† ¬† const data = docSnap.data();\r\n¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† const loadedLanguage = data.language || 'React.js';\r\n¬† ¬† ¬† ¬† setSelectedLanguage(loadedLanguage);\r\n\r\n¬† ¬† ¬† ¬† setCurrentFiles(data.files || getLangInitialFiles(loadedLanguage));¬†\r\n¬† ¬† ¬† ¬† setCurrentProjectId(projectId);\r\n¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† const newPath = Object.keys(data.files).find(p => data.files[p].entry) || Object.keys(data.files).sort()[0] || '/src/App.js';\r\n¬† ¬† ¬† ¬† setSelectedPath(newPath);\r\n¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† setMessage(`Project '${data.name}' loaded. Language: ${loadedLanguage}`);\r\n¬† ¬† ¬† } else {\r\n¬† ¬† ¬† ¬† setMessage(`Project ID ${projectId} not found.`);\r\n¬† ¬† ¬† }\r\n¬† ¬† } catch (error) {\r\n¬† ¬† ¬† console.error(\"Error loading project:\", error);\r\n¬† ¬† ¬† setMessage('Error loading project. Check console for details.');\r\n¬† ¬† } finally {\r\n¬† ¬† ¬† setLoading(false);\r\n¬† ¬† ¬† setTimeout(() => setMessage(''), 3000);\r\n¬† ¬† }\r\n¬† }, [dbInstance, userId, getProjectPath]);\r\n\r\n¬† const newProject = useCallback(() => {\r\n¬† ¬† setCurrentFiles(getLangInitialFiles(selectedLanguage));\r\n¬† ¬† setSelectedPath(Object.keys(getLangInitialFiles(selectedLanguage)).find(p => getLangInitialFiles(selectedLanguage)[p].entry) || '/src/App.js');\r\n¬† ¬† setCurrentProjectId(crypto.randomUUID());\r\n¬† ¬† setMessage(`New ${selectedLanguage} project created. Use \"Save\" to persist.`);\r\n¬† }, [selectedLanguage]);\r\n\r\n¬† const deleteProject = useCallback(async (projectId) => {\r\n¬† ¬† if (!dbInstance || !userId) return;\r\n¬† ¬† setLoading(true);\r\n\r\n¬† ¬† try {\r\n¬† ¬† ¬† ¬† await deleteDoc(getProjectPath(projectId));\r\n¬† ¬† ¬† ¬† setMessage(`Project ${projectId} deleted.`);\r\n¬† ¬† ¬† ¬† if (currentProjectId === projectId) {\r\n¬† ¬† ¬† ¬† ¬† ¬† newProject();\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† } catch (error) {\r\n¬† ¬† ¬† ¬† console.error(\"Error deleting project:\", error);\r\n¬† ¬† ¬† ¬† setMessage('Error deleting project.');\r\n¬† ¬† } finally {\r\n¬† ¬† ¬† ¬† setLoading(false);\r\n¬† ¬† ¬† ¬† setTimeout(() => setMessage(''), 3000);\r\n¬† ¬† }\r\n¬† }, [dbInstance, userId, currentProjectId, newProject, getProjectPath]);\r\n\r\n¬† // Initial load/setup (auto-create a new project ID on startup)\r\n¬† useEffect(() => {\r\n¬† ¬† if (isAuthReady && !currentProjectId) {\r\n¬† ¬† ¬† ¬† newProject();\r\n¬† ¬† }\r\n¬† }, [isAuthReady, currentProjectId, newProject]);\r\n\r\n¬† // NEW: Autosave Implementation\r\n¬† useEffect(() => {\r\n¬† ¬† if (!isAuthReady || !currentProjectId || !isAutosaveEnabled) return;\r\n\r\n¬† ¬† const intervalId = setInterval(() => {\r\n¬† ¬† ¬† // Autosave runs silently, without setting loading or displaying messages\r\n¬† ¬† ¬† const autosave = async () => {\r\n¬† ¬† ¬† ¬† try {\r\n¬† ¬† ¬† ¬† ¬† const projectDocRef = getProjectPath(currentProjectId);\r\n¬† ¬† ¬† ¬† ¬† const projectData = {\r\n¬† ¬† ¬† ¬† ¬† ¬† language: selectedLanguage,\r\n¬† ¬† ¬† ¬† ¬† ¬† files: currentFiles,\r\n¬† ¬† ¬† ¬† ¬† ¬† updatedAt: new Date().toISOString(),\r\n¬† ¬† ¬† ¬† ¬† };\r\n¬† ¬† ¬† ¬† ¬† await setDoc(projectDocRef, projectData, { merge: true });\r\n¬† ¬† ¬† ¬† } catch (error) {\r\n¬† ¬† ¬† ¬† ¬† console.error(\"Autosave failed:\", error);\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† };\r\n¬† ¬† ¬† autosave();\r\n¬† ¬† }, 10000); // Autosave every 10 seconds\r\n\r\n¬† ¬† return () => clearInterval(intervalId);\r\n¬† }, [isAutosaveEnabled, isAuthReady, currentProjectId, currentFiles, selectedLanguage, getProjectPath]);\r\n\r\n\r\n¬† return {\r\n¬† ¬† currentFiles,\r\n¬† ¬† setCurrentFiles,¬†\r\n¬† ¬† selectedPath,\r\n¬† ¬† setSelectedPath,\r\n¬† ¬† currentProjectId,\r\n¬† ¬† userId,\r\n¬† ¬† isAuthReady,\r\n¬† ¬† loading,\r\n¬† ¬† message,\r\n¬† ¬† saveProject,\r\n¬† ¬† loadProject,\r\n¬† ¬† newProject,\r\n¬† ¬† deleteProject,\r\n¬† ¬† updateFileContent,\r\n¬† ¬† selectedLanguage,\r\n¬† ¬† switchLanguage,\r\n¬† ¬† isAutosaveEnabled,\r\n¬† ¬† setIsAutosaveEnabled,\r\n¬† };\r\n};\r\n\r\n\r\n// --- CONVERSION MODAL COMPONENT (Unchanged) ---\r\n\r\n/**\r\n¬†* Custom Modal for Language Conversion Prompt\r\n¬†*/\r\nconst ConvertCodeModal = ({ isOpen, onClose, onConvert, currentLanguage, theme }) => {\r\n¬† ¬† const [targetLanguage, setTargetLanguage] = useState(supportedConversionLangs[0]); // Default to first available\r\n¬† ¬† const isDark = theme === 'dark';\r\n¬† ¬† const modalBg = isDark ? 'bg-gray-800' : 'bg-white';\r\n¬† ¬† const textColor = isDark ? 'text-white' : 'text-gray-900';\r\n¬† ¬† const selectBg = isDark ? 'bg-gray-700 text-white border-gray-600' : 'bg-white text-gray-900 border-gray-300';\r\n\r\n\r\n¬† ¬† const handleConvert = () => {\r\n¬† ¬† ¬† ¬† if (targetLanguage && targetLanguage !== currentLanguage) {\r\n¬† ¬† ¬† ¬† ¬† ¬† onConvert(targetLanguage);\r\n¬† ¬† ¬† ¬† ¬† ¬† onClose();\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† };\r\n\r\n¬† ¬† if (!isOpen) return null;\r\n\r\n¬† ¬† return (\r\n¬† ¬† ¬† ¬† <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4\">\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className={`${modalBg} rounded-xl shadow-2xl w-full max-w-sm p-6 border ${isDark ? 'border-gray-700' : 'border-gray-300'}`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <h3 className={`text-2xl font-bold mb-4 ${textColor}`}>‚ú® Convert Language</h3>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <p className={`mb-4 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Convert code from **{currentLanguage}** to:\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </p>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <select\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† value={targetLanguage}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onChange={(e) => setTargetLanguage(e.target.value)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`w-full p-3 rounded-lg border focus:ring-2 focus:ring-purple-500 focus:outline-none ${selectBg}`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {supportedConversionLangs\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† .filter(lang => lang !== currentLanguage)\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† .map(lang => (\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <option key={lang} value={lang}>{lang}</option>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ))}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </select>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"mt-6 flex justify-end space-x-3\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={onClose}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`py-2 px-4 rounded-lg font-semibold ${isDark ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-200 hover:bg-gray-300 text-gray-800'}`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Cancel\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={handleConvert}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={!targetLanguage || targetLanguage === currentLanguage}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Convert to {targetLanguage}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† </div>\r\n¬† ¬† );\r\n};\r\n\r\n\r\n// --- GENERATE CODE MODAL COMPONENT (Unchanged) ---\r\n\r\n/**\r\n¬†* Custom Modal for Code Generation Prompt\r\n¬†*/\r\nconst GenerateCodeModal = ({ isOpen, onClose, onGenerate, theme }) => {\r\n¬† ¬† const [prompt, setPrompt] = useState('');\r\n¬† ¬† const isDark = theme === 'dark';\r\n¬† ¬† const modalBg = isDark ? 'bg-gray-800' : 'bg-white';\r\n¬† ¬† const inputBg = isDark ? 'bg-gray-700 text-white' : 'bg-gray-100 text-gray-900';\r\n¬† ¬† const textColor = isDark ? 'text-white' : 'text-gray-900';\r\n\r\n¬† ¬† const handleGenerate = () => {\r\n¬† ¬† ¬† ¬† if (prompt.trim()) {\r\n¬† ¬† ¬† ¬† ¬† ¬† onGenerate(prompt);\r\n¬† ¬† ¬† ¬† ¬† ¬† setPrompt('');\r\n¬† ¬† ¬† ¬† ¬† ¬† onClose();\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† };\r\n\r\n¬† ¬† if (!isOpen) return null;\r\n\r\n¬† ¬† return (\r\n¬† ¬† ¬† ¬† <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4\">\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className={`${modalBg} rounded-xl shadow-2xl w-full max-w-lg p-6 border ${isDark ? 'border-gray-700' : 'border-gray-300'}`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <h3 className={`text-2xl font-bold mb-4 ${textColor}`}>‚ú® Generate Boilerplate Code</h3>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <p className={`mb-4 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Describe the component, function, or file structure you want to generate.\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </p>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <textarea\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† rows=\"4\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† value={prompt}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onChange={(e) => setPrompt(e.target.value)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† placeholder=\"E.g., 'A responsive React component with Tailwind CSS that displays a user profile card and handles dark mode state.'\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`w-full p-3 rounded-lg resize-none focus:ring-2 focus:ring-green-500 focus:outline-none ${inputBg}`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† autoFocus\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onKeyDown={(e) => {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (e.key === 'Enter' && !e.shiftKey) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† e.preventDefault();\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† handleGenerate();\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† />\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"mt-6 flex justify-end space-x-3\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={onClose}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`py-2 px-4 rounded-lg font-semibold ${isDark ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-200 hover:bg-gray-300 text-gray-800'}`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Cancel\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={handleGenerate}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={!prompt.trim()}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Generate\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† </div>\r\n¬† ¬† );\r\n};\r\n\r\n// --- LANGUAGE SIDEBAR COMPONENT (Unchanged) ---\r\n\r\n/**\r\n¬†* Language Sidebar Component\r\n¬†*/\r\nconst LanguageSidebar = ({ selectedLanguage, switchLanguage, theme }) => {\r\n¬† ¬† const isDark = theme === 'dark';\r\n¬† ¬† const bgColor = isDark ? 'bg-gray-900' : 'bg-gray-100';\r\n¬† ¬† const borderColor = isDark ? 'border-gray-700' : 'border-gray-300';\r\n¬† ¬† const itemBg = isDark ? 'bg-gray-800' : 'bg-white';\r\n¬† ¬† const itemHover = isDark ? 'hover:bg-gray-700' : 'hover:bg-gray-200';\r\n¬† ¬† const itemText = isDark ? 'text-gray-400' : 'text-gray-600';\r\n¬† ¬† const selectedBg = isDark ? 'bg-green-700' : 'bg-green-500';\r\n\r\n¬† ¬† return (\r\n¬† ¬† ¬† ¬† <div className={`w-20 ${bgColor} border-r ${borderColor} flex-shrink-0 overflow-y-auto p-1`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† {getLanguageKeys().map(langKey => {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const config = LANGUAGE_CONFIGS[langKey];\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const isSelected = langKey === selectedLanguage;\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† return (\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† key={langKey}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={() => switchLanguage(langKey)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`w-full p-2 my-1 rounded-lg text-xs transition-colors duration-200 block text-center ${itemText} ${itemBg} ${itemHover} ${\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† isSelected ? `${selectedBg} !text-white shadow-lg` : ''\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† title={config.label}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"text-xl mb-1\">{config.icon}</div>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span className=\"truncate block\">{config.label}</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† );\r\n¬† ¬† ¬† ¬† ¬† ¬† })}\r\n¬† ¬† ¬† ¬† </div>\r\n¬† ¬† );\r\n};\r\n\r\n// --- FILE MANAGEMENT COMPONENT (Unchanged) ---\r\n/**\r\n¬†* Component to handle file management actions (add, delete, rename)\r\n¬†*/\r\nconst FileManagement = ({ files, selectedPath, setSelectedPath, updateFiles, currentProjectId, userId, selectedLanguage, theme }) => {\r\n¬† ¬† const [newFileName, setNewFileName] = useState('');\r\n¬† ¬† const [renamePath, setRenamePath] = useState(null);\r\n¬† ¬† const isDark = theme === 'dark';\r\n¬† ¬† const fileText = isDark ? 'text-gray-300' : 'text-gray-700';\r\n¬† ¬† const fileHoverBg = isDark ? 'hover:bg-gray-700' : 'hover:bg-gray-300';\r\n¬† ¬† const selectedBg = isDark ? 'bg-green-700/50' : 'bg-green-200';\r\n¬† ¬† const sidebarBg = isDark ? 'bg-gray-900' : 'bg-gray-100';\r\n¬† ¬† const fileActionsEnabled = LANGUAGE_CONFIGS[selectedLanguage]?.editable;\r\n\r\n\r\n¬† ¬† // Filter file paths to only show non-hidden ones for the explorer\r\n¬† ¬† const visiblePaths = useMemo(() => {\r\n¬† ¬† ¬† ¬† return Object.keys(files).filter(path => !files[path].hidden).sort();\r\n¬† ¬† }, [files]);\r\n\r\n¬† ¬† // Use window.prompt replacement instead of alert()\r\n¬† ¬† const alert = (message) => { console.warn('CipherStudio Alert:', message); };¬†\r\n\r\n¬† ¬† const handleCreate = () => {\r\n¬† ¬† ¬† ¬† if (!fileActionsEnabled) {\r\n¬† ¬† ¬† ¬† ¬† ¬† alert('File creation is only supported in editable environments (all languages are now editable, but an internal issue prevents file creation for this language).');\r\n¬† ¬† ¬† ¬† ¬† ¬† return;\r\n¬† ¬† ¬† ¬† }\r\n\r\n¬† ¬† ¬† ¬† if (!newFileName || files[`/${newFileName}`]) return;\r\n\r\n¬† ¬† ¬† ¬† const path = newFileName.startsWith('/') ? newFileName : `/${newFileName}`;\r\n¬† ¬† ¬† ¬† const isFolder = path.endsWith('/');\r\n¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† let defaultContent = null;\r\n¬† ¬† ¬† ¬† if (!isFolder) {\r\n¬† ¬† ¬† ¬† ¬† ¬† const ext = path.split('.').pop();\r\n¬† ¬† ¬† ¬† ¬† ¬† // Assign some basic default content based on extension\r\n¬† ¬† ¬† ¬† ¬† ¬† if (ext === 'css') {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† defaultContent = `/* ${path} */\\n`;\r\n¬† ¬† ¬† ¬† ¬† ¬† } else if (ext === 'js' || ext === 'jsx' || ext === 'ts' || ext === 'tsx') {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† defaultContent = `// ${path} \\n\\nexport default function Component() { return <div>Hello, ${path}</div>; }`;\r\n¬† ¬† ¬† ¬† ¬† ¬† } else if (ext === 'html') {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† defaultContent = `\\n<!DOCTYPE html>\\n<html>\\n<body>\\n<h1>Hello HTML</h1>\\n</body>\\n</html>`;\r\n¬† ¬† ¬† ¬† ¬† ¬† } else if (ext === 'py') {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†defaultContent = `# ${path}\\n\\nprint(\"Hello from new Python file\")\\n`;\r\n¬† ¬† ¬† ¬† ¬† ¬† } else if (ext === 'cpp') {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†defaultContent = `// ${path}\\n#include <iostream>\\n\\nint main() {\\n¬† std::cout << \"New C++ File\" << std::endl;\\n¬† return 0;\\n}`;\r\n¬† ¬† ¬† ¬† ¬† ¬† } else {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† defaultContent = `// ${path}\\n\\n`;\r\n¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† }\r\n\r\n¬† ¬† ¬† ¬† updateFiles(prevFiles => ({\r\n¬† ¬† ¬† ¬† ¬† ¬† ...prevFiles,\r\n¬† ¬† ¬† ¬† ¬† ¬† [path]: { code: defaultContent, hidden: isFolder, folder: isFolder },\r\n¬† ¬† ¬† ¬† }));\r\n\r\n¬† ¬† ¬† ¬† setNewFileName('');\r\n¬† ¬† ¬† ¬† if (!isFolder) setSelectedPath(path);\r\n¬† ¬† };\r\n\r\n¬† ¬† const confirmDelete = (path, callback) => {\r\n¬† ¬† ¬† ¬† // Use a standard prompt since we can't rely on a custom modal here easily\r\n¬† ¬† ¬† ¬† if (window.prompt(`Type \"DELETE\" to confirm deletion of ${path}:`) === 'DELETE') {\r\n¬† ¬† ¬† ¬† ¬† ¬† callback();\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† };\r\n\r\n¬† ¬† const handleDelete = (path) => {\r\n¬† ¬† ¬† ¬† if (!fileActionsEnabled) {\r\n¬† ¬† ¬† ¬† ¬† ¬† alert('File deletion is only supported in editable environments.');\r\n¬† ¬† ¬† ¬† ¬† ¬† return;\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† confirmDelete(path, () => {\r\n¬† ¬† ¬† ¬† ¬† ¬† updateFiles(prevFiles => {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const newFiles = { ...prevFiles };\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† delete newFiles[path];\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (files[path] && files[path].folder) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Object.keys(newFiles).forEach(p => {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (p.startsWith(path)) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† delete newFiles[p];\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† });\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (selectedPath === path) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const remainingPaths = Object.keys(newFiles).filter(p => newFiles[p].code !== null);\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† // Fallback to a sensible default if no file is left\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† setSelectedPath(remainingPaths.length > 0 ? remainingPaths[0] : Object.keys(getLangInitialFiles(selectedLanguage))[0] || '/src/App.js');\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† return newFiles;\r\n¬† ¬† ¬† ¬† ¬† ¬† });\r\n¬† ¬† ¬† ¬† });\r\n¬† ¬† };\r\n¬† ¬†¬†\r\n¬† ¬† const handleRename = (oldPath) => {\r\n¬† ¬† ¬† ¬† if (!fileActionsEnabled) {\r\n¬† ¬† ¬† ¬† ¬† ¬† alert('File renaming is only supported in editable environments.');\r\n¬† ¬† ¬† ¬† ¬† ¬† return;\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† if (!renamePath || oldPath === renamePath) {\r\n¬† ¬† ¬† ¬† ¬† ¬† setRenamePath(null);¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† return;\r\n¬† ¬† ¬† ¬† }\r\n\r\n¬† ¬† ¬† ¬† const newPath = renamePath.startsWith('/') ? renamePath : `/${renamePath}`;\r\n\r\n¬† ¬† ¬† ¬† if (files[newPath]) {\r\n¬† ¬† ¬† ¬† ¬† ¬† alert('File or folder already exists.');¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† return;\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† if (files[oldPath].code === null && !newPath.endsWith('/')) {\r\n¬† ¬† ¬† ¬† ¬† ¬† alert('Cannot rename a folder to a file path. Please add a trailing slash for folders.');\r\n¬† ¬† ¬† ¬† ¬† ¬† return;\r\n¬† ¬† ¬† ¬† }\r\n\r\n¬† ¬† ¬† ¬† updateFiles(prevFiles => {\r\n¬† ¬† ¬† ¬† ¬† ¬† const newFiles = {};\r\n¬† ¬† ¬† ¬† ¬† ¬† Object.keys(prevFiles).forEach(path => {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (path === oldPath) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† newFiles[newPath] = prevFiles[path];\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† } else if (path.startsWith(oldPath) && files[oldPath].folder) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const relativePath = path.substring(oldPath.length);\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† newFiles[newPath + relativePath] = prevFiles[path];\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† } else {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† newFiles[path] = prevFiles[path];\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† ¬† ¬† });\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† if (selectedPath === oldPath) setSelectedPath(newPath);\r\n¬† ¬† ¬† ¬† ¬† ¬† setRenamePath(null);\r\n¬† ¬† ¬† ¬† ¬† ¬† return newFiles;\r\n¬† ¬† ¬† ¬† });\r\n¬† ¬† };\r\n¬† ¬†¬†\r\n¬† ¬† const FileTree = ({ paths }) => {\r\n¬† ¬† ¬† ¬† const tree = {};\r\n\r\n¬† ¬† ¬† ¬† paths.forEach(path => {\r\n¬† ¬† ¬† ¬† ¬† ¬† const parts = path.substring(1).split('/').filter(p => p.length > 0);\r\n¬† ¬† ¬† ¬† ¬† ¬† let current = tree;\r\n¬† ¬† ¬† ¬† ¬† ¬† const fullPathSegments = [];\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† parts.forEach((part, i) => {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† fullPathSegments.push(part);\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const currentPath = '/' + fullPathSegments.join('/');\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (!current[part]) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const isFile = (i === parts.length - 1) && files[path] && files[path].code !== null && !files[path].folder;\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† current[part] = {¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† children: {},¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† path: currentPath,¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† isFile: isFile¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† };\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† current = current[part].children;\r\n¬† ¬† ¬† ¬† ¬† ¬† });\r\n¬† ¬† ¬† ¬† });\r\n\r\n¬† ¬† ¬† ¬† const renderTree = (node) => (\r\n¬† ¬† ¬† ¬† ¬† ¬† <ul className=\"pl-4\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {Object.keys(node).sort().map(name => {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const item = node[name];\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const path = item.path;\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const isSelected = path === selectedPath;\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const isFolder = Object.keys(item.children).length > 0 || (files[path] && files[path].folder);\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† // Simplified icon logic for non-web languages\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† let icon = isFolder ? 'üìÅ' : 'üìÑ';\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (path.endsWith('.js') || path.endsWith('.jsx') || path.endsWith('.ts') || path.endsWith('.tsx')) icon = '‚öõÔ∏è';\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† else if (path.endsWith('.css')) icon = '#';\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† else if (path.endsWith('.py')) icon = 'üêç';\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† else if (path.endsWith('.java')) icon = '‚òï';\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† else if (path.endsWith('.cpp')) icon = 'C++';\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† else if (path.endsWith('.cs')) icon = 'C#';\r\n\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const isRenderableFile = item.isFile || (files[path] && files[path].code !== null && !files[path].folder);\r\n\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† return (\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <li key={path} className={`${fileText} group`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* File/Folder Display */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className={`flex items-center space-x-2 p-1 rounded transition duration-150 cursor-pointer ${isSelected ? selectedBg : fileHoverBg}`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span className=\"text-xs mr-2\">{icon}</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {renamePath === path ? (\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <input\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† type=\"text\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† value={renamePath}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onChange={(e) => setRenamePath(e.target.value)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onBlur={() => handleRename(path)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onKeyDown={(e) => {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (e.key === 'Enter') handleRename(path);\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (e.key === 'Escape') setRenamePath(null);\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`${isDark ? 'bg-gray-800 text-white' : 'bg-white text-black'} flex-grow px-1`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† autoFocus\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={!fileActionsEnabled}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† />\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ) : (\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"flex-grow truncate\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={() => isRenderableFile && setSelectedPath(path)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onDoubleClick={() => fileActionsEnabled && setRenamePath(path)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {name}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† )}\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* Actions */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className={`space-x-1 transition-opacity ${fileActionsEnabled ? 'opacity-0 group-hover:opacity-100' : 'opacity-20'}`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={() => handleDelete(path)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"text-red-400 hover:text-red-500 text-xs p-1\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† title=\"Delete\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={!fileActionsEnabled}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† &times;\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* Recursively render children */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {isFolder && Object.keys(item.children).length > 0 && renderTree(item.children)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </li>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† );\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† })}\r\n¬† ¬† ¬† ¬† ¬† ¬† </ul>\r\n¬† ¬† ¬† ¬† );\r\n\r\n¬† ¬† ¬† ¬† return renderTree(tree);\r\n¬† ¬† };\r\n\r\n¬† ¬† return (\r\n¬† ¬† ¬† ¬† <div className={`p-3 text-sm flex flex-col h-full overflow-y-auto ${sidebarBg}`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† <h2 className={`text-lg font-semibold mb-3 ${isDark ? 'text-white' : 'text-gray-900'} border-b ${isDark ? 'border-gray-700' : 'border-gray-300'} pb-2`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Files - ({selectedLanguage})\r\n¬† ¬† ¬† ¬† ¬† ¬† </h2>\r\n¬† ¬† ¬† ¬† ¬† ¬† <p className={`text-xs mb-2 ${fileActionsEnabled ? 'text-green-400' : 'text-red-400'}`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {LANGUAGE_CONFIGS[selectedLanguage]?.description}\r\n¬† ¬† ¬† ¬† ¬† ¬† </p>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† {/* Create New File/Folder Input */}\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className={`mb-4 flex space-x-1`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <input\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† type=\"text\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† placeholder=\"new-file.js or folder/\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† value={newFileName}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onChange={(e) => setNewFileName(e.target.value)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onKeyDown={(e) => e.key === 'Enter' && handleCreate()}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`flex-grow p-2 rounded focus:ring-2 focus:ring-green-500 focus:outline-none ${isDark ? 'bg-gray-800 text-white placeholder-gray-500' : 'bg-white text-gray-900 placeholder-gray-400'}`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† />\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={handleCreate}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"bg-green-600 hover:bg-green-700 text-white p-2 rounded\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† title=\"Create File/Folder\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† +\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† {/* File Tree Display */}\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className=\"flex-grow overflow-y-auto\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <FileTree paths={visiblePaths} />\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† {/* User ID Display - Mandatory for collaborative apps */}\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className={`mt-4 pt-2 border-t ${isDark ? 'border-gray-700' : 'border-gray-300'} text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'} truncate`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† User ID: <span className=\"font-mono\">{userId}</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span className=\"block\">Project ID: <span className=\"font-mono\">{currentProjectId?.substring(0, 8) + '...'}</span></span>\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† </div>\r\n¬† ¬† );\r\n};\r\n\r\n\r\n// --- TOOLBAR COMPONENT (Unchanged) ---\r\n/**\r\n¬†* Toolbar component for project management (New, Save, Load) and AI Tools.\r\n¬†*/\r\nconst Toolbar = ({ currentProjectId, saveProject, newProject, loadProject, loading, message, deleteProject, explainCode, reviewCode, showGenerateModal, showConvertModal, theme, toggleTheme, isAutosaveEnabled, toggleAutosave }) => {\r\n¬† ¬† const [loadInput, setLoadInput] = useState('');\r\n¬† ¬† const [projectName, setProjectName] = useState(`Project ${currentProjectId?.substring(0, 8) || ''}`);\r\n¬† ¬† const isDark = theme === 'dark';\r\n¬† ¬† const toolbarBg = isDark ? 'bg-gray-900' : 'bg-gray-200';\r\n¬† ¬† const toolbarBorder = isDark ? 'border-gray-700' : 'border-gray-300';\r\n¬† ¬† const textColor = isDark ? 'text-white' : 'text-gray-900';\r\n¬† ¬† const inputBg = isDark ? 'bg-gray-800 text-white' : 'bg-white text-gray-900';\r\n\r\n¬† ¬† useEffect(() => {\r\n¬† ¬† ¬† ¬† setProjectName(`Project ${currentProjectId?.substring(0, 8) || ''}`);\r\n¬† ¬† }, [currentProjectId]);\r\n\r\n¬† ¬† const handleSave = () => {\r\n¬† ¬† ¬† ¬† if (projectName) {\r\n¬† ¬† ¬† ¬† ¬† ¬† saveProject(projectName);\r\n¬† ¬† ¬† ¬† } else {\r\n¬† ¬† ¬† ¬† ¬† ¬† console.warn('CipherStudio Alert: Please enter a project name.');\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† };\r\n\r\n¬† ¬† return (\r\n¬† ¬† ¬† ¬† <div className={`p-3 ${toolbarBg} border-b ${toolbarBorder} flex items-center justify-between ${textColor} shadow-lg flex-wrap gap-2`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className=\"flex items-center space-x-4\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <h1 className=\"text-xl font-bold text-green-500\">CipherStudio</h1>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <input\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† type=\"text\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† value={projectName}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onChange={(e) => setProjectName(e.target.value)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`${inputBg} p-1 rounded text-sm w-48 focus:ring-green-500 focus:ring-1`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† placeholder=\"Project Name\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={loading}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† />\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className=\"flex items-center space-x-4 flex-grow justify-end min-w-[500px]\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* Status Message */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"text-sm text-yellow-500 min-w-[150px] text-right\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {loading ? 'Processing...' : message}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* Theme Toggle */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={toggleTheme}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`p-2 rounded transition duration-200 ${isDark ? 'bg-gray-800 hover:bg-gray-700' : 'bg-white hover:bg-gray-300'} ${isDark ? 'text-yellow-400' : 'text-gray-800'}`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† title={isDark ? \"Switch to Light Mode\" : \"Switch to Dark Mode\"}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {isDark ? '‚òÄÔ∏è' : 'üåô'}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* Autosave Toggle */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={toggleAutosave}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1 font-semibold ${isAutosaveEnabled ? 'bg-indigo-600 hover:bg-indigo-700 text-white' : 'bg-gray-500 hover:bg-gray-600 text-white'}`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† title={isAutosaveEnabled ? \"Autosave is ON (every 10s)\" : \"Autosave is OFF\"}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span className=\"text-lg\">üíæ</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span>Autosave {isAutosaveEnabled ? 'ON' : 'OFF'}</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* AI Actions */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={explainCode}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={loading}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† title=\"Get a plain-language explanation of the current file's code.\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span className=\"text-lg\">‚ú®</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span>Explain Code</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={reviewCode}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"bg-orange-600 hover:bg-orange-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={loading}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† title=\"Review the code and suggest refactoring or improvements.\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span className=\"text-lg\">‚ú®</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span>Review & Refactor</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={showGenerateModal}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={loading}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† title=\"Generate boilerplate code from a natural language description.\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span className=\"text-lg\">‚ú®</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span>Generate Code</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†<button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={showConvertModal}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"bg-pink-600 hover:bg-pink-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={loading}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† title=\"Convert code from the current language to another programming language.\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span className=\"text-lg\">‚ú®</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span>Convert Language</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* Persistence Actions */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={newProject}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={loading}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† New Project\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={handleSave}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={loading}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Save\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† {/* Load/Delete Section */}\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className=\"flex items-center space-x-2 mt-2 md:mt-0\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <input\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† type=\"text\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† value={loadInput}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onChange={(e) => setLoadInput(e.target.value)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`${inputBg} p-1 rounded text-sm w-32 focus:ring-green-500 focus:ring-1`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† placeholder=\"Project ID to load\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† />\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={() => loadProject(loadInput)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={loading || !loadInput}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Load\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={() => deleteProject(loadInput)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† disabled={loading || !loadInput}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Delete\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† </div>\r\n¬† ¬† );\r\n};\r\n\r\n// --- CIPHER EDITOR (MODIFIED TO USE CODEMIRROR) ---\r\n/**\r\n¬†* Code Editor wrapper using CodeMirror 6 for real IDE features.\r\n¬†*/\r\n\r\n// Compartment for dynamic language switching\r\nconst languageCompartment = new Compartment();\r\n// Compartment for dynamic theme switching\r\nconst themeCompartment = new Compartment();\r\n\r\nconst getLanguageExtension = (selectedLanguage) => {\r\n¬† ¬† return LANGUAGE_CONFIGS[selectedLanguage]?.codemirrorLang || javascript();\r\n};\r\n\r\nconst CipherEditor = ({ selectedPath, fileContent, updateFileContent, selectedLanguage, theme }) => {\r\n¬† ¬† const editorRef = useRef(null);\r\n¬† ¬† const viewRef = useRef(null);\r\n¬† ¬† const isDark = theme === 'dark';\r\n\r\n¬† ¬† // Setup: Initialize CodeMirror when the component mounts\r\n¬† ¬† useEffect(() => {\r\n¬† ¬† ¬† ¬† if (editorRef.current && !viewRef.current) {\r\n¬† ¬† ¬† ¬† ¬† ¬† const startState = EditorState.create({\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† doc: fileContent,\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† extensions: [\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† // Core setup\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† basicSetup,\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† // Language and Theme Compartments\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† languageCompartment.of(getLanguageExtension(selectedLanguage)),\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† themeCompartment.of(isDark ? oneDark : []),\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† // Auto-closing tags and braces (Key requested features)\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† closeBrackets(),\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† closeTags(),\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† // Custom keymap for better editor experience (e.g., Tab for indentation)\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† keymap.of(defaultKeymap),\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† // Change listener for persistence\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† EditorView.updateListener.of((update) => {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (update.docChanged) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† updateFileContent(selectedPath, update.state.doc.toString());\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }),\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ]\r\n¬† ¬† ¬† ¬† ¬† ¬† });\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† viewRef.current = new EditorView({\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† state: startState,\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† parent: editorRef.current,\r\n¬† ¬† ¬† ¬† ¬† ¬† });\r\n¬† ¬† ¬† ¬† }\r\n\r\n¬† ¬† ¬† ¬† return () => {\r\n¬† ¬† ¬† ¬† ¬† ¬† if (viewRef.current) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† viewRef.current.destroy();\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† viewRef.current = null;\r\n¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† };\r\n¬† ¬† }, []); // Empty dependency array means this runs only on mount/unmount\r\n\r\n\r\n¬† ¬† // Update: Change document content when selectedPath or fileContent changes\r\n¬† ¬† useEffect(() => {\r\n¬† ¬† ¬† ¬† if (viewRef.current) {\r\n¬† ¬† ¬† ¬† ¬† ¬† const currentDoc = viewRef.current.state.doc.toString();\r\n¬† ¬† ¬† ¬† ¬† ¬† if (currentDoc !== fileContent) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† viewRef.current.dispatch({\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† changes: { from: 0, to: currentDoc.length, insert: fileContent || '' },\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† });\r\n¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† // Also update the language extension when the selectedLanguage changes\r\n¬† ¬† ¬† ¬† if (viewRef.current) {\r\n¬† ¬† ¬† ¬† ¬† ¬† viewRef.current.dispatch({\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† effects: languageCompartment.reconfigure(getLanguageExtension(selectedLanguage)),\r\n¬† ¬† ¬† ¬† ¬† ¬† });\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† }, [fileContent, selectedPath, selectedLanguage]);\r\n\r\n\r\n¬† ¬† // Update: Change theme when the theme prop changes\r\n¬† ¬† useEffect(() => {\r\n¬† ¬† ¬† ¬† if (viewRef.current) {\r\n¬† ¬† ¬† ¬† ¬† ¬† viewRef.current.dispatch({\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† effects: themeCompartment.reconfigure(isDark ? oneDark : []),\r\n¬† ¬† ¬† ¬† ¬† ¬† });\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† }, [isDark]);\r\n\r\n\r\n¬† ¬† const tabBg = isDark ? 'bg-gray-900' : 'bg-gray-200';\r\n¬† ¬† const tabItemBg = isDark ? 'bg-gray-700' : 'bg-gray-300';\r\n¬† ¬† const tabBorder = isDark ? 'border-gray-700' : 'border-gray-300';\r\n¬† ¬† const editorBg = isDark ? 'bg-gray-800' : 'bg-white';\r\n¬† ¬† const icon = LANGUAGE_CONFIGS[selectedLanguage]?.icon || 'üìÑ';\r\n\r\n¬† ¬† return (\r\n¬† ¬† ¬† ¬† <div className={`flex flex-col h-full ${editorBg} text-sm relative`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† {/* Tab Bar */}\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className={`p-2 ${tabBg} border-b ${tabBorder} text-xs flex items-center`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span className={`${tabItemBg} px-3 py-1 rounded-t border-b-2 border-green-500 flex items-center text-white`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span className=\"text-sm mr-2\">{icon}</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {selectedPath}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </span>\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† {/* CodeMirror Container */}\r\n¬† ¬† ¬† ¬† ¬† ¬† <div ref={editorRef} className=\"flex-1 overflow-hidden h-full\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* CodeMirror renders itself into this div */}\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† {/* Global styling for CodeMirror integration (important for full height and theme) */}\r\n¬† ¬† ¬† ¬† ¬† ¬† <style global=\"true\">{`\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† .cm-editor {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† height: 100%;\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† font-size: 0.875rem; /* text-sm */\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† line-height: 1.5; /* leading-relaxed */\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† background-color: ${isDark ? '#1f2937' : '#ffffff'}; /* gray-800 or white */\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† .cm-scroller {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† ¬† ¬† `}</style>\r\n¬† ¬† ¬† ¬† </div>\r\n¬† ¬† );\r\n};\r\n// --- END CIPHER EDITOR ---\r\n\r\n\r\n// --- REACT LIVE RENDERING SIMULATION (Unchanged) ---\r\n\r\n/**\r\n¬†* Renders a static version of the starter React component.¬†\r\n¬†* THIS IS THE FIX. We stop trying to compile JSX dynamically and just show the static starter app.\r\n¬†*/\r\nconst StaticReactPreview = React.memo(({ theme }) => {\r\n¬† ¬† const previewBg = theme === 'dark' ? 'bg-gray-900' : 'bg-white';\r\n¬† ¬† const previewText = theme === 'dark' ? 'text-white' : 'text-gray-900';\r\n¬† ¬†¬†\r\n¬† ¬† // Since we cannot compile the user's JSX, we render a static pre-compiled component instead.\r\n¬† ¬† // The user's code changes will NOT affect this live, but it removes the critical JSX error.\r\n¬† ¬† const [count, setCount] = useState(0);\r\n\r\n¬† ¬† const increment = () => {\r\n¬† ¬† ¬† ¬† setCount(c => c + 1);\r\n¬† ¬† };\r\n¬† ¬†¬†\r\n¬† ¬† return (\r\n¬† ¬† ¬† ¬† <div className={`flex flex-col items-center justify-center p-4 min-h-full w-full ${previewBg} ${previewText}`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† <h1 className=\"text-3xl font-bold mb-4 text-green-500\">CipherStudio Static React Preview</h1>\r\n¬† ¬† ¬† ¬† ¬† ¬† <p className=\"text-xl mb-6\">Count: {count}</p>\r\n¬† ¬† ¬† ¬† ¬† ¬† <button onClick={increment} className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Increment\r\n¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† <p className=\"mt-8 text-sm text-gray-500\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† **Note:** Live updates are disabled to prevent compilation errors.\r\n¬† ¬† ¬† ¬† ¬† ¬† </p>\r\n¬† ¬† ¬† ¬† </div>\r\n¬† ¬† );\r\n});\r\nStaticReactPreview.displayName = 'StaticReactPreview';\r\n\r\n\r\n// --- PREVIEW PANEL (MODIFIED FOR BETTER AI SIMULATION AND HTML DARK MODE) ---\r\n\r\n/**\r\n¬†* Preview Panel (Handles HTML rendering and Code Dumping)\r\n¬†*/\r\nconst CipherPreview = ({ files, selectedLanguage, theme, callGeminiApi }) => {\r\n¬† ¬†¬†\r\n¬† ¬† const isReact = selectedLanguage === 'React.js';\r\n¬† ¬† const isHTML = selectedLanguage === 'HTML';\r\n¬† ¬† const isSimulated = !isReact && !isHTML; // Non-web languages require simulation\r\n\r\n¬† ¬† const isDark = theme === 'dark';\r\n¬† ¬† const panelBg = isDark ? 'bg-gray-800' : 'bg-white';\r\n¬† ¬† const codeBg = isDark ? 'bg-gray-700' : 'bg-gray-100';\r\n¬† ¬† const codeText = isDark ? 'text-gray-100' : 'text-gray-800';\r\n\r\n¬† ¬† // 1. Get relevant file content\r\n¬† ¬† const appJsCode = files['/src/App.js']?.code || '';\r\n¬† ¬† const mainHtmlContent = files['/index.html']?.code || '';\r\n¬† ¬†¬†\r\n¬† ¬† // 2. Get content for code dump (main entry point)\r\n¬† ¬† const codeDumpContent = useMemo(() => {\r\n¬† ¬† ¬† ¬† const entryPath = Object.keys(files).find(p => files[p].entry) || Object.keys(files).sort()[0];\r\n¬† ¬† ¬† ¬† return files[entryPath]?.code || '// Preview content not available.';\r\n¬† ¬† }, [files]);\r\n¬† ¬†¬†\r\n¬† ¬† // --- LLM-based Terminal Output Simulation State/Logic (Enhanced) ---\r\n¬† ¬† const [simulatedOutput, setSimulatedOutput] = useState(null);\r\n¬† ¬† const [simLoading, setSimLoading] = useState(false);\r\n¬† ¬† const [lastSimulatedCode, setLastSimulatedCode] = useState('');\r\n¬† ¬†¬†\r\n¬† ¬† // Debounced function to call the AI for execution simulation\r\n¬† ¬† const debouncedSimulate = useCallback((code, lang) => {\r\n¬† ¬† ¬† ¬† setSimLoading(true);\r\n¬† ¬† ¬† ¬† setSimulatedOutput('Thinking...');\r\n\r\n¬† ¬† ¬† ¬† const systemInstruction = `You are a professional terminal emulator for ${lang}. Given the user's code, execute it mentally and provide the console output. **Ensure newlines (\\\\n) and spaces are preserved, mimicking exact terminal output.** Respond with ONLY the expected terminal output text, with no introductory text, code blocks, explanations, or commentary. If the code is complex, multi-file, or requires user input, respond with \"Simulation too complex or interactive. Cannot determine output.\"`;\r\n¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† callGeminiApi(\r\n¬† ¬† ¬† ¬† ¬† ¬† `Simulate the console output for the following ${lang} code:\\n\\n\\`\\`\\`${lang}\\n${code}\\n\\`\\`\\``,\r\n¬† ¬† ¬† ¬† ¬† ¬† systemInstruction,\r\n¬† ¬† ¬† ¬† ¬† ¬† 'Terminal Simulation'\r\n¬† ¬† ¬† ¬† ).then(result => {\r\n¬† ¬† ¬† ¬† ¬† ¬† // result is the full text output from the API\r\n¬† ¬† ¬† ¬† ¬† ¬† setSimulatedOutput(result);¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† setSimLoading(false);\r\n¬† ¬† ¬† ¬† ¬† ¬† setLastSimulatedCode(code);\r\n¬† ¬† ¬† ¬† }).catch(e => {\r\n¬† ¬† ¬† ¬† ¬† ¬† setSimulatedOutput(`[Simulation Error] Failed to contact AI helper. Check console.`);\r\n¬† ¬† ¬† ¬† ¬† ¬† setSimLoading(false);\r\n¬† ¬† ¬† ¬† });\r\n¬† ¬† }, [callGeminiApi]);\r\n\r\n¬† ¬† // Effect to trigger simulation when code changes (using debounce)\r\n¬† ¬† useEffect(() => {\r\n¬† ¬† ¬† ¬† if (!isSimulated) return; // Skip for React/HTML\r\n¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† // Basic length check to avoid simulating empty code\r\n¬† ¬† ¬† ¬† if (codeDumpContent.trim().length < 5) {\r\n¬† ¬† ¬† ¬† ¬† ¬† setSimulatedOutput('');\r\n¬† ¬† ¬† ¬† ¬† ¬† setLastSimulatedCode('');\r\n¬† ¬† ¬† ¬† ¬† ¬† return;\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† // Reset output immediately on change for responsiveness\r\n¬† ¬† ¬† ¬† setSimulatedOutput('Typing...');\r\n\r\n¬† ¬† ¬† ¬† const handler = setTimeout(() => {\r\n¬† ¬† ¬† ¬† ¬† ¬† // Only simulate if the content has changed since the last *successful* simulation\r\n¬† ¬† ¬† ¬† ¬† ¬† if (codeDumpContent !== lastSimulatedCode) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† debouncedSimulate(codeDumpContent, selectedLanguage);\r\n¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† }, 1500);¬†\r\n\r\n¬† ¬† ¬† ¬† return () => clearTimeout(handler);\r\n¬† ¬† }, [codeDumpContent, selectedLanguage, isSimulated, debouncedSimulate, lastSimulatedCode]);\r\n¬† ¬† // --- END: LLM-based Terminal Output Simulation ---\r\n\r\n\r\n¬† ¬† let PreviewContent;\r\n¬† ¬† let previewTitle;\r\n¬† ¬† let previewWarning;\r\n\r\n¬† ¬† if (isReact) {\r\n¬† ¬† ¬† ¬† // ** STATIC REACT PREVIEW (FIX) **\r\n¬† ¬† ¬† ¬† PreviewContent = <StaticReactPreview theme={theme} />;\r\n¬† ¬† ¬† ¬† previewTitle = 'Static React App Output';\r\n¬† ¬† ¬† ¬† previewWarning = 'Live updates are disabled.';\r\n¬† ¬† } else if (isHTML) {\r\n¬† ¬† ¬† ¬† // ** LIVE HTML PREVIEW (FIXED DARK MODE) **\r\n¬† ¬† ¬† ¬† const htmlWithTheme = `\r\n¬† ¬† ¬† ¬† ¬† ¬† <style>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† body {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† background-color: ${isDark ? '#1f2937' : '#ffffff'};\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† color: ${isDark ? '#e5e7eb' : '#1f2937'};\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† ¬† ¬† </style>\r\n¬† ¬† ¬† ¬† ¬† ¬† ${mainHtmlContent}\r\n¬† ¬† ¬† ¬† `;\r\n¬† ¬† ¬† ¬† PreviewContent = (\r\n¬† ¬† ¬† ¬† ¬† ¬† <iframe\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className=\"w-full h-full border-0\"\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† srcDoc={htmlWithTheme}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† title=\"HTML Live Preview\"\r\n¬† ¬† ¬† ¬† ¬† ¬† />\r\n¬† ¬† ¬† ¬† );\r\n¬† ¬† ¬† ¬† previewTitle = 'Live HTML Output';\r\n¬† ¬† ¬† ¬† previewWarning = 'Rendering raw HTML content. (Themed)';\r\n¬† ¬† } else {\r\n¬† ¬† ¬† ¬† // ** TERMINAL OUTPUT SIMULATION (NEW) **\r\n¬† ¬† ¬† ¬† PreviewContent = (\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className={`absolute inset-0 ${codeBg} p-4 overflow-auto rounded-lg shadow-inner flex flex-col`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <h2 className={`text-lg font-bold mb-2 ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Terminal Output Simulation\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </h2>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <p className='text-yellow-500 mb-4 text-xs'>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† **NOTE:** Live execution is not available. Output is simulated by the Gemini AI helper.\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </p>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className={`flex-1 p-2 ${isDark ? 'bg-black text-green-400' : 'bg-gray-900 text-green-300'} rounded-lg font-mono text-sm overflow-auto whitespace-pre-wrap`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {simLoading && simulatedOutput === 'Thinking...' ? (\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†<div className=\"flex items-center text-yellow-400\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-400 mr-2\"></div>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Compiling and Running...\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ) : (\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† simulatedOutput || `> Ready to simulate ${selectedLanguage} code. Start typing to see the output here.`\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† )}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† );\r\n¬† ¬† ¬† ¬† previewTitle = 'Compiler Output Simulation';\r\n¬† ¬† ¬† ¬† previewWarning = `Simulated by AI for ${selectedLanguage}`;\r\n¬† ¬† }\r\n\r\n\r\n¬† ¬† return (\r\n¬† ¬† ¬† ¬† <div className=\"flex flex-col h-full\">\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className={`p-2 ${isDark ? 'bg-gray-900 border-gray-700' : 'bg-gray-200 border-gray-300'} border-b text-gray-400 text-xs flex justify-between`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span>{previewTitle}</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span className={isReact || isHTML ? 'text-green-500' : 'text-yellow-500'}>{previewWarning}</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className={`flex-1 ${panelBg} p-0 overflow-auto text-gray-800 font-mono text-sm relative`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {PreviewContent}\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† </div>\r\n¬† ¬† );\r\n};\r\n\r\n\r\n// --- AI OUTPUT PANEL (Unchanged) ---\r\n/**\r\n¬†* Dedicated panel to display Gemini LLM responses.\r\n¬†*/\r\nconst AiOutputPanel = ({ aiOutput, aiLoading, aiToolMessage, theme }) => {\r\n¬† ¬† const isDark = theme === 'dark';\r\n¬† ¬† const panelBg = isDark ? 'bg-gray-700' : 'bg-gray-100';\r\n¬† ¬† const text = isDark ? 'text-gray-100' : 'text-gray-900';\r\n¬† ¬† const tabBg = isDark ? 'bg-gray-900' : 'bg-gray-200';\r\n¬† ¬† const tabBorder = isDark ? 'border-gray-700' : 'border-gray-300';\r\n\r\n\r\n¬† ¬† return (\r\n¬† ¬† ¬† ¬† <div className=\"flex flex-col h-full\">\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className={`p-2 ${tabBg} border-b ${tabBorder} text-gray-400 text-xs flex justify-between`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span>‚ú® AI Assistant Console</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <span className=\"text-purple-400\">{aiToolMessage}</span>\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className={`flex-1 ${panelBg} p-4 overflow-auto relative`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {aiLoading ? (\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"flex items-center justify-center h-full text-purple-500\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mr-3\"></div>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Generating AI Response...\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ) : aiOutput ? (\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <pre className={`whitespace-pre-wrap font-mono text-sm leading-relaxed ${text}`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {aiOutput}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </pre>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ) : (\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"text-gray-500 text-center p-10\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Use the ‚ú® buttons in the toolbar to explain or review your code.\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† )}\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† </div>\r\n¬† ¬† );\r\n};\r\n\r\n// --- MAIN APP COMPONENT (MODIFIED FOR CODEMIRROR IMPORT) ---\r\n\r\n/**\r\n¬†* Main application component for CipherStudio IDE.\r\n¬†*/\r\nconst App = () => {\r\n¬† ¬† // Add missing imports needed for CodeMirror\r\n¬† ¬† const { useRef } = React;\r\n¬† ¬† //const { EditorState } = require('@codemirror/state'); // Simulating module require for simplicity\r\n¬† ¬† \r\n¬† ¬† // Theme State\r\n¬† ¬† const [theme, setTheme] = useState('dark');\r\n¬† ¬† const toggleTheme = useCallback(() => {\r\n¬† ¬† ¬† ¬† setTheme(prev => (prev === 'dark' ? 'light' : 'dark'));\r\n¬† ¬† }, []);\r\n\r\n¬† ¬† // 1. Project Management Hook\r\n¬† ¬† const {\r\n¬† ¬† ¬† ¬† currentFiles,\r\n¬† ¬† ¬† ¬† setCurrentFiles,¬†\r\n¬† ¬† ¬† ¬† selectedPath,\r\n¬† ¬† ¬† ¬† setSelectedPath,\r\n¬† ¬† ¬† ¬† currentProjectId,\r\n¬† ¬† ¬† ¬† userId,\r\n¬† ¬† ¬† ¬† isAuthReady,\r\n¬† ¬† ¬† ¬† loading,\r\n¬† ¬† ¬† ¬† message,\r\n¬† ¬† ¬† ¬† updateFileContent,\r\n¬† ¬† ¬† ¬† saveProject,\r\n¬† ¬† ¬† ¬† loadProject,\r\n¬† ¬† ¬† ¬† newProject,\r\n¬† ¬† ¬† ¬† deleteProject,\r\n¬† ¬† ¬† ¬† selectedLanguage,¬†\r\n¬† ¬† ¬† ¬† switchLanguage,\r\n¬† ¬† ¬† ¬† isAutosaveEnabled,\r\n¬† ¬† ¬† ¬† setIsAutosaveEnabled,\r\n¬† ¬† } = useProjectManager(db, auth);¬†\r\n\r\n¬† ¬† const toggleAutosave = useCallback(() => {\r\n¬† ¬† ¬† ¬† setIsAutosaveEnabled(prev => !prev);\r\n¬† ¬† }, [setIsAutosaveEnabled]);\r\n\r\n¬† ¬† // 2. AI Tool State and Logic\r\n¬† ¬† const [aiOutput, setAiOutput] = useState(null);\r\n¬† ¬† const [aiLoading, setAiLoading] = useState(false);\r\n¬† ¬† const [aiToolMessage, setAiToolMessage] = useState('');\r\n¬† ¬† const [activeRightPanel, setActiveRightPanel] = useState('preview');\r\n¬† ¬† const [isGenerateModalOpen, setIsGenerateModalOpen] = useState(false);\r\n¬† ¬† const [isConvertModalOpen, setIsConvertModalOpen] = useState(false);\r\n\r\n¬† ¬† // Get the content of the currently selected file for the editor\r\n¬† ¬† const activeFileContent = currentFiles[selectedPath]?.code || '// File not found or is a folder.';\r\n¬† ¬†¬†\r\n¬† ¬† // Get the content of the \"main\" file for the simulated preview\r\n¬† ¬† const previewFiles = useMemo(() => {\r\n¬† ¬† ¬† ¬† // Pass the entire file map for React/HTML to look up necessary files\r\n¬† ¬† ¬† ¬† return currentFiles;\r\n¬† ¬† }, [currentFiles]);\r\n\r\n\r\n¬† ¬† const callGeminiApi = useCallback(async (prompt, systemInstruction, toolName) => {\r\n¬† ¬† ¬† ¬† // Only set main AI tool panel state if it's an explicit call (not terminal simulation)\r\n¬† ¬† ¬† ¬† if (toolName !== 'Terminal Simulation') {\r\n¬† ¬† ¬† ¬† ¬† ¬† setAiLoading(true);\r\n¬† ¬† ¬† ¬† }\r\n\r\n¬† ¬† ¬† ¬† const apiKey = \"AIzaSyCo6axk1QFoINp9-CyrlGDVIIKbFfjsxZk\";¬†\r\n¬† ¬† ¬† ¬† const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;\r\n\r\n¬† ¬† ¬† ¬† const payload = {\r\n¬† ¬† ¬† ¬† ¬† ¬† contents: [{ parts: [{ text: prompt }] }],\r\n¬† ¬† ¬† ¬† ¬† ¬† config: {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† systemInstruction: systemInstruction\r\n¬† ¬† ¬† ¬† ¬† ¬† },\r\n¬† ¬† ¬† ¬† };\r\n\r\n¬† ¬† ¬† ¬† let attempts = 0;\r\n¬† ¬† ¬† ¬† const maxAttempts = 3;\r\n¬† ¬† ¬† ¬† let lastError = null;\r\n\r\n¬† ¬† ¬† ¬† while (attempts < maxAttempts) {\r\n¬† ¬† ¬† ¬† ¬† ¬† try {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const response = await fetch(apiUrl, {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† method: 'POST',\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† headers: { 'Content-Type': 'application/json' },\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† body: JSON.stringify(payload)\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† });\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (!response.ok) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† throw new Error(`API returned status ${response.status}`);\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const result = await response.json();\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const text = result.candidates?.[0]?.content?.parts?.[0]?.text || \"Could not generate content.\";\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† // Only reset the main AI tool panel state if it was an explicit tool call\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (toolName !== 'Terminal Simulation') {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† setAiLoading(false);\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† setAiOutput(text);\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† setActiveRightPanel('ai_tools'); // Switch to the AI panel\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† setAiToolMessage(`Output for ${toolName} on ${selectedPath}`);\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† return text;\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† } catch (error) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† lastError = error;\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† attempts++;\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† const delay = Math.pow(2, attempts) * 1000;\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† console.warn(`Attempt ${attempts} failed. Retrying in ${delay / 1000}s...`, error);\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (attempts < maxAttempts) {\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† await new Promise(resolve => setTimeout(resolve, delay));\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† const finalError = `Failed to get a response after ${maxAttempts} attempts. Error: ${lastError.message || 'Unknown error'}`;\r\n¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† if (toolName !== 'Terminal Simulation') {\r\n¬† ¬† ¬† ¬† ¬† ¬† setAiLoading(false);\r\n¬† ¬† ¬† ¬† ¬† ¬† setAiOutput(finalError);\r\n¬† ¬† ¬† ¬† ¬† ¬† setAiToolMessage(`Failed to run ${toolName}`);\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬†¬†\r\n¬† ¬† ¬† ¬† throw new Error(finalError);\r\n\r\n¬† ¬† }, [selectedPath]);\r\n\r\n\r\n¬† ¬† const explainCode = useCallback(async () => {\r\n¬† ¬† ¬† ¬† const systemInstruction = `You are a helpful programming tutor. Your task is to analyze the provided code snippet written in ${selectedLanguage} and explain its purpose, key components, and function flow in clear, easy-to-understand language. Focus on the context (${selectedLanguage}/${selectedPath}) and be concise.`;\r\n¬† ¬† ¬† ¬† const prompt = `Explain the following code from file ${selectedPath}:\\n\\n\\`\\`\\`${selectedLanguage}\\n${activeFileContent}\\n\\`\\`\\``;\r\n¬† ¬† ¬† ¬† await callGeminiApi(prompt, systemInstruction, 'Code Explanation');\r\n¬† ¬† }, [activeFileContent, selectedPath, selectedLanguage, callGeminiApi]);\r\n\r\n¬† ¬† const reviewCode = useCallback(async () => {\r\n¬† ¬† ¬† ¬† const systemInstruction = `You are an expert code reviewer specializing in modern ${selectedLanguage} and software best practices. Analyze the provided code for potential improvements, bugs, or refactoring suggestions. Your response should be structured with markdown bullet points and code examples where applicable. If no issues are found, state \"Code looks great! Ready for commit.\"`;\r\n¬† ¬† ¬† ¬† const prompt = `Review the following code from file ${selectedPath} in ${selectedLanguage} and suggest improvements:\\n\\n\\`\\`\\`${selectedLanguage}\\n${activeFileContent}\\n\\`\\`\\``;\r\n¬† ¬† ¬† ¬† await callGeminiApi(prompt, systemInstruction, 'Code Review');\r\n¬† ¬† }, [activeFileContent, selectedPath, selectedLanguage, callGeminiApi]);\r\n¬† ¬†¬†\r\n¬† ¬† const generateCode = useCallback(async (description) => {\r\n¬† ¬† ¬† ¬† const systemInstruction = `You are a top-tier software engineer specializing in ${selectedLanguage}. Generate a complete, self-contained code snippet based on the user's description. Enclose the code in a single markdown code block (e.g., \\`\\`\\`${selectedLanguage}...\\`\\`\\`). Do not include any text outside the markdown code block.`;\r\n¬† ¬† ¬† ¬† const prompt = `Generate code for the following in ${selectedLanguage}, suitable for file ${selectedPath}: ${description}`;\r\n¬† ¬† ¬† ¬† await callGeminiApi(prompt, systemInstruction, 'Code Generation');\r\n¬† ¬† }, [selectedPath, selectedLanguage, callGeminiApi]);\r\n\r\n¬† ¬† const convertCode = useCallback(async (targetLang) => {\r\n¬† ¬† ¬† ¬† const systemInstruction = `You are an expert code translator. Your task is to accurately convert the provided code from ${selectedLanguage} to ${targetLang}. The output must contain ONLY the converted code snippet, enclosed in a single markdown code block (e.g., \\`\\`\\`${targetLang}...\\`\\`\\`). Do not include any explanatory text or commentary outside the markdown block.`;\r\n¬† ¬† ¬† ¬† const prompt = `Convert the following code from ${selectedLanguage} to ${targetLang}:\\n\\n\\`\\`\\`${selectedLanguage}\\n${activeFileContent}\\n\\`\\`\\``;\r\n¬† ¬† ¬† ¬† await callGeminiApi(prompt, systemInstruction, `Code Conversion to ${targetLang}`);\r\n¬† ¬† }, [activeFileContent, selectedLanguage, callGeminiApi]);\r\n\r\n\r\n¬† ¬† // Effect to reset AI panel when file changes\r\n¬† ¬† useEffect(() => {\r\n¬† ¬† ¬† ¬† if (activeRightPanel === 'ai_tools' && !aiLoading) {\r\n¬† ¬† ¬† ¬† ¬† ¬† setAiOutput(null);\r\n¬† ¬† ¬† ¬† ¬† ¬† setAiToolMessage('');\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† }, [selectedPath, activeRightPanel, aiLoading]);\r\n\r\n\r\n¬† ¬† // Handle initial loading state\r\n¬† ¬† if (!isAuthReady) {\r\n¬† ¬† ¬† ¬† return (\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className=\"flex items-center justify-center h-screen w-full bg-gray-900 text-white\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <p>Initializing CipherStudio and connecting to Persistence...</p>\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† );\r\n¬† ¬† }\r\n\r\n¬† ¬† const mainBg = theme === 'dark' ? 'bg-gray-800' : 'bg-gray-200';\r\n\r\n¬† ¬† return (\r\n¬† ¬† ¬† ¬† <div className={`flex flex-col h-screen w-full font-sans ${mainBg} ${theme}`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† {/* AI Modals */}\r\n¬† ¬† ¬† ¬† ¬† ¬† <GenerateCodeModal¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† isOpen={isGenerateModalOpen}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClose={() => setIsGenerateModalOpen(false)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onGenerate={generateCode}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† theme={theme}\r\n¬† ¬† ¬† ¬† ¬† ¬† />\r\n¬† ¬† ¬† ¬† ¬† ¬† <ConvertCodeModal\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† isOpen={isConvertModalOpen}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClose={() => setIsConvertModalOpen(false)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onConvert={convertCode}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† currentLanguage={selectedLanguage}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† theme={theme}\r\n¬† ¬† ¬† ¬† ¬† ¬† />\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† {/* Toolbar for Project Actions and AI Tools */}\r\n¬† ¬† ¬† ¬† ¬† ¬† <Toolbar\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† currentProjectId={currentProjectId}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† saveProject={saveProject}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† loadProject={loadProject}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† newProject={newProject}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† deleteProject={deleteProject}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† loading={loading || aiLoading}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† message={message}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† explainCode={explainCode}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† reviewCode={reviewCode}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† showGenerateModal={() => setIsGenerateModalOpen(true)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† showConvertModal={() => setIsConvertModalOpen(true)}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† theme={theme}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† toggleTheme={toggleTheme}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† isAutosaveEnabled={isAutosaveEnabled}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† toggleAutosave={toggleAutosave}\r\n¬† ¬† ¬† ¬† ¬† ¬† />\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† <div className=\"flex flex-1 overflow-hidden\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* 1. Language Sidebar */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <LanguageSidebar¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† selectedLanguage={selectedLanguage}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† switchLanguage={switchLanguage}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† theme={theme}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† />\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* 2. File Explorer Sidebar */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"w-64 flex-shrink-0 overflow-y-auto\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <FileManagement\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† files={currentFiles}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† selectedPath={selectedPath}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† setSelectedPath={setSelectedPath}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† updateFiles={setCurrentFiles}¬†\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† currentProjectId={currentProjectId}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† userId={userId}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† selectedLanguage={selectedLanguage}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† theme={theme}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† />\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* 3. IDE Layout (Editor + Dynamic Right Panel) */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"flex-1 overflow-hidden flex\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* Code Editor (NOW CODEMIRROR) */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"flex-1 h-full border-r border-gray-700\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <CipherEditor\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† selectedPath={selectedPath}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† fileContent={activeFileContent}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† updateFileContent={updateFileContent}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† selectedLanguage={selectedLanguage}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† theme={theme}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† />\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* Right Panel: Tabbed Preview/AI Tools */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"flex-1 h-full flex flex-col\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* Tab Buttons */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className={`flex ${theme === 'dark' ? 'bg-gray-900 border-gray-700' : 'bg-gray-200 border-gray-300'} border-b`}>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={() => setActiveRightPanel('preview')}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`px-4 py-2 text-sm font-medium transition-colors duration-200 ${\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† activeRightPanel === 'preview'\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ? `${theme === 'dark' ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-900'} border-b-2 border-green-500`\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† : `${theme === 'dark' ? 'text-gray-400 hover:bg-gray-800' : 'text-gray-600 hover:bg-gray-300'}`\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† Preview\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <button\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† onClick={() => setActiveRightPanel('ai_tools')}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† className={`px-4 py-2 text-sm font-medium transition-colors duration-200 flex items-center ${\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† activeRightPanel === 'ai_tools'\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ? `${theme === 'dark' ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-900'} border-b-2 border-purple-500`\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† : `${theme === 'dark' ? 'text-gray-400 hover:bg-gray-800' : 'text-gray-600 hover:bg-gray-300'}`\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }`}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† >\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ‚ú® AI Tools\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </button>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {/* Panel Content */}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <div className=\"flex-1\">\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† {activeRightPanel === 'preview' ? (\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <CipherPreview\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† files={previewFiles}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† selectedLanguage={selectedLanguage}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† theme={theme}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† callGeminiApi={callGeminiApi}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† />\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ) : (\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† <AiOutputPanel\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† aiOutput={aiOutput}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† aiLoading={aiLoading}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† aiToolMessage={aiToolMessage}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† theme={theme}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† />\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† )}\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† ¬† ¬† </div>\r\n¬† ¬† ¬† ¬† </div>\r\n¬† ¬† );\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}