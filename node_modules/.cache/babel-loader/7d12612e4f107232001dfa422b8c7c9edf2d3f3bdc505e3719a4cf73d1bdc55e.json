{"ast":null,"code":"var _jsxFileName = \"D:\\\\All Downloaded files\\\\CypherschoolAssignment\\\\CypherStudio\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$(),\n  _s8 = $RefreshSig$(),\n  _s9 = $RefreshSig$(),\n  _s0 = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { getAuth, signInWithCustomToken, signInAnonymously } from 'firebase/auth';\nimport { initializeApp } from 'firebase/app';\nimport { getFirestore, doc, setDoc, getDoc, collection, getDocs, deleteDoc, query, where } from 'firebase/firestore';\n\n// --- Global Variable Setup ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\nconst firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;\n// Fix for global variable access:\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\n\n// --- Firebase Initialization ---\nlet firebaseApp, db, auth;\nif (firebaseConfig) {\n  try {\n    firebaseApp = initializeApp(firebaseConfig);\n    db = getFirestore(firebaseApp);\n    auth = getAuth(firebaseApp);\n  } catch (error) {\n    console.error(\"Firebase initialization failed:\", error);\n  }\n}\n\n// --- Multi-Language Support Configuration ---\nconst LANGUAGE_CONFIGS = {\n  'React.js': {\n    icon: '‚öõÔ∏è',\n    label: 'React.js',\n    editable: true,\n    files: {\n      // Note: index.js imports App and handles React rendering logic\n      '/src/index.js': {\n        code: `import React from 'react';\\nimport App from './App';\\n\\n// React entry point (Simulated).`,\n        hidden: false,\n        entry: true\n      },\n      '/src/App.js': {\n        code: `import React, { useState } from 'react';\\n\\n// Main App Component\\nconst App = () => {\\n  const [count, setCount] = useState(0);\\n\\n  const increment = () => {\\n      setCount(c => c + 1);\\n  };\\n\\n  return (\\n    <div className=\"flex flex-col items-center p-4 min-h-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\">\\n      <h1 className=\"text-3xl font-bold mb-4 text-green-500\">CipherStudio Live React App</h1>\\n      <p className=\"text-xl mb-6\">Count: {count}</p>\\n      <button onClick={increment} className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md\">\\n        Increment\\n      </button>\\n      <p className=\"mt-8 text-sm text-gray-500\">Edit code in /src/App.js to see changes here!</p>\\n    </div>\\n  );\\n};\\n\\nexport default App;`,\n        hidden: false\n      },\n      '/src/styles.css': {\n        code: `/* Global styles for React app */\\nbody { font-family: sans-serif; }`,\n        hidden: false\n      },\n      '/public/index.html': {\n        code: '<!DOCTYPE html>...',\n        hidden: true\n      },\n      '/package.json': {\n        code: '{\"dependencies\": {\"react\": \"18.2.0\"}}',\n        hidden: true\n      }\n    },\n    description: 'React environment. **Live rendering is now a static output simulation.**'\n  },\n  'JavaScript': {\n    icon: 'JS',\n    label: 'JavaScript',\n    editable: true,\n    files: {\n      '/index.js': {\n        code: 'console.log(\"Hello pure JavaScript\");',\n        hidden: false,\n        entry: true\n      }\n    },\n    description: 'Pure JS environment. **Execution is simulated.**'\n  },\n  'HTML': {\n    icon: 'HTML',\n    label: 'HTML',\n    editable: true,\n    files: {\n      '/index.html': {\n        code: '<!DOCTYPE html>\\n<html>\\n<body>\\n  <h1 class=\"text-2xl text-blue-500\">Pure HTML Project</h1>\\n  <p>This is editable.</p>\\n</body>\\n</html>',\n        hidden: false,\n        entry: true\n      }\n    },\n    description: 'HTML environment. **Live HTML rendering enabled.**'\n  },\n  'Python': {\n    icon: 'üêç',\n    label: 'Python',\n    editable: true,\n    files: {\n      '/main.py': {\n        code: `def greet(name):\\n    return f\"Hello, {name}!\"\\n\\n# Code is editable, but **execution is simulated**.\\nprint(greet(\"Python Dev\"))`,\n        hidden: false,\n        entry: true\n      }\n    },\n    description: '**Editable Code/Files.** Execution is simulated.'\n  },\n  'Java': {\n    icon: '‚òï',\n    label: 'Java',\n    editable: true,\n    files: {\n      '/Main.java': {\n        code: `class Main {\\n  public static void main(String[] args) {\\n    System.out.println(\"Hello Java World!\");\\n  }\\n}`,\n        hidden: false,\n        entry: true\n      }\n    },\n    description: '**Editable Code/Files.** Execution is simulated.'\n  },\n  'C++': {\n    icon: 'C++',\n    label: 'C++',\n    editable: true,\n    files: {\n      '/main.cpp': {\n        code: '#include <iostream>\\n\\nint main() {\\n  std::cout << \"Hello C++\" << std::endl;\\n  return 0;\\n}',\n        hidden: false,\n        entry: true\n      }\n    },\n    description: '**Editable Code/Files.** Execution is simulated.'\n  },\n  'C#': {\n    icon: 'C#',\n    label: 'C#',\n    editable: true,\n    files: {\n      '/Program.cs': {\n        code: 'using System;\\n\\nConsole.WriteLine(\"Hello C#\");',\n        hidden: false,\n        entry: true\n      }\n    },\n    description: '**Editable Code/Files.** Execution is simulated.'\n  },\n  'Go': {\n    icon: 'Go',\n    label: 'Go',\n    editable: true,\n    files: {\n      '/main.go': {\n        code: 'package main\\n\\nimport \"fmt\"\\n\\nfunc main() {\\n\\tfmt.Println(\"Hello Go\")\\n}',\n        hidden: false,\n        entry: true\n      }\n    },\n    description: '**Editable Code/Files.** Execution is simulated.'\n  },\n  'Rust': {\n    icon: 'Rs',\n    label: 'Rust',\n    editable: true,\n    files: {\n      '/main.rs': {\n        code: 'fn main() {\\n    println!(\"Hello Rust!\");\\n}',\n        hidden: false,\n        entry: true\n      }\n    },\n    description: '**Editable Code/Files.** Execution is simulated.'\n  }\n};\n\n// --- Helper Functions ---\nconst getLangInitialFiles = language => {\n  var _LANGUAGE_CONFIGS$lan;\n  return ((_LANGUAGE_CONFIGS$lan = LANGUAGE_CONFIGS[language]) === null || _LANGUAGE_CONFIGS$lan === void 0 ? void 0 : _LANGUAGE_CONFIGS$lan.files) || LANGUAGE_CONFIGS['React.js'].files;\n};\nconst getLanguageKeys = () => Object.keys(LANGUAGE_CONFIGS).sort();\nconst supportedConversionLangs = getLanguageKeys().filter(lang => lang !== 'React.js');\n\n/**\r\n * Hook to manage project files, persistence, and state.\r\n */\nconst useProjectManager = (dbInstance, authInstance) => {\n  _s();\n  const [selectedLanguage, setSelectedLanguage] = useState('React.js');\n  const [currentFiles, setCurrentFiles] = useState(getLangInitialFiles('React.js'));\n  const [selectedPath, setSelectedPath] = useState('/src/App.js');\n  const [currentProjectId, setCurrentProjectId] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n  const [isAutosaveEnabled, setIsAutosaveEnabled] = useState(true);\n\n  // 1. Authentication and User ID setup\n  useEffect(() => {\n    const authenticate = async () => {\n      if (!authInstance) return;\n      try {\n        var _authInstance$current;\n        if (initialAuthToken) {\n          await signInWithCustomToken(authInstance, initialAuthToken);\n        } else {\n          await signInAnonymously(authInstance);\n        }\n        setUserId(((_authInstance$current = authInstance.currentUser) === null || _authInstance$current === void 0 ? void 0 : _authInstance$current.uid) || crypto.randomUUID());\n        setIsAuthReady(true);\n      } catch (error) {\n        var _authInstance$current2;\n        console.error(\"Authentication failed:\", error);\n        await signInAnonymously(authInstance);\n        setUserId(((_authInstance$current2 = authInstance.currentUser) === null || _authInstance$current2 === void 0 ? void 0 : _authInstance$current2.uid) || crypto.randomUUID());\n        setIsAuthReady(true);\n      }\n    };\n    authenticate();\n  }, [authInstance]);\n\n  // Firestore path helper\n  const getProjectPath = id => doc(dbInstance, 'artifacts', appId, 'users', userId, 'projects', id);\n\n  // 2. File content update logic\n  const updateFileContent = useCallback((path, newCode) => {\n    setCurrentFiles(prevFiles => ({\n      ...prevFiles,\n      [path]: {\n        ...prevFiles[path],\n        code: newCode\n      }\n    }));\n  }, []);\n\n  // 3. Language Switch Logic\n  const switchLanguage = useCallback(lang => {\n    setSelectedLanguage(lang);\n    setCurrentFiles(getLangInitialFiles(lang));\n    const newFiles = getLangInitialFiles(lang);\n    const newPath = Object.keys(newFiles).find(p => newFiles[p].entry) || Object.keys(newFiles).sort()[0];\n    setSelectedPath(newPath);\n    setCurrentProjectId(crypto.randomUUID());\n    setMessage(`Switched to ${lang}. Start a new project or save your work.`);\n  }, []);\n\n  // 4. Persistence Functions (Save/Load/New)\n  const saveProject = useCallback(async name => {\n    if (!dbInstance || !userId || !currentProjectId) return;\n    setLoading(true);\n    try {\n      const projectDocRef = getProjectPath(currentProjectId);\n      const projectData = {\n        name: name || `Project ${currentProjectId}`,\n        language: selectedLanguage,\n        files: currentFiles,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        userId: userId\n      };\n      await setDoc(projectDocRef, projectData, {\n        merge: true\n      });\n      setMessage(`Project '${projectData.name}' saved successfully!`);\n    } catch (error) {\n      console.error(\"Error saving project:\", error);\n      setMessage('Error saving project. Check console for details.');\n    } finally {\n      setLoading(false);\n      setTimeout(() => setMessage(''), 3000);\n    }\n  }, [dbInstance, userId, currentProjectId, currentFiles, selectedLanguage, getProjectPath]);\n  const loadProject = useCallback(async projectId => {\n    if (!dbInstance || !userId) return;\n    setLoading(true);\n    setMessage(`Loading project ${projectId}...`);\n    try {\n      const projectDocRef = getProjectPath(projectId);\n      const docSnap = await getDoc(projectDocRef);\n      if (docSnap.exists()) {\n        const data = docSnap.data();\n        const loadedLanguage = data.language || 'React.js';\n        setSelectedLanguage(loadedLanguage);\n        setCurrentFiles(data.files || getLangInitialFiles(loadedLanguage));\n        setCurrentProjectId(projectId);\n        const newPath = Object.keys(data.files).find(p => data.files[p].entry) || Object.keys(data.files).sort()[0] || '/src/App.js';\n        setSelectedPath(newPath);\n        setMessage(`Project '${data.name}' loaded. Language: ${loadedLanguage}`);\n      } else {\n        setMessage(`Project ID ${projectId} not found.`);\n      }\n    } catch (error) {\n      console.error(\"Error loading project:\", error);\n      setMessage('Error loading project. Check console for details.');\n    } finally {\n      setLoading(false);\n      setTimeout(() => setMessage(''), 3000);\n    }\n  }, [dbInstance, userId, getProjectPath]);\n  const newProject = useCallback(() => {\n    setCurrentFiles(getLangInitialFiles(selectedLanguage));\n    setSelectedPath(Object.keys(getLangInitialFiles(selectedLanguage)).find(p => getLangInitialFiles(selectedLanguage)[p].entry) || '/src/App.js');\n    setCurrentProjectId(crypto.randomUUID());\n    setMessage(`New ${selectedLanguage} project created. Use \"Save\" to persist.`);\n  }, [selectedLanguage]);\n  const deleteProject = useCallback(async projectId => {\n    if (!dbInstance || !userId) return;\n    setLoading(true);\n    try {\n      await deleteDoc(getProjectPath(projectId));\n      setMessage(`Project ${projectId} deleted.`);\n      if (currentProjectId === projectId) {\n        newProject();\n      }\n    } catch (error) {\n      console.error(\"Error deleting project:\", error);\n      setMessage('Error deleting project.');\n    } finally {\n      setLoading(false);\n      setTimeout(() => setMessage(''), 3000);\n    }\n  }, [dbInstance, userId, currentProjectId, newProject, getProjectPath]);\n\n  // Initial load/setup (auto-create a new project ID on startup)\n  useEffect(() => {\n    if (isAuthReady && !currentProjectId) {\n      newProject();\n    }\n  }, [isAuthReady, currentProjectId, newProject]);\n\n  // NEW: Autosave Implementation\n  useEffect(() => {\n    if (!isAuthReady || !currentProjectId || !isAutosaveEnabled) return;\n    const intervalId = setInterval(() => {\n      // Autosave runs silently, without setting loading or displaying messages\n      const autosave = async () => {\n        try {\n          const projectDocRef = getProjectPath(currentProjectId);\n          const projectData = {\n            language: selectedLanguage,\n            files: currentFiles,\n            updatedAt: new Date().toISOString()\n          };\n          await setDoc(projectDocRef, projectData, {\n            merge: true\n          });\n        } catch (error) {\n          console.error(\"Autosave failed:\", error);\n        }\n      };\n      autosave();\n    }, 10000); // Autosave every 10 seconds\n\n    return () => clearInterval(intervalId);\n  }, [isAutosaveEnabled, isAuthReady, currentProjectId, currentFiles, selectedLanguage, getProjectPath]);\n  return {\n    currentFiles,\n    setCurrentFiles,\n    selectedPath,\n    setSelectedPath,\n    currentProjectId,\n    userId,\n    isAuthReady,\n    loading,\n    message,\n    saveProject,\n    loadProject,\n    newProject,\n    deleteProject,\n    updateFileContent,\n    selectedLanguage,\n    switchLanguage,\n    isAutosaveEnabled,\n    setIsAutosaveEnabled\n  };\n};\n\n// --- CONVERSION MODAL COMPONENT ---\n\n/**\r\n * Custom Modal for Language Conversion Prompt\r\n */\n_s(useProjectManager, \"erP9EdyLQRwbfpzY+dWtc6riEnQ=\");\nconst ConvertCodeModal = ({\n  isOpen,\n  onClose,\n  onConvert,\n  currentLanguage,\n  theme\n}) => {\n  _s2();\n  const [targetLanguage, setTargetLanguage] = useState(supportedConversionLangs[0]); // Default to first available\n  const isDark = theme === 'dark';\n  const modalBg = isDark ? 'bg-gray-800' : 'bg-white';\n  const textColor = isDark ? 'text-white' : 'text-gray-900';\n  const selectBg = isDark ? 'bg-gray-700 text-white border-gray-600' : 'bg-white text-gray-900 border-gray-300';\n  const handleConvert = () => {\n    if (targetLanguage && targetLanguage !== currentLanguage) {\n      onConvert(targetLanguage);\n      onClose();\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${modalBg} rounded-xl shadow-2xl w-full max-w-sm p-6 border ${isDark ? 'border-gray-700' : 'border-gray-300'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: `text-2xl font-bold mb-4 ${textColor}`,\n        children: \"\\u2728 Convert Language\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: `mb-4 ${isDark ? 'text-gray-300' : 'text-gray-700'}`,\n        children: [\"Convert code from **\", currentLanguage, \"** to:\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: targetLanguage,\n        onChange: e => setTargetLanguage(e.target.value),\n        className: `w-full p-3 rounded-lg border focus:ring-2 focus:ring-purple-500 focus:outline-none ${selectBg}`,\n        children: supportedConversionLangs.filter(lang => lang !== currentLanguage).map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: lang,\n          children: lang\n        }, lang, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 flex justify-end space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: `py-2 px-4 rounded-lg font-semibold ${isDark ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-200 hover:bg-gray-300 text-gray-800'}`,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleConvert,\n          className: \"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200\",\n          disabled: !targetLanguage || targetLanguage === currentLanguage,\n          children: [\"Convert to \", targetLanguage]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 337,\n    columnNumber: 9\n  }, this);\n};\n\n/**\r\n * Custom Modal for Code Generation Prompt\r\n */\n_s2(ConvertCodeModal, \"/SvdoO2qzhMDNTvHOqntx+M46lA=\");\n_c = ConvertCodeModal;\nconst GenerateCodeModal = ({\n  isOpen,\n  onClose,\n  onGenerate,\n  theme\n}) => {\n  _s3();\n  const [prompt, setPrompt] = useState('');\n  const isDark = theme === 'dark';\n  const modalBg = isDark ? 'bg-gray-800' : 'bg-white';\n  const inputBg = isDark ? 'bg-gray-700 text-white' : 'bg-gray-100 text-gray-900';\n  const textColor = isDark ? 'text-white' : 'text-gray-900';\n  const handleGenerate = () => {\n    if (prompt.trim()) {\n      onGenerate(prompt);\n      setPrompt('');\n      onClose();\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${modalBg} rounded-xl shadow-2xl w-full max-w-lg p-6 border ${isDark ? 'border-gray-700' : 'border-gray-300'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: `text-2xl font-bold mb-4 ${textColor}`,\n        children: \"\\u2728 Generate Boilerplate Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: `mb-4 ${isDark ? 'text-gray-300' : 'text-gray-700'}`,\n        children: \"Describe the component, function, or file structure you want to generate.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: \"4\",\n        value: prompt,\n        onChange: e => setPrompt(e.target.value),\n        placeholder: \"E.g., 'A responsive React component with Tailwind CSS that displays a user profile card and handles dark mode state.'\",\n        className: `w-full p-3 rounded-lg resize-none focus:ring-2 focus:ring-green-500 focus:outline-none ${inputBg}`,\n        autoFocus: true,\n        onKeyDown: e => {\n          if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            handleGenerate();\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 flex justify-end space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: `py-2 px-4 rounded-lg font-semibold ${isDark ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-200 hover:bg-gray-300 text-gray-800'}`,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleGenerate,\n          className: \"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200\",\n          disabled: !prompt.trim(),\n          children: \"Generate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 398,\n    columnNumber: 9\n  }, this);\n};\n\n/**\r\n * Language Sidebar Component\r\n */\n_s3(GenerateCodeModal, \"S1lK4b8P240vr4GGWfaaSHACfl0=\");\n_c2 = GenerateCodeModal;\nconst LanguageSidebar = ({\n  selectedLanguage,\n  switchLanguage,\n  theme\n}) => {\n  const isDark = theme === 'dark';\n  const bgColor = isDark ? 'bg-gray-900' : 'bg-gray-100';\n  const borderColor = isDark ? 'border-gray-700' : 'border-gray-300';\n  const itemBg = isDark ? 'bg-gray-800' : 'bg-white';\n  const itemHover = isDark ? 'hover:bg-gray-700' : 'hover:bg-gray-200';\n  const itemText = isDark ? 'text-gray-400' : 'text-gray-600';\n  const selectedBg = isDark ? 'bg-green-700' : 'bg-green-500';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `w-20 ${bgColor} border-r ${borderColor} flex-shrink-0 overflow-y-auto p-1`,\n    children: getLanguageKeys().map(langKey => {\n      const config = LANGUAGE_CONFIGS[langKey];\n      const isSelected = langKey === selectedLanguage;\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => switchLanguage(langKey),\n        className: `w-full p-2 my-1 rounded-lg text-xs transition-colors duration-200 block text-center ${itemText} ${itemBg} ${itemHover} ${isSelected ? `${selectedBg} !text-white shadow-lg` : ''}`,\n        title: config.label,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xl mb-1\",\n          children: config.icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"truncate block\",\n          children: config.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 25\n        }, this)]\n      }, langKey, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 21\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 453,\n    columnNumber: 9\n  }, this);\n};\n\n/**\r\n * Component to handle file management actions (add, delete, rename)\r\n */\n_c3 = LanguageSidebar;\nconst FileManagement = ({\n  files,\n  selectedPath,\n  setSelectedPath,\n  updateFiles,\n  currentProjectId,\n  userId,\n  selectedLanguage,\n  theme\n}) => {\n  _s4();\n  var _LANGUAGE_CONFIGS$sel, _LANGUAGE_CONFIGS$sel2;\n  const [newFileName, setNewFileName] = useState('');\n  const [renamePath, setRenamePath] = useState(null);\n  const isDark = theme === 'dark';\n  const fileText = isDark ? 'text-gray-300' : 'text-gray-700';\n  const fileHoverBg = isDark ? 'hover:bg-gray-700' : 'hover:bg-gray-300';\n  const selectedBg = isDark ? 'bg-green-700/50' : 'bg-green-200';\n  const sidebarBg = isDark ? 'bg-gray-900' : 'bg-gray-100';\n  const fileActionsEnabled = (_LANGUAGE_CONFIGS$sel = LANGUAGE_CONFIGS[selectedLanguage]) === null || _LANGUAGE_CONFIGS$sel === void 0 ? void 0 : _LANGUAGE_CONFIGS$sel.editable;\n\n  // Filter file paths to only show non-hidden ones for the explorer\n  const visiblePaths = useMemo(() => {\n    return Object.keys(files).filter(path => !files[path].hidden).sort();\n  }, [files]);\n\n  // Use window.prompt replacement instead of alert()\n  const alert = message => {\n    console.warn('CipherStudio Alert:', message);\n  };\n  const handleCreate = () => {\n    if (!fileActionsEnabled) {\n      alert('File creation is only supported in editable environments (all languages are now editable, but an internal issue prevents file creation for this language).');\n      return;\n    }\n    if (!newFileName || files[`/${newFileName}`]) return;\n    const path = newFileName.startsWith('/') ? newFileName : `/${newFileName}`;\n    const isFolder = path.endsWith('/');\n    let defaultContent = null;\n    if (!isFolder) {\n      const ext = path.split('.').pop();\n      // Assign some basic default content based on extension\n      if (ext === 'css') {\n        defaultContent = `/* ${path} */\\n`;\n      } else if (ext === 'js' || ext === 'jsx' || ext === 'ts' || ext === 'tsx') {\n        defaultContent = `// ${path} \\n\\nexport default function Component() { return <div>Hello, ${path}</div>; }`;\n      } else if (ext === 'html') {\n        defaultContent = `<!-- ${path} -->\\n<!DOCTYPE html>\\n<html>\\n<body>\\n<h1>Hello HTML</h1>\\n</body>\\n</html>`;\n      } else if (ext === 'py') {\n        defaultContent = `# ${path}\\n\\nprint(\"Hello from new Python file\")\\n`;\n      } else if (ext === 'cpp') {\n        defaultContent = `// ${path}\\n#include <iostream>\\n\\nint main() {\\n  std::cout << \"New C++ File\" << std::endl;\\n  return 0;\\n}`;\n      } else {\n        defaultContent = `// ${path}\\n\\n`;\n      }\n    }\n    updateFiles(prevFiles => ({\n      ...prevFiles,\n      [path]: {\n        code: defaultContent,\n        hidden: isFolder,\n        folder: isFolder\n      }\n    }));\n    setNewFileName('');\n    if (!isFolder) setSelectedPath(path);\n  };\n  const confirmDelete = (path, callback) => {\n    // Use a standard prompt since we can't rely on a custom modal here easily\n    if (window.prompt(`Type \"DELETE\" to confirm deletion of ${path}:`) === 'DELETE') {\n      callback();\n    }\n  };\n  const handleDelete = path => {\n    if (!fileActionsEnabled) {\n      alert('File deletion is only supported in editable environments.');\n      return;\n    }\n    confirmDelete(path, () => {\n      updateFiles(prevFiles => {\n        const newFiles = {\n          ...prevFiles\n        };\n        delete newFiles[path];\n        if (files[path] && files[path].folder) {\n          Object.keys(newFiles).forEach(p => {\n            if (p.startsWith(path)) {\n              delete newFiles[p];\n            }\n          });\n        }\n        if (selectedPath === path) {\n          const remainingPaths = Object.keys(newFiles).filter(p => newFiles[p].code !== null);\n          // Fallback to a sensible default if no file is left\n          setSelectedPath(remainingPaths.length > 0 ? remainingPaths[0] : Object.keys(getLangInitialFiles(selectedLanguage))[0] || '/src/App.js');\n        }\n        return newFiles;\n      });\n    });\n  };\n  const handleRename = oldPath => {\n    if (!fileActionsEnabled) {\n      alert('File renaming is only supported in editable environments.');\n      return;\n    }\n    if (!renamePath || oldPath === renamePath) {\n      setRenamePath(null);\n      return;\n    }\n    const newPath = renamePath.startsWith('/') ? renamePath : `/${renamePath}`;\n    if (files[newPath]) {\n      alert('File or folder already exists.');\n      return;\n    }\n    if (files[oldPath].code === null && !newPath.endsWith('/')) {\n      alert('Cannot rename a folder to a file path. Please add a trailing slash for folders.');\n      return;\n    }\n    updateFiles(prevFiles => {\n      const newFiles = {};\n      Object.keys(prevFiles).forEach(path => {\n        if (path === oldPath) {\n          newFiles[newPath] = prevFiles[path];\n        } else if (path.startsWith(oldPath) && files[oldPath].folder) {\n          const relativePath = path.substring(oldPath.length);\n          newFiles[newPath + relativePath] = prevFiles[path];\n        } else {\n          newFiles[path] = prevFiles[path];\n        }\n      });\n      if (selectedPath === oldPath) setSelectedPath(newPath);\n      setRenamePath(null);\n      return newFiles;\n    });\n  };\n  const FileTree = ({\n    paths\n  }) => {\n    const tree = {};\n    paths.forEach(path => {\n      const parts = path.substring(1).split('/').filter(p => p.length > 0);\n      let current = tree;\n      const fullPathSegments = [];\n      parts.forEach((part, i) => {\n        fullPathSegments.push(part);\n        const currentPath = '/' + fullPathSegments.join('/');\n        if (!current[part]) {\n          const isFile = i === parts.length - 1 && files[path] && files[path].code !== null && !files[path].folder;\n          current[part] = {\n            children: {},\n            path: currentPath,\n            isFile: isFile\n          };\n        }\n        current = current[part].children;\n      });\n    });\n    const renderTree = node => /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"pl-4\",\n      children: Object.keys(node).sort().map(name => {\n        const item = node[name];\n        const path = item.path;\n        const isSelected = path === selectedPath;\n        const isFolder = Object.keys(item.children).length > 0 || files[path] && files[path].folder;\n\n        // Simplified icon logic for non-web languages\n        let icon = isFolder ? 'üìÅ' : 'üìÑ';\n        if (path.endsWith('.js') || path.endsWith('.jsx') || path.endsWith('.ts') || path.endsWith('.tsx')) icon = '‚öõÔ∏è';else if (path.endsWith('.css')) icon = '#';else if (path.endsWith('.py')) icon = 'üêç';else if (path.endsWith('.java')) icon = '‚òï';else if (path.endsWith('.cpp')) icon = 'C++';else if (path.endsWith('.cs')) icon = 'C#';\n        const isRenderableFile = item.isFile || files[path] && files[path].code !== null && !files[path].folder;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: `${fileText} group`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex items-center space-x-2 p-1 rounded transition duration-150 cursor-pointer ${isSelected ? selectedBg : fileHoverBg}`,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs mr-2\",\n              children: icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 33\n            }, this), renamePath === path ? /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: renamePath,\n              onChange: e => setRenamePath(e.target.value),\n              onBlur: () => handleRename(path),\n              onKeyDown: e => {\n                if (e.key === 'Enter') handleRename(path);\n                if (e.key === 'Escape') setRenamePath(null);\n              },\n              className: `${isDark ? 'bg-gray-800 text-white' : 'bg-white text-black'} flex-grow px-1`,\n              autoFocus: true,\n              disabled: !fileActionsEnabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 664,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"flex-grow truncate\",\n              onClick: () => isRenderableFile && setSelectedPath(path),\n              onDoubleClick: () => fileActionsEnabled && setRenamePath(path),\n              children: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 678,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `space-x-1 transition-opacity ${fileActionsEnabled ? 'opacity-0 group-hover:opacity-100' : 'opacity-20'}`,\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDelete(path),\n                className: \"text-red-400 hover:text-red-500 text-xs p-1\",\n                title: \"Delete\",\n                disabled: !fileActionsEnabled,\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 689,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 29\n          }, this), isFolder && Object.keys(item.children).length > 0 && renderTree(item.children)]\n        }, path, true, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 638,\n      columnNumber: 13\n    }, this);\n    return renderTree(tree);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `p-3 text-sm flex flex-col h-full overflow-y-auto ${sidebarBg}`,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: `text-lg font-semibold mb-3 ${isDark ? 'text-white' : 'text-gray-900'} border-b ${isDark ? 'border-gray-700' : 'border-gray-300'} pb-2`,\n      children: [\"Files - (\", selectedLanguage, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 713,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `text-xs mb-2 ${fileActionsEnabled ? 'text-green-400' : 'text-red-400'}`,\n      children: (_LANGUAGE_CONFIGS$sel2 = LANGUAGE_CONFIGS[selectedLanguage]) === null || _LANGUAGE_CONFIGS$sel2 === void 0 ? void 0 : _LANGUAGE_CONFIGS$sel2.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 716,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `mb-4 flex space-x-1`,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"new-file.js or folder/\",\n        value: newFileName,\n        onChange: e => setNewFileName(e.target.value),\n        onKeyDown: e => e.key === 'Enter' && handleCreate(),\n        className: `flex-grow p-2 rounded focus:ring-2 focus:ring-green-500 focus:outline-none ${isDark ? 'bg-gray-800 text-white placeholder-gray-500' : 'bg-white text-gray-900 placeholder-gray-400'}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 722,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCreate,\n        className: \"bg-green-600 hover:bg-green-700 text-white p-2 rounded\",\n        title: \"Create File/Folder\",\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 730,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 721,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow overflow-y-auto\",\n      children: /*#__PURE__*/_jsxDEV(FileTree, {\n        paths: visiblePaths\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 741,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 740,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `mt-4 pt-2 border-t ${isDark ? 'border-gray-700' : 'border-gray-300'} text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'} truncate`,\n      children: [\"User ID: \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-mono\",\n        children: userId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 746,\n        columnNumber: 26\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"block\",\n        children: [\"Project ID: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-mono\",\n          children: (currentProjectId === null || currentProjectId === void 0 ? void 0 : currentProjectId.substring(0, 8)) + '...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 747,\n          columnNumber: 53\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 747,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 745,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 712,\n    columnNumber: 9\n  }, this);\n};\n\n/**\r\n * Toolbar component for project management (New, Save, Load) and AI Tools.\r\n */\n_s4(FileManagement, \"BzvbceoCtXqGkMxdIRhe2bUDufY=\");\n_c4 = FileManagement;\nconst Toolbar = ({\n  currentProjectId,\n  saveProject,\n  newProject,\n  loadProject,\n  loading,\n  message,\n  deleteProject,\n  explainCode,\n  reviewCode,\n  showGenerateModal,\n  showConvertModal,\n  theme,\n  toggleTheme,\n  isAutosaveEnabled,\n  toggleAutosave\n}) => {\n  _s5();\n  const [loadInput, setLoadInput] = useState('');\n  const [projectName, setProjectName] = useState(`Project ${(currentProjectId === null || currentProjectId === void 0 ? void 0 : currentProjectId.substring(0, 8)) || ''}`);\n  const isDark = theme === 'dark';\n  const toolbarBg = isDark ? 'bg-gray-900' : 'bg-gray-200';\n  const toolbarBorder = isDark ? 'border-gray-700' : 'border-gray-300';\n  const textColor = isDark ? 'text-white' : 'text-gray-900';\n  const inputBg = isDark ? 'bg-gray-800 text-white' : 'bg-white text-gray-900';\n  useEffect(() => {\n    setProjectName(`Project ${(currentProjectId === null || currentProjectId === void 0 ? void 0 : currentProjectId.substring(0, 8)) || ''}`);\n  }, [currentProjectId]);\n  const handleSave = () => {\n    if (projectName) {\n      saveProject(projectName);\n    } else {\n      console.warn('CipherStudio Alert: Please enter a project name.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `p-3 ${toolbarBg} border-b ${toolbarBorder} flex items-center justify-between ${textColor} shadow-lg flex-wrap gap-2`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-bold text-green-500\",\n        children: \"CipherStudio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 781,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: projectName,\n        onChange: e => setProjectName(e.target.value),\n        className: `${inputBg} p-1 rounded text-sm w-48 focus:ring-green-500 focus:ring-1`,\n        placeholder: \"Project Name\",\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 783,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 780,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-4 flex-grow justify-end min-w-[500px]\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-yellow-500 min-w-[150px] text-right\",\n        children: loading ? 'Processing...' : message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 795,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleTheme,\n        className: `p-2 rounded transition duration-200 ${isDark ? 'bg-gray-800 hover:bg-gray-700' : 'bg-white hover:bg-gray-300'} ${isDark ? 'text-yellow-400' : 'text-gray-800'}`,\n        title: isDark ? \"Switch to Light Mode\" : \"Switch to Dark Mode\",\n        children: isDark ? '‚òÄÔ∏è' : 'üåô'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 800,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleAutosave,\n        className: `py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1 font-semibold ${isAutosaveEnabled ? 'bg-indigo-600 hover:bg-indigo-700 text-white' : 'bg-gray-500 hover:bg-gray-600 text-white'}`,\n        title: isAutosaveEnabled ? \"Autosave is ON (every 10s)\" : \"Autosave is OFF\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg\",\n          children: \"\\uD83D\\uDCBE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 814,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Autosave \", isAutosaveEnabled ? 'ON' : 'OFF']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 815,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 809,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: explainCode,\n        className: \"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\",\n        disabled: loading,\n        title: \"Get a plain-language explanation of the current file's code.\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg\",\n          children: \"\\u2728\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 825,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Explain Code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 826,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 819,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: reviewCode,\n        className: \"bg-orange-600 hover:bg-orange-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\",\n        disabled: loading,\n        title: \"Review the code and suggest refactoring or improvements.\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg\",\n          children: \"\\u2728\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 834,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Review & Refactor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 835,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 828,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: showGenerateModal,\n        className: \"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\",\n        disabled: loading,\n        title: \"Generate boilerplate code from a natural language description.\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg\",\n          children: \"\\u2728\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 843,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Generate Code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 844,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 837,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: showConvertModal,\n        className: \"bg-pink-600 hover:bg-pink-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\",\n        disabled: loading,\n        title: \"Convert code from the current language to another programming language.\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg\",\n          children: \"\\u2728\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 852,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Convert Language\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 853,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 846,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: newProject,\n        className: \"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\",\n        disabled: loading,\n        children: \"New Project\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 857,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSave,\n        className: \"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\",\n        disabled: loading,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 864,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 793,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-2 mt-2 md:mt-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: loadInput,\n        onChange: e => setLoadInput(e.target.value),\n        className: `${inputBg} p-1 rounded text-sm w-32 focus:ring-green-500 focus:ring-1`,\n        placeholder: \"Project ID to load\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 875,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => loadProject(loadInput),\n        className: \"bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\",\n        disabled: loading || !loadInput,\n        children: \"Load\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 882,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => deleteProject(loadInput),\n        className: \"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\",\n        disabled: loading || !loadInput,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 889,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 874,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 779,\n    columnNumber: 9\n  }, this);\n};\n\n/**\r\n * Custom Code Editor wrapper (using native textarea)\r\n */\n_s5(Toolbar, \"q8SUL7fj7/1DfpZbNkWuVb7VeuQ=\");\n_c5 = Toolbar;\nconst CipherEditor = ({\n  selectedPath,\n  fileContent,\n  updateFileContent,\n  selectedLanguage,\n  theme\n}) => {\n  _s6();\n  var _LANGUAGE_CONFIGS$sel3;\n  // Determine the language for syntax highlighting (visually only)\n  const language = useMemo(() => {\n    if (selectedPath.endsWith('.js') || selectedPath.endsWith('.jsx')) return 'javascript';\n    if (selectedPath.endsWith('.ts') || selectedPath.endsWith('.tsx')) return 'typescript';\n    if (selectedPath.endsWith('.css')) return 'css';\n    if (selectedPath.endsWith('.html')) return 'html';\n    return 'text';\n  }, [selectedPath]);\n\n  // All languages are now editable\n  const isEditable = (_LANGUAGE_CONFIGS$sel3 = LANGUAGE_CONFIGS[selectedLanguage]) === null || _LANGUAGE_CONFIGS$sel3 === void 0 ? void 0 : _LANGUAGE_CONFIGS$sel3.editable;\n  const isDark = theme === 'dark';\n  const editorBg = isDark ? 'bg-gray-800' : 'bg-white';\n  const editorText = isDark ? 'text-white' : 'text-gray-900';\n  const tabBg = isDark ? 'bg-gray-900' : 'bg-gray-200';\n  const tabItemBg = isDark ? 'bg-gray-700' : 'bg-gray-300';\n  const tabBorder = isDark ? 'border-gray-700' : 'border-gray-300';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex flex-col h-full ${editorBg} ${editorText} text-sm relative`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `p-2 ${tabBg} border-b ${tabBorder} text-xs flex items-center justify-between`,\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `${tabItemBg} px-3 py-1 rounded-t border-b-2 border-green-500 flex items-center`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs mr-2\",\n          children: language === 'javascript' || language === 'typescript' ? '‚öõÔ∏è' : language === 'css' ? '#' : 'üìÑ'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 928,\n          columnNumber: 21\n        }, this), selectedPath]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 927,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 926,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-1 overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: fileContent || '',\n        onChange: e => isEditable && updateFileContent(selectedPath, e.target.value),\n        spellCheck: \"false\"\n        // Removed the opacity/cursor-not-allowed classes as the editor is always active now\n        ,\n        className: `flex-1 resize-none font-mono text-sm p-4 h-full outline-none leading-relaxed ${editorBg} ${editorText}`\n        // Disabled prop is now effectively always false\n      }, selectedPath, false, {\n        fileName: _jsxFileName,\n        lineNumber: 938,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 937,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: \"true\",\n      children: `\n                .line-number {\n                    display: inline-block;\n                    width: 30px;\n                    text-align: right;\n                    margin-right: 10px;\n                    color: ${isDark ? '#555' : '#aaa'};\n                }\n            `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 949,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 924,\n    columnNumber: 9\n  }, this);\n};\n\n// --- REACT LIVE RENDERING SIMULATION ---\n\n/**\r\n * Renders a static version of the starter React component. \r\n * THIS IS THE FIX. We stop trying to compile JSX dynamically and just show the static starter app.\r\n */\n_s6(CipherEditor, \"247O33VmPsbdEsI0sQHcevkpoIA=\");\n_c6 = CipherEditor;\nconst StaticReactPreview = /*#__PURE__*/_s7(/*#__PURE__*/React.memo(_c7 = _s7(({\n  theme\n}) => {\n  _s7();\n  const previewBg = theme === 'dark' ? 'bg-gray-900' : 'bg-white';\n  const previewText = theme === 'dark' ? 'text-white' : 'text-gray-900';\n\n  // Since we cannot compile the user's JSX, we render a static pre-compiled component instead.\n  // The user's code changes will NOT affect this live, but it removes the critical JSX error.\n  const [count, setCount] = useState(0);\n  const increment = () => {\n    setCount(c => c + 1);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex flex-col items-center justify-center p-4 min-h-full w-full ${previewBg} ${previewText}`,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold mb-4 text-green-500\",\n      children: \"CipherStudio Static React Preview\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 982,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xl mb-6\",\n      children: [\"Count: \", count]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 983,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: increment,\n      className: \"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md\",\n      children: \"Increment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 984,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-8 text-sm text-gray-500\",\n      children: \"**Note:** Live updates are disabled to prevent compilation errors.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 987,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 981,\n    columnNumber: 9\n  }, this);\n}, \"oDgYfYHkD9Wkv4hrAPCkI/ev3YU=\")), \"oDgYfYHkD9Wkv4hrAPCkI/ev3YU=\");\n_c8 = StaticReactPreview;\nStaticReactPreview.displayName = 'StaticReactPreview';\n\n/**\r\n * Logic to get Simulated Terminal Output from Gemini\r\n */\nconst useTerminalSimulation = (selectedLanguage, codeDumpContent, isLiveLang, callGeminiApi) => {\n  _s8();\n  const [simulatedOutput, setSimulatedOutput] = useState(null);\n  const [simLoading, setSimLoading] = useState(false);\n\n  // Debounce the call to avoid hitting the API too frequently while typing\n  const debouncedCallGemini = useCallback((code, lang) => {\n    if (!code || isLiveLang) return; // Only simulate non-live code\n\n    // Clear previous timeout if it exists\n    const handler = setTimeout(() => {\n      const systemInstruction = `You are a terminal emulator for ${lang}. Given the user's code, execute it mentally and provide the console output. Respond with ONLY the expected terminal output text. Do not provide code blocks, explanations, or commentary. If the code is complex, multi-file, or requires user input, respond with \"Simulation too complex or interactive. Cannot determine output.\"`;\n      setSimLoading(true);\n      callGeminiApi(`Simulate the console output for the following ${lang} code:\\n\\n\\`\\`\\`${lang}\\n${code}\\n\\`\\`\\``, systemInstruction, 'Terminal Simulation').then(result => {\n        // Since callGeminiApi already sets aiOutput, we just need the text\n        setSimulatedOutput(result);\n        setSimLoading(false);\n      }).catch(e => {\n        setSimulatedOutput(`[Simulation Error] Failed to contact AI helper: ${e.message}`);\n        setSimLoading(false);\n      });\n    }, 1500); // 1.5 second debounce\n\n    return () => clearTimeout(handler);\n  }, [isLiveLang, callGeminiApi]);\n\n  // Effect to trigger simulation when code changes\n  useEffect(() => {\n    if (!isLiveLang && codeDumpContent) {\n      // Note: We need to use a proxy call to callGeminiApi here\n      // This is complex due to hooks, so we'll simplify and use a flag/state\n      // to signal the main component to call the API instead of calling it here.\n\n      // For now, we will simply rely on the debounced function, but we need\n      // a mechanism to handle the loading state/output outside the hook.\n      // Since we need to use the full `callGeminiApi`, we rely on it being passed down.\n\n      return debouncedCallGemini(codeDumpContent, selectedLanguage);\n    } else {\n      setSimulatedOutput(null);\n    }\n  }, [selectedLanguage, codeDumpContent, isLiveLang, debouncedCallGemini]);\n  return {\n    simulatedOutput,\n    simLoading\n  };\n};\n\n/**\r\n * Preview Panel (Handles HTML rendering and Code Dumping)\r\n */\n_s8(useTerminalSimulation, \"K0/zEYXgH6OtSTse6XTEiOPhGVM=\");\nconst CipherPreview = ({\n  files,\n  selectedLanguage,\n  theme,\n  callGeminiApi\n}) => {\n  _s9();\n  var _files$SrcAppJs, _files$IndexHtml;\n  const isReact = selectedLanguage === 'React.js';\n  const isHTML = selectedLanguage === 'HTML';\n  const isSimulated = !isReact && !isHTML; // Non-web languages require simulation\n\n  const isDark = theme === 'dark';\n  const panelBg = isDark ? 'bg-gray-800' : 'bg-white';\n  const codeBg = isDark ? 'bg-gray-700' : 'bg-gray-100';\n  const codeText = isDark ? 'text-gray-100' : 'text-gray-800';\n\n  // 1. Get relevant file content\n  const appJsCode = ((_files$SrcAppJs = files['/src/App.js']) === null || _files$SrcAppJs === void 0 ? void 0 : _files$SrcAppJs.code) || '';\n  const mainHtmlContent = ((_files$IndexHtml = files['/index.html']) === null || _files$IndexHtml === void 0 ? void 0 : _files$IndexHtml.code) || '';\n\n  // 2. Get content for code dump (main entry point)\n  const codeDumpContent = useMemo(() => {\n    var _files$entryPath;\n    const entryPath = Object.keys(files).find(p => files[p].entry) || Object.keys(files).sort()[0];\n    return ((_files$entryPath = files[entryPath]) === null || _files$entryPath === void 0 ? void 0 : _files$entryPath.code) || '// Preview content not available.';\n  }, [files]);\n\n  // --- NEW: LLM-based Terminal Output Simulation ---\n  const [simulatedOutput, setSimulatedOutput] = useState(null);\n  const [simLoading, setSimLoading] = useState(false);\n  const [lastSimulatedCode, setLastSimulatedCode] = useState('');\n\n  // Debounced function to call the AI for execution simulation\n  const debouncedSimulate = useCallback((code, lang) => {\n    setSimLoading(true);\n    setSimulatedOutput('Thinking...');\n    const systemInstruction = `You are a terminal emulator for ${lang}. Given the user's code, execute it mentally and provide the console output. Respond with ONLY the expected terminal output text. Do not provide code blocks, explanations, or commentary. If the code is complex, multi-file, or requires user input, respond with \"Simulation too complex or interactive. Cannot determine output.\"`;\n    callGeminiApi(`Simulate the console output for the following ${lang} code:\\n\\n\\`\\`\\`${lang}\\n${code}\\n\\`\\`\\``, systemInstruction, 'Terminal Simulation').then(result => {\n      // result is the full text output from the API\n      setSimulatedOutput(result);\n      setSimLoading(false);\n      setLastSimulatedCode(code);\n    }).catch(e => {\n      setSimulatedOutput(`[Simulation Error] Failed to contact AI helper: ${e.message}`);\n      setSimLoading(false);\n    });\n  }, [callGeminiApi]);\n\n  // Effect to trigger simulation when code changes (using debounce)\n  useEffect(() => {\n    if (!isSimulated) return; // Skip for React/HTML\n\n    // This is a simple deep-equality check for large strings to prevent unnecessary calls\n    if (codeDumpContent === lastSimulatedCode) return;\n    const handler = setTimeout(() => {\n      if (codeDumpContent.trim().length > 5) {\n        debouncedSimulate(codeDumpContent, selectedLanguage);\n      } else {\n        setSimulatedOutput('');\n        setLastSimulatedCode('');\n      }\n    }, 1500);\n    return () => clearTimeout(handler);\n  }, [codeDumpContent, selectedLanguage, isSimulated, debouncedSimulate, lastSimulatedCode]);\n  // --- END: LLM-based Terminal Output Simulation ---\n\n  let PreviewContent;\n  let previewTitle;\n  let previewWarning;\n  if (isReact) {\n    // ** STATIC REACT PREVIEW (FIX) **\n    PreviewContent = /*#__PURE__*/_jsxDEV(StaticReactPreview, {\n      theme: theme\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1129,\n      columnNumber: 26\n    }, this);\n    previewTitle = 'Static React App Output';\n    previewWarning = 'Live updates are disabled.';\n  } else if (isHTML) {\n    // ** LIVE HTML PREVIEW **\n    PreviewContent = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-full overflow-auto p-4\",\n      dangerouslySetInnerHTML: {\n        __html: mainHtmlContent\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1135,\n      columnNumber: 13\n    }, this);\n    previewTitle = 'Live HTML Output';\n    previewWarning = 'Rendering raw HTML content.';\n  } else {\n    // ** TERMINAL OUTPUT SIMULATION (NEW) **\n    PreviewContent = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `absolute inset-0 ${codeBg} p-4 overflow-auto rounded-lg shadow-inner flex flex-col`,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: `text-lg font-bold mb-2 ${isDark ? 'text-white' : 'text-gray-900'}`,\n        children: \"Terminal Output Simulation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1146,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-yellow-500 mb-4 text-xs\",\n        children: \"**NOTE:** Live execution is not available. Output is simulated by the Gemini AI helper.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex-1 p-2 ${isDark ? 'bg-black text-green-400' : 'bg-gray-900 text-green-300'} rounded-lg font-mono text-sm overflow-auto`,\n        children: simLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center text-yellow-400\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-400 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1156,\n            columnNumber: 29\n          }, this), \"Compiling and Running...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1155,\n          columnNumber: 26\n        }, this) : simulatedOutput || `> Ready to simulate ${selectedLanguage} code. Start typing to see the output here.`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1153,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1145,\n      columnNumber: 13\n    }, this);\n    previewTitle = 'Compiler Output Simulation';\n    previewWarning = `Simulated by AI for ${selectedLanguage}`;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `p-2 ${isDark ? 'bg-gray-900 border-gray-700' : 'bg-gray-200 border-gray-300'} border-b text-gray-400 text-xs flex justify-between`,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: previewTitle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1173,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: isReact || isHTML ? 'text-green-500' : 'text-yellow-500',\n        children: previewWarning\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1174,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1172,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex-1 ${panelBg} p-0 overflow-auto text-gray-800 font-mono text-sm relative`,\n      children: PreviewContent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1177,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1171,\n    columnNumber: 9\n  }, this);\n};\n\n/**\r\n * Dedicated panel to display Gemini LLM responses.\r\n */\n_s9(CipherPreview, \"8O8SBlJrU+vUeLRYTf2NK5hcTh0=\");\n_c9 = CipherPreview;\nconst AiOutputPanel = ({\n  aiOutput,\n  aiLoading,\n  aiToolMessage,\n  theme\n}) => {\n  const isDark = theme === 'dark';\n  const panelBg = isDark ? 'bg-gray-700' : 'bg-gray-100';\n  const text = isDark ? 'text-gray-100' : 'text-gray-900';\n  const tabBg = isDark ? 'bg-gray-900' : 'bg-gray-200';\n  const tabBorder = isDark ? 'border-gray-700' : 'border-gray-300';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `p-2 ${tabBg} border-b ${tabBorder} text-gray-400 text-xs flex justify-between`,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u2728 AI Assistant Console\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1199,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-purple-400\",\n        children: aiToolMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1200,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1198,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex-1 ${panelBg} p-4 overflow-auto relative`,\n      children: aiLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-full text-purple-500\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1206,\n          columnNumber: 25\n        }, this), \"Generating AI Response...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1205,\n        columnNumber: 21\n      }, this) : aiOutput ? /*#__PURE__*/_jsxDEV(\"pre\", {\n        className: `whitespace-pre-wrap font-mono text-sm leading-relaxed ${text}`,\n        children: aiOutput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1210,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-500 text-center p-10\",\n        children: \"Use the \\u2728 buttons in the toolbar to explain or review your code.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1214,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1203,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1197,\n    columnNumber: 9\n  }, this);\n};\n\n/**\r\n * Main application component for CipherStudio IDE.\r\n */\n_c0 = AiOutputPanel;\nconst App = () => {\n  _s0();\n  var _currentFiles$selecte;\n  // Theme State\n  const [theme, setTheme] = useState('dark');\n  const toggleTheme = useCallback(() => {\n    setTheme(prev => prev === 'dark' ? 'light' : 'dark');\n  }, []);\n\n  // 1. Project Management Hook\n  const {\n    currentFiles,\n    setCurrentFiles,\n    selectedPath,\n    setSelectedPath,\n    currentProjectId,\n    userId,\n    isAuthReady,\n    loading,\n    message,\n    updateFileContent,\n    saveProject,\n    loadProject,\n    newProject,\n    deleteProject,\n    selectedLanguage,\n    switchLanguage,\n    isAutosaveEnabled,\n    setIsAutosaveEnabled\n  } = useProjectManager(db, auth);\n  const toggleAutosave = useCallback(() => {\n    setIsAutosaveEnabled(prev => !prev);\n  }, [setIsAutosaveEnabled]);\n\n  // 2. AI Tool State and Logic\n  const [aiOutput, setAiOutput] = useState(null);\n  const [aiLoading, setAiLoading] = useState(false);\n  const [aiToolMessage, setAiToolMessage] = useState('');\n  const [activeRightPanel, setActiveRightPanel] = useState('preview');\n  const [isGenerateModalOpen, setIsGenerateModalOpen] = useState(false);\n  const [isConvertModalOpen, setIsConvertModalOpen] = useState(false);\n\n  // Get the content of the currently selected file for the editor\n  const activeFileContent = ((_currentFiles$selecte = currentFiles[selectedPath]) === null || _currentFiles$selecte === void 0 ? void 0 : _currentFiles$selecte.code) || '// File not found or is a folder.';\n\n  // Get the content of the \"main\" file for the simulated preview\n  const previewFiles = useMemo(() => {\n    // Pass the entire file map for React/HTML to look up necessary files\n    return currentFiles;\n  }, [currentFiles]);\n  const callGeminiApi = useCallback(async (prompt, systemInstruction, toolName) => {\n    setAiLoading(true);\n    // Note: We deliberately DO NOT reset aiOutput/activeRightPanel here \n    // to allow simultaneous calls (e.g., Terminal Simulation and an explicit AI Tool).\n    // The individual components manage their own loading/output states.\n\n    const apiKey = \"\";\n    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;\n    const payload = {\n      contents: [{\n        parts: [{\n          text: prompt\n        }]\n      }],\n      systemInstruction: {\n        parts: [{\n          text: systemInstruction\n        }]\n      }\n    };\n    let attempts = 0;\n    const maxAttempts = 3;\n    let lastError = null;\n    while (attempts < maxAttempts) {\n      try {\n        var _result$candidates, _result$candidates$, _result$candidates$$c, _result$candidates$$c2, _result$candidates$$c3;\n        const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(payload)\n        });\n        if (!response.ok) {\n          throw new Error(`API returned status ${response.status}`);\n        }\n        const result = await response.json();\n        const text = ((_result$candidates = result.candidates) === null || _result$candidates === void 0 ? void 0 : (_result$candidates$ = _result$candidates[0]) === null || _result$candidates$ === void 0 ? void 0 : (_result$candidates$$c = _result$candidates$.content) === null || _result$candidates$$c === void 0 ? void 0 : (_result$candidates$$c2 = _result$candidates$$c.parts) === null || _result$candidates$$c2 === void 0 ? void 0 : (_result$candidates$$c3 = _result$candidates$$c2[0]) === null || _result$candidates$$c3 === void 0 ? void 0 : _result$candidates$$c3.text) || \"Could not generate content.\";\n\n        // Only reset the main AI tool panel state if it was an explicit tool call\n        if (toolName !== 'Terminal Simulation') {\n          setAiLoading(false);\n          setAiOutput(text);\n          setAiToolMessage(`Output for ${toolName} on ${selectedPath}`);\n        }\n        return text;\n      } catch (error) {\n        lastError = error;\n        attempts++;\n        const delay = Math.pow(2, attempts) * 1000;\n        console.warn(`Attempt ${attempts} failed. Retrying in ${delay / 1000}s...`, error);\n        if (attempts < maxAttempts) {\n          await new Promise(resolve => setTimeout(resolve, delay));\n        }\n      }\n    }\n    const finalError = `Failed to get a response after ${maxAttempts} attempts. Error: ${lastError.message || 'Unknown error'}`;\n    if (toolName !== 'Terminal Simulation') {\n      setAiLoading(false);\n      setAiOutput(finalError);\n      setAiToolMessage(`Failed to run ${toolName}`);\n    }\n    throw new Error(finalError);\n  }, [selectedPath]);\n  const explainCode = useCallback(async () => {\n    const systemInstruction = `You are a helpful programming tutor. Your task is to analyze the provided code snippet written in ${selectedLanguage} and explain its purpose, key components, and function flow in clear, easy-to-understand language. Focus on the context (${selectedLanguage}/${selectedPath}) and be concise.`;\n    const prompt = `Explain the following code from file ${selectedPath}:\\n\\n\\`\\`\\`${activeFileContent}\\`\\`\\``;\n    await callGeminiApi(prompt, systemInstruction, 'Code Explanation');\n  }, [activeFileContent, selectedPath, selectedLanguage, callGeminiApi]);\n  const reviewCode = useCallback(async () => {\n    const systemInstruction = `You are an expert code reviewer specializing in modern ${selectedLanguage} and software best practices. Analyze the provided code for potential improvements, bugs, or refactoring suggestions. Your response should be structured with markdown bullet points and code examples where applicable. If no issues are found, state \"Code looks great! Ready for commit.\"`;\n    const prompt = `Review the following code from file ${selectedPath} in ${selectedLanguage} and suggest improvements:\\n\\n\\`\\`\\`${activeFileContent}\\`\\`\\``;\n    await callGeminiApi(prompt, systemInstruction, 'Code Review');\n  }, [activeFileContent, selectedPath, selectedLanguage, callGeminiApi]);\n  const generateCode = useCallback(async description => {\n    const systemInstruction = `You are a top-tier software engineer specializing in ${selectedLanguage}. Generate a complete, self-contained code snippet based on the user's description. Enclose the code in a single markdown code block (e.g., \\`\\`\\`${selectedLanguage}...\\`\\`\\`). Do not include any text outside the markdown code block.`;\n    const prompt = `Generate code for the following in ${selectedLanguage}, suitable for file ${selectedPath}: ${description}`;\n    await callGeminiApi(prompt, systemInstruction, 'Code Generation');\n  }, [selectedPath, selectedLanguage, callGeminiApi]);\n  const convertCode = useCallback(async targetLang => {\n    const systemInstruction = `You are an expert code translator. Your task is to accurately convert the provided code from ${selectedLanguage} to ${targetLang}. The output must contain ONLY the converted code snippet, enclosed in a single markdown code block (e.g., \\`\\`\\`${targetLang}...\\`\\`\\`). Do not include any explanatory text or commentary outside the markdown block.`;\n    const prompt = `Convert the following code from ${selectedLanguage} to ${targetLang}:\\n\\n\\`\\`\\`${activeFileContent}\\`\\`\\``;\n    await callGeminiApi(prompt, systemInstruction, `Code Conversion to ${targetLang}`);\n  }, [activeFileContent, selectedLanguage, callGeminiApi]);\n\n  // Effect to reset AI panel when file changes\n  useEffect(() => {\n    if (activeRightPanel === 'ai_tools' && !aiLoading) {\n      setAiOutput(null);\n      setAiToolMessage('');\n    }\n  }, [selectedPath, activeRightPanel, aiLoading]);\n\n  // Handle initial loading state\n  if (!isAuthReady) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-screen w-full bg-gray-900 text-white\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Initializing CipherStudio and connecting to Persistence...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1383,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1382,\n      columnNumber: 13\n    }, this);\n  }\n  const mainBg = theme === 'dark' ? 'bg-gray-800' : 'bg-gray-200';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex flex-col h-screen w-full font-sans ${mainBg} ${theme}`,\n    children: [/*#__PURE__*/_jsxDEV(GenerateCodeModal, {\n      isOpen: isGenerateModalOpen,\n      onClose: () => setIsGenerateModalOpen(false),\n      onGenerate: generateCode,\n      theme: theme\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1393,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ConvertCodeModal, {\n      isOpen: isConvertModalOpen,\n      onClose: () => setIsConvertModalOpen(false),\n      onConvert: convertCode,\n      currentLanguage: selectedLanguage,\n      theme: theme\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1399,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Toolbar, {\n      currentProjectId: currentProjectId,\n      saveProject: saveProject,\n      loadProject: loadProject,\n      newProject: newProject,\n      deleteProject: deleteProject,\n      loading: loading || aiLoading,\n      message: message,\n      explainCode: explainCode,\n      reviewCode: reviewCode,\n      showGenerateModal: () => setIsGenerateModalOpen(true),\n      showConvertModal: () => setIsConvertModalOpen(true),\n      theme: theme,\n      toggleTheme: toggleTheme,\n      isAutosaveEnabled: isAutosaveEnabled,\n      toggleAutosave: toggleAutosave\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1408,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-1 overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(LanguageSidebar, {\n        selectedLanguage: selectedLanguage,\n        switchLanguage: switchLanguage,\n        theme: theme\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1428,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-64 flex-shrink-0 overflow-y-auto\",\n        children: /*#__PURE__*/_jsxDEV(FileManagement, {\n          files: currentFiles,\n          selectedPath: selectedPath,\n          setSelectedPath: setSelectedPath,\n          updateFiles: setCurrentFiles,\n          currentProjectId: currentProjectId,\n          userId: userId,\n          selectedLanguage: selectedLanguage,\n          theme: theme\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1436,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1435,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-hidden flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 h-full border-r border-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(CipherEditor, {\n            selectedPath: selectedPath,\n            fileContent: activeFileContent,\n            updateFileContent: updateFileContent,\n            selectedLanguage: selectedLanguage,\n            theme: theme\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1452,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1451,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 h-full flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex ${theme === 'dark' ? 'bg-gray-900 border-gray-700' : 'bg-gray-200 border-gray-300'} border-b`,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveRightPanel('preview'),\n              className: `px-4 py-2 text-sm font-medium transition-colors duration-200 ${activeRightPanel === 'preview' ? `${theme === 'dark' ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-900'} border-b-2 border-green-500` : `${theme === 'dark' ? 'text-gray-400 hover:bg-gray-800' : 'text-gray-600 hover:bg-gray-300'}`}`,\n              children: \"Preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1465,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveRightPanel('ai_tools'),\n              className: `px-4 py-2 text-sm font-medium transition-colors duration-200 flex items-center ${activeRightPanel === 'ai_tools' ? `${theme === 'dark' ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-900'} border-b-2 border-purple-500` : `${theme === 'dark' ? 'text-gray-400 hover:bg-gray-800' : 'text-gray-600 hover:bg-gray-300'}`}`,\n              children: \"\\u2728 AI Tools\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1475,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1464,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: activeRightPanel === 'preview' ? /*#__PURE__*/_jsxDEV(CipherPreview, {\n              files: previewFiles,\n              selectedLanguage: selectedLanguage,\n              theme: theme,\n              callGeminiApi: callGeminiApi\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1490,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(AiOutputPanel, {\n              aiOutput: aiOutput,\n              aiLoading: aiLoading,\n              aiToolMessage: aiToolMessage,\n              theme: theme\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1497,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1488,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1462,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1449,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1426,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1391,\n    columnNumber: 9\n  }, this);\n};\n_s0(App, \"baRDt8nk3nljM2nnq9FCaKZcsJk=\", false, function () {\n  return [useProjectManager];\n});\n_c1 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1;\n$RefreshReg$(_c, \"ConvertCodeModal\");\n$RefreshReg$(_c2, \"GenerateCodeModal\");\n$RefreshReg$(_c3, \"LanguageSidebar\");\n$RefreshReg$(_c4, \"FileManagement\");\n$RefreshReg$(_c5, \"Toolbar\");\n$RefreshReg$(_c6, \"CipherEditor\");\n$RefreshReg$(_c7, \"StaticReactPreview$React.memo\");\n$RefreshReg$(_c8, \"StaticReactPreview\");\n$RefreshReg$(_c9, \"CipherPreview\");\n$RefreshReg$(_c0, \"AiOutputPanel\");\n$RefreshReg$(_c1, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","getAuth","signInWithCustomToken","signInAnonymously","initializeApp","getFirestore","doc","setDoc","getDoc","collection","getDocs","deleteDoc","query","where","jsxDEV","_jsxDEV","appId","__app_id","firebaseConfig","__firebase_config","JSON","parse","initialAuthToken","__initial_auth_token","firebaseApp","db","auth","error","console","LANGUAGE_CONFIGS","icon","label","editable","files","code","hidden","entry","description","getLangInitialFiles","language","_LANGUAGE_CONFIGS$lan","getLanguageKeys","Object","keys","sort","supportedConversionLangs","filter","lang","useProjectManager","dbInstance","authInstance","_s","selectedLanguage","setSelectedLanguage","currentFiles","setCurrentFiles","selectedPath","setSelectedPath","currentProjectId","setCurrentProjectId","userId","setUserId","isAuthReady","setIsAuthReady","loading","setLoading","message","setMessage","isAutosaveEnabled","setIsAutosaveEnabled","authenticate","_authInstance$current","currentUser","uid","crypto","randomUUID","_authInstance$current2","getProjectPath","id","updateFileContent","path","newCode","prevFiles","switchLanguage","newFiles","newPath","find","p","saveProject","name","projectDocRef","projectData","createdAt","Date","toISOString","updatedAt","merge","setTimeout","loadProject","projectId","docSnap","exists","data","loadedLanguage","newProject","deleteProject","intervalId","setInterval","autosave","clearInterval","ConvertCodeModal","isOpen","onClose","onConvert","currentLanguage","theme","_s2","targetLanguage","setTargetLanguage","isDark","modalBg","textColor","selectBg","handleConvert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","map","onClick","disabled","_c","GenerateCodeModal","onGenerate","_s3","prompt","setPrompt","inputBg","handleGenerate","trim","rows","placeholder","autoFocus","onKeyDown","key","shiftKey","preventDefault","_c2","LanguageSidebar","bgColor","borderColor","itemBg","itemHover","itemText","selectedBg","langKey","config","isSelected","title","_c3","FileManagement","updateFiles","_s4","_LANGUAGE_CONFIGS$sel","_LANGUAGE_CONFIGS$sel2","newFileName","setNewFileName","renamePath","setRenamePath","fileText","fileHoverBg","sidebarBg","fileActionsEnabled","visiblePaths","alert","warn","handleCreate","startsWith","isFolder","endsWith","defaultContent","ext","split","pop","folder","confirmDelete","callback","window","handleDelete","forEach","remainingPaths","length","handleRename","oldPath","relativePath","substring","FileTree","paths","tree","parts","current","fullPathSegments","part","i","push","currentPath","join","isFile","renderTree","node","item","isRenderableFile","type","onBlur","onDoubleClick","_c4","Toolbar","explainCode","reviewCode","showGenerateModal","showConvertModal","toggleTheme","toggleAutosave","_s5","loadInput","setLoadInput","projectName","setProjectName","toolbarBg","toolbarBorder","handleSave","_c5","CipherEditor","fileContent","_s6","_LANGUAGE_CONFIGS$sel3","isEditable","editorBg","editorText","tabBg","tabItemBg","tabBorder","spellCheck","jsx","_c6","StaticReactPreview","_s7","memo","_c7","previewBg","previewText","count","setCount","increment","c","_c8","displayName","useTerminalSimulation","codeDumpContent","isLiveLang","callGeminiApi","_s8","simulatedOutput","setSimulatedOutput","simLoading","setSimLoading","debouncedCallGemini","handler","systemInstruction","then","result","catch","clearTimeout","CipherPreview","_s9","_files$SrcAppJs","_files$IndexHtml","isReact","isHTML","isSimulated","panelBg","codeBg","codeText","appJsCode","mainHtmlContent","_files$entryPath","entryPath","lastSimulatedCode","setLastSimulatedCode","debouncedSimulate","PreviewContent","previewTitle","previewWarning","dangerouslySetInnerHTML","__html","_c9","AiOutputPanel","aiOutput","aiLoading","aiToolMessage","text","_c0","App","_s0","_currentFiles$selecte","setTheme","prev","setAiOutput","setAiLoading","setAiToolMessage","activeRightPanel","setActiveRightPanel","isGenerateModalOpen","setIsGenerateModalOpen","isConvertModalOpen","setIsConvertModalOpen","activeFileContent","previewFiles","toolName","apiKey","apiUrl","payload","contents","attempts","maxAttempts","lastError","_result$candidates","_result$candidates$","_result$candidates$$c","_result$candidates$$c2","_result$candidates$$c3","response","fetch","method","headers","body","stringify","ok","Error","status","json","candidates","content","delay","Math","pow","Promise","resolve","finalError","generateCode","convertCode","targetLang","mainBg","_c1","$RefreshReg$"],"sources":["D:/All Downloaded files/CypherschoolAssignment/CypherStudio/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { getAuth, signInWithCustomToken, signInAnonymously } from 'firebase/auth';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getFirestore, doc, setDoc, getDoc, collection, getDocs, deleteDoc, query, where } from 'firebase/firestore';\r\n\r\n// --- Global Variable Setup ---\r\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\r\nconst firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;\r\n// Fix for global variable access:\r\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\r\n\r\n// --- Firebase Initialization ---\r\nlet firebaseApp, db, auth;\r\n\r\nif (firebaseConfig) {\r\n  try {\r\n    firebaseApp = initializeApp(firebaseConfig);\r\n    db = getFirestore(firebaseApp);\r\n    auth = getAuth(firebaseApp);\r\n  } catch (error) {\r\n    console.error(\"Firebase initialization failed:\", error);\r\n  }\r\n}\r\n\r\n// --- Multi-Language Support Configuration ---\r\nconst LANGUAGE_CONFIGS = {\r\n    'React.js': {\r\n        icon: '‚öõÔ∏è',\r\n        label: 'React.js',\r\n        editable: true,\r\n        files: {\r\n            // Note: index.js imports App and handles React rendering logic\r\n            '/src/index.js': { code: `import React from 'react';\\nimport App from './App';\\n\\n// React entry point (Simulated).`, hidden: false, entry: true },\r\n            '/src/App.js': {\r\n                code: `import React, { useState } from 'react';\\n\\n// Main App Component\\nconst App = () => {\\n  const [count, setCount] = useState(0);\\n\\n  const increment = () => {\\n      setCount(c => c + 1);\\n  };\\n\\n  return (\\n    <div className=\"flex flex-col items-center p-4 min-h-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\">\\n      <h1 className=\"text-3xl font-bold mb-4 text-green-500\">CipherStudio Live React App</h1>\\n      <p className=\"text-xl mb-6\">Count: {count}</p>\\n      <button onClick={increment} className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md\">\\n        Increment\\n      </button>\\n      <p className=\"mt-8 text-sm text-gray-500\">Edit code in /src/App.js to see changes here!</p>\\n    </div>\\n  );\\n};\\n\\nexport default App;`,\r\n                hidden: false,\r\n            },\r\n            '/src/styles.css': { code: `/* Global styles for React app */\\nbody { font-family: sans-serif; }`, hidden: false },\r\n            '/public/index.html': { code: '<!DOCTYPE html>...', hidden: true },\r\n            '/package.json': { code: '{\"dependencies\": {\"react\": \"18.2.0\"}}', hidden: true }\r\n        },\r\n        description: 'React environment. **Live rendering is now a static output simulation.**',\r\n    },\r\n    'JavaScript': { \r\n        icon: 'JS', \r\n        label: 'JavaScript', \r\n        editable: true,\r\n        files: { '/index.js': { code: 'console.log(\"Hello pure JavaScript\");', hidden: false, entry: true } }, \r\n        description: 'Pure JS environment. **Execution is simulated.**' \r\n    },\r\n    'HTML': { \r\n        icon: 'HTML', \r\n        label: 'HTML', \r\n        editable: true,\r\n        files: { '/index.html': { code: '<!DOCTYPE html>\\n<html>\\n<body>\\n  <h1 class=\"text-2xl text-blue-500\">Pure HTML Project</h1>\\n  <p>This is editable.</p>\\n</body>\\n</html>', hidden: false, entry: true } }, \r\n        description: 'HTML environment. **Live HTML rendering enabled.**' \r\n    },\r\n    'Python': {\r\n        icon: 'üêç',\r\n        label: 'Python',\r\n        editable: true,\r\n        files: {\r\n            '/main.py': { code: `def greet(name):\\n    return f\"Hello, {name}!\"\\n\\n# Code is editable, but **execution is simulated**.\\nprint(greet(\"Python Dev\"))`, hidden: false, entry: true },\r\n        },\r\n        description: '**Editable Code/Files.** Execution is simulated.',\r\n    },\r\n    'Java': {\r\n        icon: '‚òï',\r\n        label: 'Java',\r\n        editable: true,\r\n        files: {\r\n            '/Main.java': { code: `class Main {\\n  public static void main(String[] args) {\\n    System.out.println(\"Hello Java World!\");\\n  }\\n}`, hidden: false, entry: true },\r\n        },\r\n        description: '**Editable Code/Files.** Execution is simulated.',\r\n    },\r\n    'C++': { \r\n        icon: 'C++', \r\n        label: 'C++', \r\n        editable: true,\r\n        files: { '/main.cpp': { code: '#include <iostream>\\n\\nint main() {\\n  std::cout << \"Hello C++\" << std::endl;\\n  return 0;\\n}', hidden: false, entry: true } }, \r\n        description: '**Editable Code/Files.** Execution is simulated.',\r\n    },\r\n    'C#': { \r\n        icon: 'C#', \r\n        label: 'C#', \r\n        editable: true,\r\n        files: { '/Program.cs': { code: 'using System;\\n\\nConsole.WriteLine(\"Hello C#\");', hidden: false, entry: true } }, \r\n        description: '**Editable Code/Files.** Execution is simulated.' \r\n    },\r\n    'Go': { \r\n        icon: 'Go', \r\n        label: 'Go', \r\n        editable: true,\r\n        files: { '/main.go': { code: 'package main\\n\\nimport \"fmt\"\\n\\nfunc main() {\\n\\tfmt.Println(\"Hello Go\")\\n}', hidden: false, entry: true } }, \r\n        description: '**Editable Code/Files.** Execution is simulated.' \r\n    },\r\n    'Rust': { \r\n        icon: 'Rs', \r\n        label: 'Rust', \r\n        editable: true,\r\n        files: { '/main.rs': { code: 'fn main() {\\n    println!(\"Hello Rust!\");\\n}', hidden: false, entry: true } }, \r\n        description: '**Editable Code/Files.** Execution is simulated.' \r\n    },\r\n};\r\n\r\n// --- Helper Functions ---\r\nconst getLangInitialFiles = (language) => LANGUAGE_CONFIGS[language]?.files || LANGUAGE_CONFIGS['React.js'].files;\r\nconst getLanguageKeys = () => Object.keys(LANGUAGE_CONFIGS).sort();\r\nconst supportedConversionLangs = getLanguageKeys().filter(lang => lang !== 'React.js');\r\n\r\n\r\n/**\r\n * Hook to manage project files, persistence, and state.\r\n */\r\nconst useProjectManager = (dbInstance, authInstance) => { \r\n  const [selectedLanguage, setSelectedLanguage] = useState('React.js');\r\n  const [currentFiles, setCurrentFiles] = useState(getLangInitialFiles('React.js'));\r\n  const [selectedPath, setSelectedPath] = useState('/src/App.js');\r\n  const [currentProjectId, setCurrentProjectId] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n  const [isAuthReady, setIsAuthReady] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [isAutosaveEnabled, setIsAutosaveEnabled] = useState(true);\r\n\r\n  // 1. Authentication and User ID setup\r\n  useEffect(() => {\r\n    const authenticate = async () => {\r\n      if (!authInstance) return;\r\n      try {\r\n        if (initialAuthToken) {\r\n          await signInWithCustomToken(authInstance, initialAuthToken);\r\n        } else {\r\n          await signInAnonymously(authInstance);\r\n        }\r\n        setUserId(authInstance.currentUser?.uid || crypto.randomUUID());\r\n        setIsAuthReady(true);\r\n      } catch (error) {\r\n        console.error(\"Authentication failed:\", error);\r\n        await signInAnonymously(authInstance);\r\n        setUserId(authInstance.currentUser?.uid || crypto.randomUUID());\r\n        setIsAuthReady(true);\r\n      }\r\n    };\r\n    authenticate();\r\n  }, [authInstance]);\r\n\r\n  // Firestore path helper\r\n  const getProjectPath = (id) => doc(dbInstance, 'artifacts', appId, 'users', userId, 'projects', id);\r\n\r\n  // 2. File content update logic\r\n  const updateFileContent = useCallback((path, newCode) => {\r\n    setCurrentFiles(prevFiles => ({\r\n      ...prevFiles,\r\n      [path]: { ...prevFiles[path], code: newCode },\r\n    }));\r\n  }, []);\r\n\r\n  // 3. Language Switch Logic\r\n  const switchLanguage = useCallback((lang) => {\r\n    setSelectedLanguage(lang);\r\n    setCurrentFiles(getLangInitialFiles(lang));\r\n    const newFiles = getLangInitialFiles(lang);\r\n    const newPath = Object.keys(newFiles).find(p => newFiles[p].entry) || Object.keys(newFiles).sort()[0];\r\n    setSelectedPath(newPath);\r\n    setCurrentProjectId(crypto.randomUUID());\r\n    setMessage(`Switched to ${lang}. Start a new project or save your work.`);\r\n  }, []);\r\n\r\n\r\n  // 4. Persistence Functions (Save/Load/New)\r\n  const saveProject = useCallback(async (name) => {\r\n    if (!dbInstance || !userId || !currentProjectId) return;\r\n    setLoading(true);\r\n\r\n    try {\r\n      const projectDocRef = getProjectPath(currentProjectId);\r\n      const projectData = {\r\n        name: name || `Project ${currentProjectId}`,\r\n        language: selectedLanguage,\r\n        files: currentFiles,\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        userId: userId,\r\n      };\r\n\r\n      await setDoc(projectDocRef, projectData, { merge: true });\r\n      setMessage(`Project '${projectData.name}' saved successfully!`);\r\n    } catch (error) {\r\n      console.error(\"Error saving project:\", error);\r\n      setMessage('Error saving project. Check console for details.');\r\n    } finally {\r\n      setLoading(false);\r\n      setTimeout(() => setMessage(''), 3000);\r\n    }\r\n  }, [dbInstance, userId, currentProjectId, currentFiles, selectedLanguage, getProjectPath]);\r\n\r\n  const loadProject = useCallback(async (projectId) => {\r\n    if (!dbInstance || !userId) return;\r\n    setLoading(true);\r\n    setMessage(`Loading project ${projectId}...`);\r\n\r\n    try {\r\n      const projectDocRef = getProjectPath(projectId);\r\n      const docSnap = await getDoc(projectDocRef);\r\n\r\n      if (docSnap.exists()) {\r\n        const data = docSnap.data();\r\n        \r\n        const loadedLanguage = data.language || 'React.js';\r\n        setSelectedLanguage(loadedLanguage);\r\n\r\n        setCurrentFiles(data.files || getLangInitialFiles(loadedLanguage)); \r\n        setCurrentProjectId(projectId);\r\n        \r\n        const newPath = Object.keys(data.files).find(p => data.files[p].entry) || Object.keys(data.files).sort()[0] || '/src/App.js';\r\n        setSelectedPath(newPath);\r\n        \r\n        setMessage(`Project '${data.name}' loaded. Language: ${loadedLanguage}`);\r\n      } else {\r\n        setMessage(`Project ID ${projectId} not found.`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error loading project:\", error);\r\n      setMessage('Error loading project. Check console for details.');\r\n    } finally {\r\n      setLoading(false);\r\n      setTimeout(() => setMessage(''), 3000);\r\n    }\r\n  }, [dbInstance, userId, getProjectPath]);\r\n\r\n  const newProject = useCallback(() => {\r\n    setCurrentFiles(getLangInitialFiles(selectedLanguage));\r\n    setSelectedPath(Object.keys(getLangInitialFiles(selectedLanguage)).find(p => getLangInitialFiles(selectedLanguage)[p].entry) || '/src/App.js');\r\n    setCurrentProjectId(crypto.randomUUID());\r\n    setMessage(`New ${selectedLanguage} project created. Use \"Save\" to persist.`);\r\n  }, [selectedLanguage]);\r\n\r\n  const deleteProject = useCallback(async (projectId) => {\r\n    if (!dbInstance || !userId) return;\r\n    setLoading(true);\r\n\r\n    try {\r\n        await deleteDoc(getProjectPath(projectId));\r\n        setMessage(`Project ${projectId} deleted.`);\r\n        if (currentProjectId === projectId) {\r\n            newProject();\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Error deleting project:\", error);\r\n        setMessage('Error deleting project.');\r\n    } finally {\r\n        setLoading(false);\r\n        setTimeout(() => setMessage(''), 3000);\r\n    }\r\n  }, [dbInstance, userId, currentProjectId, newProject, getProjectPath]);\r\n\r\n  // Initial load/setup (auto-create a new project ID on startup)\r\n  useEffect(() => {\r\n    if (isAuthReady && !currentProjectId) {\r\n        newProject();\r\n    }\r\n  }, [isAuthReady, currentProjectId, newProject]);\r\n\r\n  // NEW: Autosave Implementation\r\n  useEffect(() => {\r\n    if (!isAuthReady || !currentProjectId || !isAutosaveEnabled) return;\r\n\r\n    const intervalId = setInterval(() => {\r\n      // Autosave runs silently, without setting loading or displaying messages\r\n      const autosave = async () => {\r\n        try {\r\n          const projectDocRef = getProjectPath(currentProjectId);\r\n          const projectData = {\r\n            language: selectedLanguage,\r\n            files: currentFiles,\r\n            updatedAt: new Date().toISOString(),\r\n          };\r\n          await setDoc(projectDocRef, projectData, { merge: true });\r\n        } catch (error) {\r\n          console.error(\"Autosave failed:\", error);\r\n        }\r\n      };\r\n      autosave();\r\n    }, 10000); // Autosave every 10 seconds\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [isAutosaveEnabled, isAuthReady, currentProjectId, currentFiles, selectedLanguage, getProjectPath]);\r\n\r\n\r\n  return {\r\n    currentFiles,\r\n    setCurrentFiles, \r\n    selectedPath,\r\n    setSelectedPath,\r\n    currentProjectId,\r\n    userId,\r\n    isAuthReady,\r\n    loading,\r\n    message,\r\n    saveProject,\r\n    loadProject,\r\n    newProject,\r\n    deleteProject,\r\n    updateFileContent,\r\n    selectedLanguage,\r\n    switchLanguage,\r\n    isAutosaveEnabled,\r\n    setIsAutosaveEnabled,\r\n  };\r\n};\r\n\r\n\r\n// --- CONVERSION MODAL COMPONENT ---\r\n\r\n/**\r\n * Custom Modal for Language Conversion Prompt\r\n */\r\nconst ConvertCodeModal = ({ isOpen, onClose, onConvert, currentLanguage, theme }) => {\r\n    const [targetLanguage, setTargetLanguage] = useState(supportedConversionLangs[0]); // Default to first available\r\n    const isDark = theme === 'dark';\r\n    const modalBg = isDark ? 'bg-gray-800' : 'bg-white';\r\n    const textColor = isDark ? 'text-white' : 'text-gray-900';\r\n    const selectBg = isDark ? 'bg-gray-700 text-white border-gray-600' : 'bg-white text-gray-900 border-gray-300';\r\n\r\n\r\n    const handleConvert = () => {\r\n        if (targetLanguage && targetLanguage !== currentLanguage) {\r\n            onConvert(targetLanguage);\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4\">\r\n            <div className={`${modalBg} rounded-xl shadow-2xl w-full max-w-sm p-6 border ${isDark ? 'border-gray-700' : 'border-gray-300'}`}>\r\n                <h3 className={`text-2xl font-bold mb-4 ${textColor}`}>‚ú® Convert Language</h3>\r\n                <p className={`mb-4 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                    Convert code from **{currentLanguage}** to:\r\n                </p>\r\n                \r\n                <select\r\n                    value={targetLanguage}\r\n                    onChange={(e) => setTargetLanguage(e.target.value)}\r\n                    className={`w-full p-3 rounded-lg border focus:ring-2 focus:ring-purple-500 focus:outline-none ${selectBg}`}\r\n                >\r\n                    {supportedConversionLangs\r\n                        .filter(lang => lang !== currentLanguage)\r\n                        .map(lang => (\r\n                            <option key={lang} value={lang}>{lang}</option>\r\n                        ))}\r\n                </select>\r\n\r\n                <div className=\"mt-6 flex justify-end space-x-3\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className={`py-2 px-4 rounded-lg font-semibold ${isDark ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-200 hover:bg-gray-300 text-gray-800'}`}\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        onClick={handleConvert}\r\n                        className=\"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200\"\r\n                        disabled={!targetLanguage || targetLanguage === currentLanguage}\r\n                    >\r\n                        Convert to {targetLanguage}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n/**\r\n * Custom Modal for Code Generation Prompt\r\n */\r\nconst GenerateCodeModal = ({ isOpen, onClose, onGenerate, theme }) => {\r\n    const [prompt, setPrompt] = useState('');\r\n    const isDark = theme === 'dark';\r\n    const modalBg = isDark ? 'bg-gray-800' : 'bg-white';\r\n    const inputBg = isDark ? 'bg-gray-700 text-white' : 'bg-gray-100 text-gray-900';\r\n    const textColor = isDark ? 'text-white' : 'text-gray-900';\r\n\r\n    const handleGenerate = () => {\r\n        if (prompt.trim()) {\r\n            onGenerate(prompt);\r\n            setPrompt('');\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4\">\r\n            <div className={`${modalBg} rounded-xl shadow-2xl w-full max-w-lg p-6 border ${isDark ? 'border-gray-700' : 'border-gray-300'}`}>\r\n                <h3 className={`text-2xl font-bold mb-4 ${textColor}`}>‚ú® Generate Boilerplate Code</h3>\r\n                <p className={`mb-4 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                    Describe the component, function, or file structure you want to generate.\r\n                </p>\r\n                \r\n                <textarea\r\n                    rows=\"4\"\r\n                    value={prompt}\r\n                    onChange={(e) => setPrompt(e.target.value)}\r\n                    placeholder=\"E.g., 'A responsive React component with Tailwind CSS that displays a user profile card and handles dark mode state.'\"\r\n                    className={`w-full p-3 rounded-lg resize-none focus:ring-2 focus:ring-green-500 focus:outline-none ${inputBg}`}\r\n                    autoFocus\r\n                    onKeyDown={(e) => {\r\n                        if (e.key === 'Enter' && !e.shiftKey) {\r\n                            e.preventDefault();\r\n                            handleGenerate();\r\n                        }\r\n                    }}\r\n                />\r\n\r\n                <div className=\"mt-6 flex justify-end space-x-3\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className={`py-2 px-4 rounded-lg font-semibold ${isDark ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-200 hover:bg-gray-300 text-gray-800'}`}\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        onClick={handleGenerate}\r\n                        className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200\"\r\n                        disabled={!prompt.trim()}\r\n                    >\r\n                        Generate\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Language Sidebar Component\r\n */\r\nconst LanguageSidebar = ({ selectedLanguage, switchLanguage, theme }) => {\r\n    const isDark = theme === 'dark';\r\n    const bgColor = isDark ? 'bg-gray-900' : 'bg-gray-100';\r\n    const borderColor = isDark ? 'border-gray-700' : 'border-gray-300';\r\n    const itemBg = isDark ? 'bg-gray-800' : 'bg-white';\r\n    const itemHover = isDark ? 'hover:bg-gray-700' : 'hover:bg-gray-200';\r\n    const itemText = isDark ? 'text-gray-400' : 'text-gray-600';\r\n    const selectedBg = isDark ? 'bg-green-700' : 'bg-green-500';\r\n\r\n    return (\r\n        <div className={`w-20 ${bgColor} border-r ${borderColor} flex-shrink-0 overflow-y-auto p-1`}>\r\n            {getLanguageKeys().map(langKey => {\r\n                const config = LANGUAGE_CONFIGS[langKey];\r\n                const isSelected = langKey === selectedLanguage;\r\n\r\n                return (\r\n                    <button\r\n                        key={langKey}\r\n                        onClick={() => switchLanguage(langKey)}\r\n                        className={`w-full p-2 my-1 rounded-lg text-xs transition-colors duration-200 block text-center ${itemText} ${itemBg} ${itemHover} ${\r\n                            isSelected ? `${selectedBg} !text-white shadow-lg` : ''\r\n                        }`}\r\n                        title={config.label}\r\n                    >\r\n                        <div className=\"text-xl mb-1\">{config.icon}</div>\r\n                        <span className=\"truncate block\">{config.label}</span>\r\n                    </button>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Component to handle file management actions (add, delete, rename)\r\n */\r\nconst FileManagement = ({ files, selectedPath, setSelectedPath, updateFiles, currentProjectId, userId, selectedLanguage, theme }) => {\r\n    const [newFileName, setNewFileName] = useState('');\r\n    const [renamePath, setRenamePath] = useState(null);\r\n    const isDark = theme === 'dark';\r\n    const fileText = isDark ? 'text-gray-300' : 'text-gray-700';\r\n    const fileHoverBg = isDark ? 'hover:bg-gray-700' : 'hover:bg-gray-300';\r\n    const selectedBg = isDark ? 'bg-green-700/50' : 'bg-green-200';\r\n    const sidebarBg = isDark ? 'bg-gray-900' : 'bg-gray-100';\r\n    const fileActionsEnabled = LANGUAGE_CONFIGS[selectedLanguage]?.editable;\r\n\r\n\r\n    // Filter file paths to only show non-hidden ones for the explorer\r\n    const visiblePaths = useMemo(() => {\r\n        return Object.keys(files).filter(path => !files[path].hidden).sort();\r\n    }, [files]);\r\n\r\n    // Use window.prompt replacement instead of alert()\r\n    const alert = (message) => { console.warn('CipherStudio Alert:', message); }; \r\n\r\n    const handleCreate = () => {\r\n        if (!fileActionsEnabled) {\r\n            alert('File creation is only supported in editable environments (all languages are now editable, but an internal issue prevents file creation for this language).');\r\n            return;\r\n        }\r\n\r\n        if (!newFileName || files[`/${newFileName}`]) return;\r\n\r\n        const path = newFileName.startsWith('/') ? newFileName : `/${newFileName}`;\r\n        const isFolder = path.endsWith('/');\r\n        \r\n        let defaultContent = null;\r\n        if (!isFolder) {\r\n            const ext = path.split('.').pop();\r\n            // Assign some basic default content based on extension\r\n            if (ext === 'css') {\r\n                defaultContent = `/* ${path} */\\n`;\r\n            } else if (ext === 'js' || ext === 'jsx' || ext === 'ts' || ext === 'tsx') {\r\n                defaultContent = `// ${path} \\n\\nexport default function Component() { return <div>Hello, ${path}</div>; }`;\r\n            } else if (ext === 'html') {\r\n                defaultContent = `<!-- ${path} -->\\n<!DOCTYPE html>\\n<html>\\n<body>\\n<h1>Hello HTML</h1>\\n</body>\\n</html>`;\r\n            } else if (ext === 'py') {\r\n                 defaultContent = `# ${path}\\n\\nprint(\"Hello from new Python file\")\\n`;\r\n            } else if (ext === 'cpp') {\r\n                 defaultContent = `// ${path}\\n#include <iostream>\\n\\nint main() {\\n  std::cout << \"New C++ File\" << std::endl;\\n  return 0;\\n}`;\r\n            } else {\r\n                defaultContent = `// ${path}\\n\\n`;\r\n            }\r\n        }\r\n\r\n        updateFiles(prevFiles => ({\r\n            ...prevFiles,\r\n            [path]: { code: defaultContent, hidden: isFolder, folder: isFolder },\r\n        }));\r\n\r\n        setNewFileName('');\r\n        if (!isFolder) setSelectedPath(path);\r\n    };\r\n\r\n    const confirmDelete = (path, callback) => {\r\n        // Use a standard prompt since we can't rely on a custom modal here easily\r\n        if (window.prompt(`Type \"DELETE\" to confirm deletion of ${path}:`) === 'DELETE') {\r\n            callback();\r\n        }\r\n    };\r\n\r\n    const handleDelete = (path) => {\r\n        if (!fileActionsEnabled) {\r\n            alert('File deletion is only supported in editable environments.');\r\n            return;\r\n        }\r\n        confirmDelete(path, () => {\r\n            updateFiles(prevFiles => {\r\n                const newFiles = { ...prevFiles };\r\n                delete newFiles[path];\r\n\r\n                if (files[path] && files[path].folder) {\r\n                    Object.keys(newFiles).forEach(p => {\r\n                        if (p.startsWith(path)) {\r\n                            delete newFiles[p];\r\n                        }\r\n                    });\r\n                }\r\n                if (selectedPath === path) {\r\n                    const remainingPaths = Object.keys(newFiles).filter(p => newFiles[p].code !== null);\r\n                    // Fallback to a sensible default if no file is left\r\n                    setSelectedPath(remainingPaths.length > 0 ? remainingPaths[0] : Object.keys(getLangInitialFiles(selectedLanguage))[0] || '/src/App.js');\r\n                }\r\n                return newFiles;\r\n            });\r\n        });\r\n    };\r\n    \r\n    const handleRename = (oldPath) => {\r\n        if (!fileActionsEnabled) {\r\n            alert('File renaming is only supported in editable environments.');\r\n            return;\r\n        }\r\n        if (!renamePath || oldPath === renamePath) {\r\n            setRenamePath(null); \r\n            return;\r\n        }\r\n\r\n        const newPath = renamePath.startsWith('/') ? renamePath : `/${renamePath}`;\r\n\r\n        if (files[newPath]) {\r\n            alert('File or folder already exists.'); \r\n            return;\r\n        }\r\n        \r\n        if (files[oldPath].code === null && !newPath.endsWith('/')) {\r\n            alert('Cannot rename a folder to a file path. Please add a trailing slash for folders.');\r\n            return;\r\n        }\r\n\r\n        updateFiles(prevFiles => {\r\n            const newFiles = {};\r\n            Object.keys(prevFiles).forEach(path => {\r\n                if (path === oldPath) {\r\n                    newFiles[newPath] = prevFiles[path];\r\n                } else if (path.startsWith(oldPath) && files[oldPath].folder) {\r\n                    const relativePath = path.substring(oldPath.length);\r\n                    newFiles[newPath + relativePath] = prevFiles[path];\r\n                } else {\r\n                    newFiles[path] = prevFiles[path];\r\n                }\r\n            });\r\n\r\n            if (selectedPath === oldPath) setSelectedPath(newPath);\r\n            setRenamePath(null);\r\n            return newFiles;\r\n        });\r\n    };\r\n\r\n    const FileTree = ({ paths }) => {\r\n        const tree = {};\r\n\r\n        paths.forEach(path => {\r\n            const parts = path.substring(1).split('/').filter(p => p.length > 0);\r\n            let current = tree;\r\n            const fullPathSegments = [];\r\n\r\n            parts.forEach((part, i) => {\r\n                fullPathSegments.push(part);\r\n                const currentPath = '/' + fullPathSegments.join('/');\r\n                \r\n                if (!current[part]) {\r\n                    const isFile = (i === parts.length - 1) && files[path] && files[path].code !== null && !files[path].folder;\r\n\r\n                    current[part] = { \r\n                        children: {}, \r\n                        path: currentPath, \r\n                        isFile: isFile \r\n                    };\r\n                }\r\n                current = current[part].children;\r\n            });\r\n        });\r\n\r\n        const renderTree = (node) => (\r\n            <ul className=\"pl-4\">\r\n                {Object.keys(node).sort().map(name => {\r\n                    const item = node[name];\r\n                    const path = item.path;\r\n                    const isSelected = path === selectedPath;\r\n                    const isFolder = Object.keys(item.children).length > 0 || (files[path] && files[path].folder);\r\n\r\n                    // Simplified icon logic for non-web languages\r\n                    let icon = isFolder ? 'üìÅ' : 'üìÑ';\r\n                    if (path.endsWith('.js') || path.endsWith('.jsx') || path.endsWith('.ts') || path.endsWith('.tsx')) icon = '‚öõÔ∏è';\r\n                    else if (path.endsWith('.css')) icon = '#';\r\n                    else if (path.endsWith('.py')) icon = 'üêç';\r\n                    else if (path.endsWith('.java')) icon = '‚òï';\r\n                    else if (path.endsWith('.cpp')) icon = 'C++';\r\n                    else if (path.endsWith('.cs')) icon = 'C#';\r\n\r\n\r\n                    const isRenderableFile = item.isFile || (files[path] && files[path].code !== null && !files[path].folder);\r\n\r\n\r\n                    return (\r\n                        <li key={path} className={`${fileText} group`}>\r\n                            {/* File/Folder Display */}\r\n                            <div className={`flex items-center space-x-2 p-1 rounded transition duration-150 cursor-pointer ${isSelected ? selectedBg : fileHoverBg}`}>\r\n                                <span className=\"text-xs mr-2\">{icon}</span>\r\n                                {renamePath === path ? (\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={renamePath}\r\n                                        onChange={(e) => setRenamePath(e.target.value)}\r\n                                        onBlur={() => handleRename(path)}\r\n                                        onKeyDown={(e) => {\r\n                                            if (e.key === 'Enter') handleRename(path);\r\n                                            if (e.key === 'Escape') setRenamePath(null);\r\n                                        }}\r\n                                        className={`${isDark ? 'bg-gray-800 text-white' : 'bg-white text-black'} flex-grow px-1`}\r\n                                        autoFocus\r\n                                        disabled={!fileActionsEnabled}\r\n                                    />\r\n                                ) : (\r\n                                    <span\r\n                                        className=\"flex-grow truncate\"\r\n                                        onClick={() => isRenderableFile && setSelectedPath(path)}\r\n                                        onDoubleClick={() => fileActionsEnabled && setRenamePath(path)}\r\n                                    >\r\n                                        {name}\r\n                                    </span>\r\n                                )}\r\n\r\n                                {/* Actions */}\r\n                                <div className={`space-x-1 transition-opacity ${fileActionsEnabled ? 'opacity-0 group-hover:opacity-100' : 'opacity-20'}`}>\r\n                                    <button\r\n                                        onClick={() => handleDelete(path)}\r\n                                        className=\"text-red-400 hover:text-red-500 text-xs p-1\"\r\n                                        title=\"Delete\"\r\n                                        disabled={!fileActionsEnabled}\r\n                                    >\r\n                                        &times;\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Recursively render children */}\r\n                            {isFolder && Object.keys(item.children).length > 0 && renderTree(item.children)}\r\n                        </li>\r\n                    );\r\n                })}\r\n            </ul>\r\n        );\r\n\r\n        return renderTree(tree);\r\n    };\r\n\r\n    return (\r\n        <div className={`p-3 text-sm flex flex-col h-full overflow-y-auto ${sidebarBg}`}>\r\n            <h2 className={`text-lg font-semibold mb-3 ${isDark ? 'text-white' : 'text-gray-900'} border-b ${isDark ? 'border-gray-700' : 'border-gray-300'} pb-2`}>\r\n                Files - ({selectedLanguage})\r\n            </h2>\r\n            <p className={`text-xs mb-2 ${fileActionsEnabled ? 'text-green-400' : 'text-red-400'}`}>\r\n                {LANGUAGE_CONFIGS[selectedLanguage]?.description}\r\n            </p>\r\n\r\n            {/* Create New File/Folder Input */}\r\n            <div className={`mb-4 flex space-x-1`}>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"new-file.js or folder/\"\r\n                    value={newFileName}\r\n                    onChange={(e) => setNewFileName(e.target.value)}\r\n                    onKeyDown={(e) => e.key === 'Enter' && handleCreate()}\r\n                    className={`flex-grow p-2 rounded focus:ring-2 focus:ring-green-500 focus:outline-none ${isDark ? 'bg-gray-800 text-white placeholder-gray-500' : 'bg-white text-gray-900 placeholder-gray-400'}`}\r\n                />\r\n                <button\r\n                    onClick={handleCreate}\r\n                    className=\"bg-green-600 hover:bg-green-700 text-white p-2 rounded\"\r\n                    title=\"Create File/Folder\"\r\n                >\r\n                    +\r\n                </button>\r\n            </div>\r\n\r\n            {/* File Tree Display */}\r\n            <div className=\"flex-grow overflow-y-auto\">\r\n                <FileTree paths={visiblePaths} />\r\n            </div>\r\n\r\n            {/* User ID Display - Mandatory for collaborative apps */}\r\n            <div className={`mt-4 pt-2 border-t ${isDark ? 'border-gray-700' : 'border-gray-300'} text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'} truncate`}>\r\n                User ID: <span className=\"font-mono\">{userId}</span>\r\n                <span className=\"block\">Project ID: <span className=\"font-mono\">{currentProjectId?.substring(0, 8) + '...'}</span></span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n/**\r\n * Toolbar component for project management (New, Save, Load) and AI Tools.\r\n */\r\nconst Toolbar = ({ currentProjectId, saveProject, newProject, loadProject, loading, message, deleteProject, explainCode, reviewCode, showGenerateModal, showConvertModal, theme, toggleTheme, isAutosaveEnabled, toggleAutosave }) => {\r\n    const [loadInput, setLoadInput] = useState('');\r\n    const [projectName, setProjectName] = useState(`Project ${currentProjectId?.substring(0, 8) || ''}`);\r\n    const isDark = theme === 'dark';\r\n    const toolbarBg = isDark ? 'bg-gray-900' : 'bg-gray-200';\r\n    const toolbarBorder = isDark ? 'border-gray-700' : 'border-gray-300';\r\n    const textColor = isDark ? 'text-white' : 'text-gray-900';\r\n    const inputBg = isDark ? 'bg-gray-800 text-white' : 'bg-white text-gray-900';\r\n\r\n    useEffect(() => {\r\n        setProjectName(`Project ${currentProjectId?.substring(0, 8) || ''}`);\r\n    }, [currentProjectId]);\r\n\r\n    const handleSave = () => {\r\n        if (projectName) {\r\n            saveProject(projectName);\r\n        } else {\r\n            console.warn('CipherStudio Alert: Please enter a project name.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={`p-3 ${toolbarBg} border-b ${toolbarBorder} flex items-center justify-between ${textColor} shadow-lg flex-wrap gap-2`}>\r\n            <div className=\"flex items-center space-x-4\">\r\n                <h1 className=\"text-xl font-bold text-green-500\">CipherStudio</h1>\r\n\r\n                <input\r\n                    type=\"text\"\r\n                    value={projectName}\r\n                    onChange={(e) => setProjectName(e.target.value)}\r\n                    className={`${inputBg} p-1 rounded text-sm w-48 focus:ring-green-500 focus:ring-1`}\r\n                    placeholder=\"Project Name\"\r\n                    disabled={loading}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-4 flex-grow justify-end min-w-[500px]\">\r\n                {/* Status Message */}\r\n                <div className=\"text-sm text-yellow-500 min-w-[150px] text-right\">\r\n                    {loading ? 'Processing...' : message}\r\n                </div>\r\n                \r\n                {/* Theme Toggle */}\r\n                <button\r\n                    onClick={toggleTheme}\r\n                    className={`p-2 rounded transition duration-200 ${isDark ? 'bg-gray-800 hover:bg-gray-700' : 'bg-white hover:bg-gray-300'} ${isDark ? 'text-yellow-400' : 'text-gray-800'}`}\r\n                    title={isDark ? \"Switch to Light Mode\" : \"Switch to Dark Mode\"}\r\n                >\r\n                    {isDark ? '‚òÄÔ∏è' : 'üåô'}\r\n                </button>\r\n\r\n                {/* Autosave Toggle */}\r\n                <button\r\n                    onClick={toggleAutosave}\r\n                    className={`py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1 font-semibold ${isAutosaveEnabled ? 'bg-indigo-600 hover:bg-indigo-700 text-white' : 'bg-gray-500 hover:bg-gray-600 text-white'}`}\r\n                    title={isAutosaveEnabled ? \"Autosave is ON (every 10s)\" : \"Autosave is OFF\"}\r\n                >\r\n                    <span className=\"text-lg\">üíæ</span>\r\n                    <span>Autosave {isAutosaveEnabled ? 'ON' : 'OFF'}</span>\r\n                </button>\r\n                \r\n                {/* AI Actions */}\r\n                <button\r\n                    onClick={explainCode}\r\n                    className=\"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\"\r\n                    disabled={loading}\r\n                    title=\"Get a plain-language explanation of the current file's code.\"\r\n                >\r\n                    <span className=\"text-lg\">‚ú®</span>\r\n                    <span>Explain Code</span>\r\n                </button>\r\n                <button\r\n                    onClick={reviewCode}\r\n                    className=\"bg-orange-600 hover:bg-orange-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\"\r\n                    disabled={loading}\r\n                    title=\"Review the code and suggest refactoring or improvements.\"\r\n                >\r\n                    <span className=\"text-lg\">‚ú®</span>\r\n                    <span>Review & Refactor</span>\r\n                </button>\r\n                <button\r\n                    onClick={showGenerateModal}\r\n                    className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\"\r\n                    disabled={loading}\r\n                    title=\"Generate boilerplate code from a natural language description.\"\r\n                >\r\n                    <span className=\"text-lg\">‚ú®</span>\r\n                    <span>Generate Code</span>\r\n                </button>\r\n                 <button\r\n                    onClick={showConvertModal}\r\n                    className=\"bg-pink-600 hover:bg-pink-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200 flex items-center space-x-1\"\r\n                    disabled={loading}\r\n                    title=\"Convert code from the current language to another programming language.\"\r\n                >\r\n                    <span className=\"text-lg\">‚ú®</span>\r\n                    <span>Convert Language</span>\r\n                </button>\r\n\r\n                {/* Persistence Actions */}\r\n                <button\r\n                    onClick={newProject}\r\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\"\r\n                    disabled={loading}\r\n                >\r\n                    New Project\r\n                </button>\r\n                <button\r\n                    onClick={handleSave}\r\n                    className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\"\r\n                    disabled={loading}\r\n                >\r\n                    Save\r\n                </button>\r\n            </div>\r\n\r\n            {/* Load/Delete Section */}\r\n            <div className=\"flex items-center space-x-2 mt-2 md:mt-0\">\r\n                <input\r\n                    type=\"text\"\r\n                    value={loadInput}\r\n                    onChange={(e) => setLoadInput(e.target.value)}\r\n                    className={`${inputBg} p-1 rounded text-sm w-32 focus:ring-green-500 focus:ring-1`}\r\n                    placeholder=\"Project ID to load\"\r\n                />\r\n                <button\r\n                    onClick={() => loadProject(loadInput)}\r\n                    className=\"bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\"\r\n                    disabled={loading || !loadInput}\r\n                >\r\n                    Load\r\n                </button>\r\n                <button\r\n                    onClick={() => deleteProject(loadInput)}\r\n                    className=\"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-3 rounded text-sm transition duration-200\"\r\n                    disabled={loading || !loadInput}\r\n                >\r\n                    Delete\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Custom Code Editor wrapper (using native textarea)\r\n */\r\nconst CipherEditor = ({ selectedPath, fileContent, updateFileContent, selectedLanguage, theme }) => {\r\n    // Determine the language for syntax highlighting (visually only)\r\n    const language = useMemo(() => {\r\n        if (selectedPath.endsWith('.js') || selectedPath.endsWith('.jsx')) return 'javascript';\r\n        if (selectedPath.endsWith('.ts') || selectedPath.endsWith('.tsx')) return 'typescript';\r\n        if (selectedPath.endsWith('.css')) return 'css';\r\n        if (selectedPath.endsWith('.html')) return 'html';\r\n        return 'text';\r\n    }, [selectedPath]);\r\n    \r\n    // All languages are now editable\r\n    const isEditable = LANGUAGE_CONFIGS[selectedLanguage]?.editable;\r\n    const isDark = theme === 'dark';\r\n    const editorBg = isDark ? 'bg-gray-800' : 'bg-white';\r\n    const editorText = isDark ? 'text-white' : 'text-gray-900';\r\n    const tabBg = isDark ? 'bg-gray-900' : 'bg-gray-200';\r\n    const tabItemBg = isDark ? 'bg-gray-700' : 'bg-gray-300';\r\n    const tabBorder = isDark ? 'border-gray-700' : 'border-gray-300';\r\n\r\n    return (\r\n        <div className={`flex flex-col h-full ${editorBg} ${editorText} text-sm relative`}>\r\n            {/* Tab Bar (Simulated) */}\r\n            <div className={`p-2 ${tabBg} border-b ${tabBorder} text-xs flex items-center justify-between`}>\r\n                <span className={`${tabItemBg} px-3 py-1 rounded-t border-b-2 border-green-500 flex items-center`}>\r\n                    <span className=\"text-xs mr-2\">\r\n                        {language === 'javascript' || language === 'typescript' ? '‚öõÔ∏è' : language === 'css' ? '#' : 'üìÑ'}\r\n                    </span>\r\n                    {selectedPath}\r\n                </span>\r\n                {/* Removed Read-Only message since the code editor is now universally editable */}\r\n            </div>\r\n\r\n            {/* Code Editor Area */}\r\n            <div className=\"flex flex-1 overflow-hidden\">\r\n                <textarea\r\n                    key={selectedPath} \r\n                    value={fileContent || ''}\r\n                    onChange={(e) => isEditable && updateFileContent(selectedPath, e.target.value)}\r\n                    spellCheck=\"false\"\r\n                    // Removed the opacity/cursor-not-allowed classes as the editor is always active now\r\n                    className={`flex-1 resize-none font-mono text-sm p-4 h-full outline-none leading-relaxed ${editorBg} ${editorText}`}\r\n                    // Disabled prop is now effectively always false\r\n                />\r\n            </div>\r\n            \r\n            <style jsx=\"true\">{`\r\n                .line-number {\r\n                    display: inline-block;\r\n                    width: 30px;\r\n                    text-align: right;\r\n                    margin-right: 10px;\r\n                    color: ${isDark ? '#555' : '#aaa'};\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- REACT LIVE RENDERING SIMULATION ---\r\n\r\n/**\r\n * Renders a static version of the starter React component. \r\n * THIS IS THE FIX. We stop trying to compile JSX dynamically and just show the static starter app.\r\n */\r\nconst StaticReactPreview = React.memo(({ theme }) => {\r\n    const previewBg = theme === 'dark' ? 'bg-gray-900' : 'bg-white';\r\n    const previewText = theme === 'dark' ? 'text-white' : 'text-gray-900';\r\n    \r\n    // Since we cannot compile the user's JSX, we render a static pre-compiled component instead.\r\n    // The user's code changes will NOT affect this live, but it removes the critical JSX error.\r\n    const [count, setCount] = useState(0);\r\n\r\n    const increment = () => {\r\n        setCount(c => c + 1);\r\n    };\r\n    \r\n    return (\r\n        <div className={`flex flex-col items-center justify-center p-4 min-h-full w-full ${previewBg} ${previewText}`}>\r\n            <h1 className=\"text-3xl font-bold mb-4 text-green-500\">CipherStudio Static React Preview</h1>\r\n            <p className=\"text-xl mb-6\">Count: {count}</p>\r\n            <button onClick={increment} className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md\">\r\n                Increment\r\n            </button>\r\n            <p className=\"mt-8 text-sm text-gray-500\">\r\n                **Note:** Live updates are disabled to prevent compilation errors.\r\n            </p>\r\n        </div>\r\n    );\r\n});\r\nStaticReactPreview.displayName = 'StaticReactPreview';\r\n\r\n\r\n/**\r\n * Logic to get Simulated Terminal Output from Gemini\r\n */\r\nconst useTerminalSimulation = (selectedLanguage, codeDumpContent, isLiveLang, callGeminiApi) => {\r\n    const [simulatedOutput, setSimulatedOutput] = useState(null);\r\n    const [simLoading, setSimLoading] = useState(false);\r\n\r\n    // Debounce the call to avoid hitting the API too frequently while typing\r\n    const debouncedCallGemini = useCallback((code, lang) => {\r\n        if (!code || isLiveLang) return; // Only simulate non-live code\r\n\r\n        // Clear previous timeout if it exists\r\n        const handler = setTimeout(() => {\r\n            const systemInstruction = `You are a terminal emulator for ${lang}. Given the user's code, execute it mentally and provide the console output. Respond with ONLY the expected terminal output text. Do not provide code blocks, explanations, or commentary. If the code is complex, multi-file, or requires user input, respond with \"Simulation too complex or interactive. Cannot determine output.\"`;\r\n            \r\n            setSimLoading(true);\r\n            \r\n            callGeminiApi(\r\n                `Simulate the console output for the following ${lang} code:\\n\\n\\`\\`\\`${lang}\\n${code}\\n\\`\\`\\``,\r\n                systemInstruction,\r\n                'Terminal Simulation'\r\n            ).then(result => {\r\n                // Since callGeminiApi already sets aiOutput, we just need the text\r\n                setSimulatedOutput(result); \r\n                setSimLoading(false);\r\n            }).catch(e => {\r\n                setSimulatedOutput(`[Simulation Error] Failed to contact AI helper: ${e.message}`);\r\n                setSimLoading(false);\r\n            });\r\n        }, 1500); // 1.5 second debounce\r\n\r\n        return () => clearTimeout(handler);\r\n    }, [isLiveLang, callGeminiApi]);\r\n    \r\n    // Effect to trigger simulation when code changes\r\n    useEffect(() => {\r\n        if (!isLiveLang && codeDumpContent) {\r\n            // Note: We need to use a proxy call to callGeminiApi here\r\n            // This is complex due to hooks, so we'll simplify and use a flag/state\r\n            // to signal the main component to call the API instead of calling it here.\r\n            \r\n            // For now, we will simply rely on the debounced function, but we need\r\n            // a mechanism to handle the loading state/output outside the hook.\r\n            // Since we need to use the full `callGeminiApi`, we rely on it being passed down.\r\n            \r\n            return debouncedCallGemini(codeDumpContent, selectedLanguage);\r\n        } else {\r\n            setSimulatedOutput(null);\r\n        }\r\n    }, [selectedLanguage, codeDumpContent, isLiveLang, debouncedCallGemini]);\r\n\r\n    return { simulatedOutput, simLoading };\r\n};\r\n\r\n\r\n/**\r\n * Preview Panel (Handles HTML rendering and Code Dumping)\r\n */\r\nconst CipherPreview = ({ files, selectedLanguage, theme, callGeminiApi }) => {\r\n    \r\n    const isReact = selectedLanguage === 'React.js';\r\n    const isHTML = selectedLanguage === 'HTML';\r\n    const isSimulated = !isReact && !isHTML; // Non-web languages require simulation\r\n\r\n    const isDark = theme === 'dark';\r\n    const panelBg = isDark ? 'bg-gray-800' : 'bg-white';\r\n    const codeBg = isDark ? 'bg-gray-700' : 'bg-gray-100';\r\n    const codeText = isDark ? 'text-gray-100' : 'text-gray-800';\r\n\r\n    // 1. Get relevant file content\r\n    const appJsCode = files['/src/App.js']?.code || '';\r\n    const mainHtmlContent = files['/index.html']?.code || '';\r\n    \r\n    // 2. Get content for code dump (main entry point)\r\n    const codeDumpContent = useMemo(() => {\r\n        const entryPath = Object.keys(files).find(p => files[p].entry) || Object.keys(files).sort()[0];\r\n        return files[entryPath]?.code || '// Preview content not available.';\r\n    }, [files]);\r\n    \r\n    // --- NEW: LLM-based Terminal Output Simulation ---\r\n    const [simulatedOutput, setSimulatedOutput] = useState(null);\r\n    const [simLoading, setSimLoading] = useState(false);\r\n    const [lastSimulatedCode, setLastSimulatedCode] = useState('');\r\n    \r\n    // Debounced function to call the AI for execution simulation\r\n    const debouncedSimulate = useCallback((code, lang) => {\r\n        setSimLoading(true);\r\n        setSimulatedOutput('Thinking...');\r\n\r\n        const systemInstruction = `You are a terminal emulator for ${lang}. Given the user's code, execute it mentally and provide the console output. Respond with ONLY the expected terminal output text. Do not provide code blocks, explanations, or commentary. If the code is complex, multi-file, or requires user input, respond with \"Simulation too complex or interactive. Cannot determine output.\"`;\r\n        \r\n        callGeminiApi(\r\n            `Simulate the console output for the following ${lang} code:\\n\\n\\`\\`\\`${lang}\\n${code}\\n\\`\\`\\``,\r\n            systemInstruction,\r\n            'Terminal Simulation'\r\n        ).then(result => {\r\n            // result is the full text output from the API\r\n            setSimulatedOutput(result); \r\n            setSimLoading(false);\r\n            setLastSimulatedCode(code);\r\n        }).catch(e => {\r\n            setSimulatedOutput(`[Simulation Error] Failed to contact AI helper: ${e.message}`);\r\n            setSimLoading(false);\r\n        });\r\n    }, [callGeminiApi]);\r\n\r\n    // Effect to trigger simulation when code changes (using debounce)\r\n    useEffect(() => {\r\n        if (!isSimulated) return; // Skip for React/HTML\r\n        \r\n        // This is a simple deep-equality check for large strings to prevent unnecessary calls\r\n        if (codeDumpContent === lastSimulatedCode) return;\r\n        \r\n        const handler = setTimeout(() => {\r\n            if (codeDumpContent.trim().length > 5) {\r\n                debouncedSimulate(codeDumpContent, selectedLanguage);\r\n            } else {\r\n                setSimulatedOutput('');\r\n                setLastSimulatedCode('');\r\n            }\r\n        }, 1500); \r\n\r\n        return () => clearTimeout(handler);\r\n    }, [codeDumpContent, selectedLanguage, isSimulated, debouncedSimulate, lastSimulatedCode]);\r\n    // --- END: LLM-based Terminal Output Simulation ---\r\n\r\n\r\n    let PreviewContent;\r\n    let previewTitle;\r\n    let previewWarning;\r\n\r\n    if (isReact) {\r\n        // ** STATIC REACT PREVIEW (FIX) **\r\n        PreviewContent = <StaticReactPreview theme={theme} />;\r\n        previewTitle = 'Static React App Output';\r\n        previewWarning = 'Live updates are disabled.';\r\n    } else if (isHTML) {\r\n        // ** LIVE HTML PREVIEW **\r\n        PreviewContent = (\r\n            <div \r\n                className=\"w-full h-full overflow-auto p-4\"\r\n                dangerouslySetInnerHTML={{ __html: mainHtmlContent }} \r\n            />\r\n        );\r\n        previewTitle = 'Live HTML Output';\r\n        previewWarning = 'Rendering raw HTML content.';\r\n    } else {\r\n        // ** TERMINAL OUTPUT SIMULATION (NEW) **\r\n        PreviewContent = (\r\n            <div className={`absolute inset-0 ${codeBg} p-4 overflow-auto rounded-lg shadow-inner flex flex-col`}>\r\n                <h2 className={`text-lg font-bold mb-2 ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                    Terminal Output Simulation\r\n                </h2>\r\n                <p className='text-yellow-500 mb-4 text-xs'>\r\n                    **NOTE:** Live execution is not available. Output is simulated by the Gemini AI helper.\r\n                </p>\r\n                \r\n                <div className={`flex-1 p-2 ${isDark ? 'bg-black text-green-400' : 'bg-gray-900 text-green-300'} rounded-lg font-mono text-sm overflow-auto`}>\r\n                    {simLoading ? (\r\n                         <div className=\"flex items-center text-yellow-400\">\r\n                            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-400 mr-2\"></div>\r\n                            Compiling and Running...\r\n                        </div>\r\n                    ) : (\r\n                        simulatedOutput || `> Ready to simulate ${selectedLanguage} code. Start typing to see the output here.`\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n        previewTitle = 'Compiler Output Simulation';\r\n        previewWarning = `Simulated by AI for ${selectedLanguage}`;\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full\">\r\n            <div className={`p-2 ${isDark ? 'bg-gray-900 border-gray-700' : 'bg-gray-200 border-gray-300'} border-b text-gray-400 text-xs flex justify-between`}>\r\n                <span>{previewTitle}</span>\r\n                <span className={isReact || isHTML ? 'text-green-500' : 'text-yellow-500'}>{previewWarning}</span>\r\n            </div>\r\n            \r\n            <div className={`flex-1 ${panelBg} p-0 overflow-auto text-gray-800 font-mono text-sm relative`}>\r\n                {PreviewContent}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n/**\r\n * Dedicated panel to display Gemini LLM responses.\r\n */\r\nconst AiOutputPanel = ({ aiOutput, aiLoading, aiToolMessage, theme }) => {\r\n    const isDark = theme === 'dark';\r\n    const panelBg = isDark ? 'bg-gray-700' : 'bg-gray-100';\r\n    const text = isDark ? 'text-gray-100' : 'text-gray-900';\r\n    const tabBg = isDark ? 'bg-gray-900' : 'bg-gray-200';\r\n    const tabBorder = isDark ? 'border-gray-700' : 'border-gray-300';\r\n\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full\">\r\n            <div className={`p-2 ${tabBg} border-b ${tabBorder} text-gray-400 text-xs flex justify-between`}>\r\n                <span>‚ú® AI Assistant Console</span>\r\n                <span className=\"text-purple-400\">{aiToolMessage}</span>\r\n            </div>\r\n            \r\n            <div className={`flex-1 ${panelBg} p-4 overflow-auto relative`}>\r\n                {aiLoading ? (\r\n                    <div className=\"flex items-center justify-center h-full text-purple-500\">\r\n                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mr-3\"></div>\r\n                        Generating AI Response...\r\n                    </div>\r\n                ) : aiOutput ? (\r\n                    <pre className={`whitespace-pre-wrap font-mono text-sm leading-relaxed ${text}`}>\r\n                        {aiOutput}\r\n                    </pre>\r\n                ) : (\r\n                    <div className=\"text-gray-500 text-center p-10\">\r\n                        Use the ‚ú® buttons in the toolbar to explain or review your code.\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Main application component for CipherStudio IDE.\r\n */\r\nconst App = () => {\r\n    // Theme State\r\n    const [theme, setTheme] = useState('dark');\r\n    const toggleTheme = useCallback(() => {\r\n        setTheme(prev => (prev === 'dark' ? 'light' : 'dark'));\r\n    }, []);\r\n\r\n    // 1. Project Management Hook\r\n    const {\r\n        currentFiles,\r\n        setCurrentFiles, \r\n        selectedPath,\r\n        setSelectedPath,\r\n        currentProjectId,\r\n        userId,\r\n        isAuthReady,\r\n        loading,\r\n        message,\r\n        updateFileContent,\r\n        saveProject,\r\n        loadProject,\r\n        newProject,\r\n        deleteProject,\r\n        selectedLanguage, \r\n        switchLanguage,\r\n        isAutosaveEnabled,\r\n        setIsAutosaveEnabled,\r\n    } = useProjectManager(db, auth); \r\n\r\n    const toggleAutosave = useCallback(() => {\r\n        setIsAutosaveEnabled(prev => !prev);\r\n    }, [setIsAutosaveEnabled]);\r\n\r\n    // 2. AI Tool State and Logic\r\n    const [aiOutput, setAiOutput] = useState(null);\r\n    const [aiLoading, setAiLoading] = useState(false);\r\n    const [aiToolMessage, setAiToolMessage] = useState('');\r\n    const [activeRightPanel, setActiveRightPanel] = useState('preview');\r\n    const [isGenerateModalOpen, setIsGenerateModalOpen] = useState(false);\r\n    const [isConvertModalOpen, setIsConvertModalOpen] = useState(false);\r\n\r\n    // Get the content of the currently selected file for the editor\r\n    const activeFileContent = currentFiles[selectedPath]?.code || '// File not found or is a folder.';\r\n    \r\n    // Get the content of the \"main\" file for the simulated preview\r\n    const previewFiles = useMemo(() => {\r\n        // Pass the entire file map for React/HTML to look up necessary files\r\n        return currentFiles;\r\n    }, [currentFiles]);\r\n\r\n\r\n    const callGeminiApi = useCallback(async (prompt, systemInstruction, toolName) => {\r\n        setAiLoading(true);\r\n        // Note: We deliberately DO NOT reset aiOutput/activeRightPanel here \r\n        // to allow simultaneous calls (e.g., Terminal Simulation and an explicit AI Tool).\r\n        // The individual components manage their own loading/output states.\r\n\r\n        const apiKey = \"\"; \r\n        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;\r\n\r\n        const payload = {\r\n            contents: [{ parts: [{ text: prompt }] }],\r\n            systemInstruction: {\r\n                parts: [{ text: systemInstruction }]\r\n            },\r\n        };\r\n\r\n        let attempts = 0;\r\n        const maxAttempts = 3;\r\n        let lastError = null;\r\n\r\n        while (attempts < maxAttempts) {\r\n            try {\r\n                const response = await fetch(apiUrl, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify(payload)\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(`API returned status ${response.status}`);\r\n                }\r\n\r\n                const result = await response.json();\r\n                const text = result.candidates?.[0]?.content?.parts?.[0]?.text || \"Could not generate content.\";\r\n                \r\n                // Only reset the main AI tool panel state if it was an explicit tool call\r\n                if (toolName !== 'Terminal Simulation') {\r\n                    setAiLoading(false);\r\n                    setAiOutput(text);\r\n                    setAiToolMessage(`Output for ${toolName} on ${selectedPath}`);\r\n                }\r\n                \r\n                return text;\r\n\r\n            } catch (error) {\r\n                lastError = error;\r\n                attempts++;\r\n                const delay = Math.pow(2, attempts) * 1000;\r\n                console.warn(`Attempt ${attempts} failed. Retrying in ${delay / 1000}s...`, error);\r\n                if (attempts < maxAttempts) {\r\n                    await new Promise(resolve => setTimeout(resolve, delay));\r\n                }\r\n            }\r\n        }\r\n        \r\n        const finalError = `Failed to get a response after ${maxAttempts} attempts. Error: ${lastError.message || 'Unknown error'}`;\r\n        \r\n        if (toolName !== 'Terminal Simulation') {\r\n            setAiLoading(false);\r\n            setAiOutput(finalError);\r\n            setAiToolMessage(`Failed to run ${toolName}`);\r\n        }\r\n        \r\n        throw new Error(finalError);\r\n\r\n    }, [selectedPath]);\r\n\r\n\r\n    const explainCode = useCallback(async () => {\r\n        const systemInstruction = `You are a helpful programming tutor. Your task is to analyze the provided code snippet written in ${selectedLanguage} and explain its purpose, key components, and function flow in clear, easy-to-understand language. Focus on the context (${selectedLanguage}/${selectedPath}) and be concise.`;\r\n        const prompt = `Explain the following code from file ${selectedPath}:\\n\\n\\`\\`\\`${activeFileContent}\\`\\`\\``;\r\n        await callGeminiApi(prompt, systemInstruction, 'Code Explanation');\r\n    }, [activeFileContent, selectedPath, selectedLanguage, callGeminiApi]);\r\n\r\n    const reviewCode = useCallback(async () => {\r\n        const systemInstruction = `You are an expert code reviewer specializing in modern ${selectedLanguage} and software best practices. Analyze the provided code for potential improvements, bugs, or refactoring suggestions. Your response should be structured with markdown bullet points and code examples where applicable. If no issues are found, state \"Code looks great! Ready for commit.\"`;\r\n        const prompt = `Review the following code from file ${selectedPath} in ${selectedLanguage} and suggest improvements:\\n\\n\\`\\`\\`${activeFileContent}\\`\\`\\``;\r\n        await callGeminiApi(prompt, systemInstruction, 'Code Review');\r\n    }, [activeFileContent, selectedPath, selectedLanguage, callGeminiApi]);\r\n    \r\n    const generateCode = useCallback(async (description) => {\r\n        const systemInstruction = `You are a top-tier software engineer specializing in ${selectedLanguage}. Generate a complete, self-contained code snippet based on the user's description. Enclose the code in a single markdown code block (e.g., \\`\\`\\`${selectedLanguage}...\\`\\`\\`). Do not include any text outside the markdown code block.`;\r\n        const prompt = `Generate code for the following in ${selectedLanguage}, suitable for file ${selectedPath}: ${description}`;\r\n        await callGeminiApi(prompt, systemInstruction, 'Code Generation');\r\n    }, [selectedPath, selectedLanguage, callGeminiApi]);\r\n\r\n    const convertCode = useCallback(async (targetLang) => {\r\n        const systemInstruction = `You are an expert code translator. Your task is to accurately convert the provided code from ${selectedLanguage} to ${targetLang}. The output must contain ONLY the converted code snippet, enclosed in a single markdown code block (e.g., \\`\\`\\`${targetLang}...\\`\\`\\`). Do not include any explanatory text or commentary outside the markdown block.`;\r\n        const prompt = `Convert the following code from ${selectedLanguage} to ${targetLang}:\\n\\n\\`\\`\\`${activeFileContent}\\`\\`\\``;\r\n        await callGeminiApi(prompt, systemInstruction, `Code Conversion to ${targetLang}`);\r\n    }, [activeFileContent, selectedLanguage, callGeminiApi]);\r\n\r\n\r\n    // Effect to reset AI panel when file changes\r\n    useEffect(() => {\r\n        if (activeRightPanel === 'ai_tools' && !aiLoading) {\r\n            setAiOutput(null);\r\n            setAiToolMessage('');\r\n        }\r\n    }, [selectedPath, activeRightPanel, aiLoading]);\r\n\r\n\r\n    // Handle initial loading state\r\n    if (!isAuthReady) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-screen w-full bg-gray-900 text-white\">\r\n                <p>Initializing CipherStudio and connecting to Persistence...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const mainBg = theme === 'dark' ? 'bg-gray-800' : 'bg-gray-200';\r\n\r\n    return (\r\n        <div className={`flex flex-col h-screen w-full font-sans ${mainBg} ${theme}`}>\r\n            {/* AI Modals */}\r\n            <GenerateCodeModal \r\n                isOpen={isGenerateModalOpen}\r\n                onClose={() => setIsGenerateModalOpen(false)}\r\n                onGenerate={generateCode}\r\n                theme={theme}\r\n            />\r\n            <ConvertCodeModal\r\n                isOpen={isConvertModalOpen}\r\n                onClose={() => setIsConvertModalOpen(false)}\r\n                onConvert={convertCode}\r\n                currentLanguage={selectedLanguage}\r\n                theme={theme}\r\n            />\r\n\r\n            {/* Toolbar for Project Actions and AI Tools */}\r\n            <Toolbar\r\n                currentProjectId={currentProjectId}\r\n                saveProject={saveProject}\r\n                loadProject={loadProject}\r\n                newProject={newProject}\r\n                deleteProject={deleteProject}\r\n                loading={loading || aiLoading}\r\n                message={message}\r\n                explainCode={explainCode}\r\n                reviewCode={reviewCode}\r\n                showGenerateModal={() => setIsGenerateModalOpen(true)}\r\n                showConvertModal={() => setIsConvertModalOpen(true)}\r\n                theme={theme}\r\n                toggleTheme={toggleTheme}\r\n                isAutosaveEnabled={isAutosaveEnabled}\r\n                toggleAutosave={toggleAutosave}\r\n            />\r\n\r\n            <div className=\"flex flex-1 overflow-hidden\">\r\n                {/* 1. Language Sidebar */}\r\n                <LanguageSidebar \r\n                    selectedLanguage={selectedLanguage}\r\n                    switchLanguage={switchLanguage}\r\n                    theme={theme}\r\n                />\r\n\r\n                {/* 2. File Explorer Sidebar */}\r\n                <div className=\"w-64 flex-shrink-0 overflow-y-auto\">\r\n                    <FileManagement\r\n                        files={currentFiles}\r\n                        selectedPath={selectedPath}\r\n                        setSelectedPath={setSelectedPath}\r\n                        updateFiles={setCurrentFiles} \r\n                        currentProjectId={currentProjectId}\r\n                        userId={userId}\r\n                        selectedLanguage={selectedLanguage}\r\n                        theme={theme}\r\n                    />\r\n                </div>\r\n\r\n                {/* 3. IDE Layout (Editor + Dynamic Right Panel) */}\r\n                <div className=\"flex-1 overflow-hidden flex\">\r\n                    {/* Code Editor */}\r\n                    <div className=\"flex-1 h-full border-r border-gray-700\">\r\n                        <CipherEditor\r\n                            selectedPath={selectedPath}\r\n                            fileContent={activeFileContent}\r\n                            updateFileContent={updateFileContent}\r\n                            selectedLanguage={selectedLanguage}\r\n                            theme={theme}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Right Panel: Tabbed Preview/AI Tools */}\r\n                    <div className=\"flex-1 h-full flex flex-col\">\r\n                        {/* Tab Buttons */}\r\n                        <div className={`flex ${theme === 'dark' ? 'bg-gray-900 border-gray-700' : 'bg-gray-200 border-gray-300'} border-b`}>\r\n                            <button\r\n                                onClick={() => setActiveRightPanel('preview')}\r\n                                className={`px-4 py-2 text-sm font-medium transition-colors duration-200 ${\r\n                                    activeRightPanel === 'preview'\r\n                                        ? `${theme === 'dark' ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-900'} border-b-2 border-green-500`\r\n                                        : `${theme === 'dark' ? 'text-gray-400 hover:bg-gray-800' : 'text-gray-600 hover:bg-gray-300'}`\r\n                                }`}\r\n                            >\r\n                                Preview\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setActiveRightPanel('ai_tools')}\r\n                                className={`px-4 py-2 text-sm font-medium transition-colors duration-200 flex items-center ${\r\n                                    activeRightPanel === 'ai_tools'\r\n                                        ? `${theme === 'dark' ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-900'} border-b-2 border-purple-500`\r\n                                        : `${theme === 'dark' ? 'text-gray-400 hover:bg-gray-800' : 'text-gray-600 hover:bg-gray-300'}`\r\n                                }`}\r\n                            >\r\n                                ‚ú® AI Tools\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Panel Content */}\r\n                        <div className=\"flex-1\">\r\n                            {activeRightPanel === 'preview' ? (\r\n                                <CipherPreview\r\n                                    files={previewFiles}\r\n                                    selectedLanguage={selectedLanguage}\r\n                                    theme={theme}\r\n                                    callGeminiApi={callGeminiApi}\r\n                                />\r\n                            ) : (\r\n                                <AiOutputPanel\r\n                                    aiOutput={aiOutput}\r\n                                    aiLoading={aiLoading}\r\n                                    aiToolMessage={aiToolMessage}\r\n                                    theme={theme}\r\n                                />\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}